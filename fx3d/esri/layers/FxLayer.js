//>>built
require({cache:{"fx3d/views/3d/support/fx3dUtils":function(){define("dojo/_base/array dojox/validate/regexp esri/core/mathUtils esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/mat4f64 esri/core/libs/gl-matrix-2/vec3 esri/core/libs/gl-matrix-2/mat4 ../webgl-engine-extensions/constraints dojo/text!../effects/config.json".split(" "),function(b,a,d,e,c,f,h,v,G){e=e.vec3f64;c=c.mat4f64;f=f.vec3;h=h.mat4;var k=d.deg2rad(1),y=d.rad2deg(1),t=e.fromValues(0,0,1),F=f.normalize(e.fromValues(1,
1,1),e.fromValues(1,1,1)),H=c.create(),K=e.create(),q=e.create(),n=e.create(),A=e.create();G=JSON.parse(G);var z;window.fx3d={version:"1.2.3",description:"javascript library for 3D data visualization",copyright:"Esri R\x26D Center Beijing"};var J={layerId:"3dfx-",enableAddTesting:!0,debug_timeCost:!0,debug_showPoint:!1,debug_clearEarth:!1,KeySplit:"$",NotFound:"NULL",CSVDateFileSuffix:"_dates",DataFormatNotSupported:"not-supported",DateToValueOfTime:-1,wgs84ToSphericalEngineCoords:function(g,p,x,
m){var w=v.EARTH_RADIUS+g[p+2],D=k*g[p+1];g=k*g[p];p=Math.cos(D);x[m++]=Math.cos(g)*p*w;x[m++]=Math.sin(g)*p*w;x[m]=Math.sin(D)*w},sphericalEngineCoordsToWGS84:function(g,p,x,m){var w=g[p],D=g[p+1],M=g[p+2];w=Math.sqrt(w*w+D*D+M*M);D=d.asinClamped(g[p+2]/w);g=(0<g[p+1]?1:-1)*d.acosClamped(g[p]/(Math.cos(D)*w));x[m++]=y*g;x[m++]=y*D;x[m]=w-v.EARTH_RADIUS},wgs84ToWebMerc:function(g,p,x,m){var w=.4999999*Math.PI,D=k*g[p+1];D=J.clamp(D,-w,w);w=Math.sin(D);x[m++]=k*g[p]*v.EARTH_RADIUS;x[m++]=v.EARTH_RADIUS/
2*Math.log((1+w)/(1-w));x[m]=g[p+2]},webMercToWGS84:function(g,p,x,m){x[m++]=y*(g[p++]/v.EARTH_RADIUS);x[m++]=y*(Math.PI/2-2*Math.atan(Math.exp(-1*g[p++]/v.EARTH_RADIUS)));x[m]=g[p]},clamp:function(g,p,x){return g<p?p:g>x?x:g},checkTimeSlider:function(g){var p=null;return g instanceof Array&&b.some(g,function(x){if(x.attributes.pointId===J.DateToValueOfTime){p={};for(var m in x.attributes)m.startWith("valueOfTime")&&(p[m]=x.attributes[m]);return!0}}),p},isDigit:function(g){return null!==/^-?\d+\.?\d*$/.exec(g)&&
""!==g},rgba2float:function(g){return g[0]/256+g[1]/65536+g[2]/16777216},endsWith:function(g,p){return-1!==g.indexOf(p,g.length-p.length)},mod:function(g,p){var x;return x=parseInt(g/p,10),g-=x*p,0>g&&(g+=p),g},nextHighestPowerOfTwo:function(g){--g;for(var p=1;32>p;p<<=1)g|=g>>p;return g+1},isPowerOfTwo:function(g){return 0===(g&g-1)&&0!==g},doubleTo2Floats:function(g){var p,x,m;return 0<=g?(m=65536*Math.floor(g/65536),p=m,x=g-p):(m=65536*Math.floor(-g/65536),p=-m,x=g+m),[p,x]},vec3DoubleTo2Floats:function(g){if(g instanceof
Array){for(var p=[],x=0;x<g.length;x++)p.push(this.doubleTo2Floats(g[x]));return p}},littleEndian:function(){var g=new ArrayBuffer(2);return(new DataView(g)).setInt16(0,256,!0),256===(new Int16Array(g))[0]}(),Log:{Info:0,Warn:1,Error:2,msg:function(g,p,x){if("number"==typeof g&&"string"==typeof p&&"string"==typeof x)switch(g){case this.Info:console.info(p+": "+x);break;case this.Warn:console.warn(p+": "+x);break;case this.Error:console.error(p+": "+x)}}},ExpDataSourceType:{CSV:"csv",FeatureServer:"featureserver",
Grib2:"grib2",Volume:"volume"},EffectType:{AreaExtrude:"AreaExtrude",DensityMesh:"DensityMesh",PointExtrude:"PointExtrude",Bounce:"Bounce",Pulse:"Pulse",Fireball:"Fireball",JetTrail:"JetTrail",LineBox:"LineBox",Worm:"Worm",HeatLine:"HeatLine",DensityWall:"DensityWall",HeatGrid:"HeatGrid",Current:"Current",Cascade:"Cascade",Volume:"Volume"},EffectDataFormat:{AreaExtrude:{keyFields:["boundaryId"],checkRules:["multi time values"]},DensityMesh:{keyFields:["areaId"],checkRules:["multi time values"]},PointExtrude:{keyFields:["pointId"],
checkRules:["multi time values"]},Bounce:{keyFields:["pointId"],checkRules:["multi time values"]},Pulse:{keyFields:["pointId"],checkRules:["single time value"]},Fireball:{keyFields:["pointId","pathId"],checkRules:["single time value"]},JetTrail:{keyFields:["pointId","pathId"],checkRules:["single time value"]},LineBox:{keyFields:["pointId","pathId"],checkRules:["single time value"]},Worm:{keyFields:["pointId","pathId"],checkRules:["single time value"]},HeatLine:{keyFields:["pointId","pathId"],checkRules:["multi time values"]},
DensityWall:{keyFields:["pointId","pathId"],checkRules:["multi time values"]},HeatGrid:{keyFields:["gfs"],checkRules:["multi time values"]},Current:{keyFields:["gfs"],checkRules:["multi time values"]},Cascade:{keyFields:["pointId","pathId"],checkRules:["multi time values"]}},EffectDataType:{AreaType:["DensityMesh"],BoundaryType:["AreaExtrude"],PathType:"Cascade Fireball JetTrail LineBox Worm HeatLine DensityWall".split(" "),PointType:["PointExtrude","Bounce","Pulse"],GfsType:["HeatGrid","Current"],
VolumeType:["Volume"]},getLayerTypeOfVolume:function(g){switch(g){case "Q":return 1;case "N":case "N2":return 2;case "P2s":return 3;case "P1x":return 4;case "P1s":return 5;case "C2t":case "C3t":return 6;case "C2b":return 7;case "O1l":case "O1+2":return 8}return 0},groupLayerType:function(g){var p,x;for(p in g)if("N"===p)for(x in g)"N2"===x&&delete g[x];else if("N2"===p)for(x in g)"N"===x&&delete g[x];else if("O1l"===p)for(x in g)"O1+2"===x&&delete g[x];else if("O1+2"===p)for(x in g)"O1l"===x&&delete g[x];
else if("C2t"===p)for(x in g)"C3t"===x&&delete g[x];else if("C3t"===p)for(x in g)"C2t"===x&&delete g[x]},addTestEffect:function(g,p){if("string"==typeof g&&"string"==typeof p){var x;"point"===p?x=this.EffectDataType.PointType:"area"===p?x=this.EffectDataType.AreaType:"path"===p?x=this.EffectDataType.PathType:"boundary"===p?x=this.EffectDataType.BoundaryType:"gfs"===p?x=this.EffectDataType.GfsType:"volume"===p&&(x=this.EffectDataType.Volume);x instanceof Array&&(this.EffectType[g]=g,x.push(g))}},TypeCheckResult:{NOT_MATHCH:1,
TYPE_FIELD_MISSED:2,ALL_FIELDS_MISSED:3,ITEM_VALUE_INVALID:4,SUCCESS:100,SUCCESS_AreaType:101,SUCCESS_BoundaryType:102,SUCCESS_PathType:103,SUCCESS_PointType:104,SUCCESS_GfsType:105,SUCCESS_VolumeType:106},pairCheck:function(g,p){if("string"==typeof g&&"string"==typeof p)for(var x=this.EffectDataType[g],m=0;m<x.length;m++)if(x[m]===p)return this.TypeCheckResult["SUCCESS_"+g];return this.TypeCheckResult.NOT_MATHCH},checkDataEffect:function(g,p){var x=this.TypeCheckResult.SUCCESS;if(g instanceof Array){for(var m=
x=!1,w=!1,D=!1,M=!1,S=0;S<g.length;S++)x||"pointid"!=g[S].toLowerCase()||(x=!0),m||"pathid"!=g[S].toLowerCase()||(m=!0),w||"areaid"!=g[S].toLowerCase()||(w=!0),D||"boundaryid"!=g[S].toLowerCase()||(D=!0),M||"bhid"!=g[S].toLowerCase()||(M=!0);x=!w||D||m||!x||M?w||!D||m||!x||M?w||D||!m||!x||M?w||D||m||!x||M?w||D||m||x||!M?this.TypeCheckResult.TYPE_FIELD_MISSED:this.pairCheck("VolumeType",p):this.pairCheck("PointType",p):this.pairCheck("PathType",p):this.pairCheck("BoundaryType",p):this.pairCheck("AreaType",
p)}else x=this.TypeCheckResult.ALL_FIELDS_MISSED;return x},GFSDataGroupLen:{HeatGrid:1,Current:2},checkEffectGFSPair:function(g,p){return"number"==typeof g&&"string"==typeof p&&g===this.GFSDataGroupLen[p]},isInforAttrChanged:function(g,p){function x(D,M){var S,V=!1;if("function"==typeof D&&"function"==typeof M||D instanceof Date&&M instanceof Date||D instanceof RegExp&&M instanceof RegExp||D instanceof String&&M instanceof String||D instanceof Array&&M instanceof Array||D instanceof Number&&M instanceof
Number)D.toString()!==M.toString()&&0<M.toString().length&&(V=!0);else if("object"==typeof D&&"object"==typeof M){if(null!==M)for(S in M)if(D.hasOwnProperty(S)){if(m.push(D),w.push(M),x(D[S],M[S])){V=!0;D[S]=M[S];break}m.pop();w.pop()}}else isNaN(D)&&isNaN(M)&&"number"==typeof D&&"number"==typeof M&&(V=!1),D!==M&&(V=!0);return V}var m,w;return m=[],w=[],x(g,p)},ColorUtil:{_colors:[],_pos:[],_min:0,_max:1,setColors:function(g){var p,x;if(g||(g=[[220,220,220],[20,20,20]]),this._colors=[],this._pos=
[],g instanceof Array){g=g.slice(0);for(p=0;p<g.length;p++)if(col=g[p],col instanceof Array){for(x in col)0>col[x]&&(col[x]=0),255<col[x]&&(col[x]=255);this._colors.push(col)}for(p=0;p<this._colors.length;p++)this._pos.push(p/(this._colors.length-1))}},getColor:function(g){var p;var x=(g-this._min)/(this._max-this._min);x=Math.min(1,Math.max(0,x));for(g=0;g<this._pos.length;g++){if(p=this._pos[g],x<=p){var m=this._colors[g];break}if(x>=p&&g===this._pos.length-1){m=this._colors[g];break}if(x>p&&x<
this._pos[g+1]){var w=this._colors[g];var D=this._colors[g+1];w instanceof Array&&D instanceof Array||(m=[123,123,123]);x=(x-p)/(this._pos[g+1]-p);(!x||0>x)&&(x=.5);m=[w[0]+x*(D[0]-w[0]),w[1]+x*(D[1]-w[1]),w[2]+x*(D[2]-w[2])];break}}return[m[0],m[1],m[2]]}},_clampBlackColor:function(g){if(g instanceof Array){var p=g[0],x=g[1];x=x&&10>x[0]&&10>x[1]&&10>x[2];if(p&&10>p[0]&&10>p[1]&&10>p[2]&&x)return[[10,10,10],[10,10,10]]}return g},createColorBarTexture:function(g,p,x){g=g||32;p=p||1;z||(z=document.createElement("canvas"));
z.width=g;z.height=p;var m,w=z.getContext("2d"),D=w.createImageData(g,p),M=0;J.ColorUtil.setColors(x);for(x=0;x<p;x++)for(m=0;m<g;m++){var S=m/(g-1);S=J.ColorUtil.getColor(S);D.data[M++]=S[0];D.data[M++]=S[1];D.data[M++]=S[2];D.data[M++]=255}return w.putImageData(D,0,0),z},CatmullRomUtil:{getPoints:function(g,p){g||(g=10);for(var x=[],m=0;m<=g;m++)x.push(this._getPoint(m/g,p));return x},_getPoint:function(g,p){var x,m,w,D=[];g*=p.length-1;var M=Math.floor(g);g-=M;D[0]=0===M?M:M-1;D[1]=M;D[2]=M>p.length-
2?p.length-1:M+1;D[3]=M>p.length-3?p.length-1:M+2;M=p[D[0]];var S=p[D[1]],V=p[D[2]];p=p[D[3]];return x=this._interpolate(g,M[0],S[0],V[0],p[0]),m=this._interpolate(g,M[1],S[1],V[1],p[1]),w=this._interpolate(g,M[2],S[2],V[2],p[2]),[x,m,w]},_interpolate:function(g,p,x,m,w){p=.5*(m-p);w=.5*(w-x);var D=g*g;return(2*x-2*m+p+w)*g*D+(-3*x+3*m-2*p-w)*D+p*g+x}},createTextTexture:function(g,p,x,m,w,D){z||(z=document.createElement("canvas"));var M=z.getContext("2d");M.font=p+"px "+w;var S,V,B=function(Q){var I=
Q.ownerDocument;Q=Q.getBoundingClientRect();var N=I.body,R=I.documentElement;I=null!=I&&I==I.window?I:9===I.nodeType&&(I.defaultView||I.parentWindow);return{top:Q.top+(I.pageYOffset||R.scrollTop||N.scrollTop)-(R.clientTop||N.clientTop||0),left:Q.left+(I.pageXOffset||R.scrollLeft||N.scrollLeft)-(R.clientLeft||N.clientLeft||0)}};B=function(Q){for(var I=1;I<Q;)I*=2;return I};var P=function(Q,I,N,R){I=I.replace("\n"," ");var U,Z,O=I,T=0,u=0,L=I.split(" ");for(I=Z=L.length;Q.measureText(O).width>N&&1<
I;){I--;O=U="";for(var Y=0;Y<Z;Y++)Y<I?(O+=L[Y],Y+1<I&&(O+=" ")):(U+=L[Y],Y+1<Z&&(U+=" "))}return R.push(O),u=Q.measureText(O).width,U&&(T=P(Q,U,N,R),T>u&&(u=T)),u},E=512,l=[];switch(E&&M.measureText(g).width>E?(E=P(M,g,E,l),S=B(E)):(l.push(g),S=B(M.measureText(g).width)),V=B(p*(l.length+1)),S<V&&(S=V),z.width=S,z.height=V,m){case "left":var C=0;break;case "center":C=S/2;break;case "right":C=S}g=V/2;M.fillStyle=D;M.fillRect(0,0,M.canvas.width,M.canvas.height);M.fillStyle=x;M.textAlign=m;M.textBaseline=
"middle";M.font=p+"px "+w;B=.5*(V-p*(l.length+1));for(x=0;x<l.length;x++)1<l.length&&(g=(x+1)*p+B),M.fillText(l[x],C,g);return z},createLinearHaloTexture:function(g,p){g instanceof Array&&3===g.length||(g=[255,255,255]);p instanceof Array&&3===p.length||(p=[255,255,0]);z||(z=document.createElement("canvas"));z.width=128;z.height=2;var x=z.getContext("2d"),m=x.createLinearGradient(0,1,z.width,1);g="rgba("+g[0]+","+g[1]+","+g[2]+",1.0)";p="rgba("+p[0]+","+p[1]+","+p[2]+",0.05)";return m.addColorStop(0,
p),m.addColorStop(.4,g),m.addColorStop(.6,g),m.addColorStop(1,p),x.fillStyle=m,x.fillRect(0,0,z.width,z.height),z},createRadialTexture:function(g,p){g instanceof Array&&3===g.length||(g=[255,255,255]);p instanceof Array&&3===p.length||(p=[0,0,0]);z||(z=document.createElement("canvas"));z.width=256;z.height=256;var x=z.getContext("2d"),m=[.5*z.width,.5*z.height];m=x.createRadialGradient(m[0],m[1],0,m[0],m[1],.5*Math.min(z.height,z.width));p="rgba("+p[0]+","+p[1]+","+p[2]+",1.0)";return m.addColorStop(0,
"rgba("+g[0]+","+g[1]+","+g[2]+",1.0)"),m.addColorStop(.5,p),m.addColorStop(1,"rgba(0, 0, 0, 0.0)"),x.fillStyle=m,x.fillRect(0,0,z.width,z.height),x.fillRect(0,0,z.width,z.height),z},rgb2hexExt:function(g){return g instanceof Array&&3===g.length?"#"+("0"+parseInt(g[0],10).toString(16)).slice(-2)+("0"+parseInt(g[1],10).toString(16)).slice(-2)+("0"+parseInt(g[2],10).toString(16)).slice(-2):"#000000"},toPercent:function(g){return(100*parseFloat(g)).toString()+"%"},updateColorBar:function(g,p,x,m){if(g&&
x instanceof Array&&p instanceof Array){var w=p.length;p="bottom: 4px;right: 4px;font-size: 12px;";m?(p+="width: "+60*w+"px;",p+="height: 80px;"):(p+="width: 80px;",p+="height: "+50*w+"px;");g.style.cssText="position: absolute; display: block; z-index: 110; background-color: rgb(0,0,0); background-color: rgba(0,0,0,0.5); border-width: 0px; border-radius: 1px; border-style: solid; border-color: rgba(255,255,255,0.3); -webkit-box-shadow: 0 1px 1px rgba(0,0,0,0.05); box-shadow: 0 1px 1px rgba(0,0,0,0.05);";
g.style.cssText+=p;p=document.createElement("canvas");m?(p.height=.4*g.clientHeight,p.width=g.clientWidth):(p.height=g.clientHeight,p.width=.4*g.clientWidth);w=p.getContext("2d");var D=null;D=m?w.createLinearGradient(0,0,p.width,p.height):w.createLinearGradient(0,0,0,p.height);for(var M=0;M<x.length;M++)!(x[M]instanceof Object)||null===x[M].step&&null==x[M].step||null===x[M].color&&null==x[M].color||D.addColorStop(x[M].step,this.rgb2hexExt(x[M].color));w.fillStyle=D;w.fillRect(0,0,p.width,p.height);
w=document.getElementById("3dexpColorBar");w.src=p.toDataURL();w.style.width=p.width+" px";w.style.height=p.height+" px";w=document.getElementsByClassName("3dexpSpanLabel");if(g&&0<w.length)for(;0<w.length;)g.removeChild(w[0]);for(w=0;w<x.length;w++)!(x[w]instanceof Object)||null===x[w].label&&null==x[w].label||null===x[w].step&&null==x[w].step||(D=document.createElement("span"),D.className="3dexpSpanLabel",D.style.cssText="position: absolute; left: 46px; font-family: 'Arial', sans-serif; font-size: 12px; color: #e0e0e0; font-style: italic;",
m?(D.style.cssText+="top: "+1.5*p.height+"px",D.style.cssText+="left: "+this.toPercent(.99<x[w].step?x[w].step-.14:x[w].step)+";"):(D.style.cssText+="left: "+1.5*p.width+"px",D.style.cssText+="top: "+this.toPercent(.99<x[w].step?x[w].step-.06:x[w].step)+";"),D.innerHTML="\x3cspan\x3e"+x[w].label+x[w].unit+"\x3c/span\x3e",g.appendChild(D))}},createColorBar:function(){var g=document.createElement("div");document.body.appendChild(g);var p=document.createElement("img");return p.id="3dexpColorBar",g.appendChild(p),
g},showColorBar:function(g,p){g&&(p?g.style.display="block":g.style.display="none")},isEqual:function(g,p){function x(D,M){var S;if(null===D&&null===M||"undefined"==typeof D&&"undefined"==typeof M)return!0;if(null===D&&null!==M||null===M&&null!==D||"undefined"==typeof D&&"undefined"!=typeof M||"undefined"==typeof M&&"undefined"!=typeof D)return!1;if(isNaN(D)&&isNaN(M)&&"number"==typeof D&&"number"==typeof M||D===M)return!0;if("function"==typeof D&&"function"==typeof M||D instanceof Date&&M instanceof
Date||D instanceof RegExp&&M instanceof RegExp||D instanceof String&&M instanceof String||D instanceof Number&&M instanceof Number)return D.toString()===M.toString();if(-1<m.indexOf(D)||-1<w.indexOf(M))return!1;if(null!==M){for(S in M)if(M.hasOwnProperty(S)!==D.hasOwnProperty(S)||typeof M[S]!=typeof D[S])return!1;for(S in D){if(M.hasOwnProperty(S)!==D.hasOwnProperty(S)||typeof M[S]!=typeof D[S])return!1;switch(typeof D[S]){case "object":case "function":if(m.push(D),w.push(M),!x(D[S],M[S]))return!1;
m.pop();w.pop();break;default:if(D[S]!==M[S])return!1}}}return!0}var m,w;return m=[],w=[],!!x(g,p)},equals:function(g,p){var x,m;return g===p||typeof g==typeof p&&("object"==typeof g?g.constructor===g.constructor&&(g instanceof Array?g.length===p.length&&g.every(function(w,D){return equals(w,p[D])}):g instanceof RegExp?g.toString()===p.toString():(x=Object.keys(g),m=Object.keys(p),x.length===m.length&&x.every(function(w){return equals(g[w],p[w])}))):"function"==typeof g?g.toString()===p.toString():
g===p)},isUrl:function(g){var p="^"+a.url({allowNamed:!0,allowLocal:!0});return(new RegExp(p,"g")).test(g)},_isRequiredTypesIn:function(g,p){var x=0;return b.forEach(p,function(m){for(var w=0;w<g.length;w++)g[w].type!=m||x++}),p.length===x},availableVizTypes:function(g,p){return(g=G[g])?g:[]},effectConfig:function(g){var p=Object.getOwnPropertyNames(G),x=null;return b.some(p,function(m){return b.some(G[m],function(w){if(g.toLowerCase()===w.name.toLowerCase())return x=w,!0})}),x},extensionsMessage:function(){var g=
document.createElement("div");g.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+r+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e";g.style.position="fixed";g.style.top="0";g.style.width="100%";g.style.color="#ff0000";g.style.zIndex=1E6;document.body.appendChild(g)},sortHelper:function(g,p,x){return g===p?0:g<p?x?1:-1:
g>p?x?-1:1:0},spriteImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxQzIyMkFCODFFMjA2ODExODNEMTgzRDNCQjcwNzU3NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3QTc4QjM3QTI0OTAxMUU2ODFGMjk2MjI2NkE0Q0FCMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3QTc4QjM3OTI0OTAxMUU2ODFGMjk2MjI2NkE0Q0FCMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUMyMjJBQjgxRTIwNjgxMTgzRDE4M0QzQkI3MDc1NzQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUMyMjJBQjgxRTIwNjgxMTgzRDE4M0QzQkI3MDc1NzQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5DNIzlAABfxElEQVR42uy9WZPkSJIeaGqAR0QedXR1T0+T3JndEcrKCsmVlX3lC388fwRnH1Yo2xSSc3edmRkRDpiumanaCTPAAHePjOwyK4nKCHcADsChqp9+egEiir766uvXuWS/BX311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX3311RVAX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX311BdBXX3198Wv84w9bm6D+gd0HxuYXd3x25TTggvNcO27Tu203AbB+H+Cm3zBc+qWVjwGlveEqF4OHH5flkfCix+/mX84tV5s8jF0HXv97d3KAUH3q4IbPGlxBflaPAeX3YK+Ab9377ICIl3+P2B/trgCuLfDQchDWBRD/sbILXO2aUkOABeGGgwIEjYqh5ZgtSgsK+hR3qhm4Bi7tCuDPSejhckUB+7ZvEfprIk+04BwWlh2W+mlTQKBB3GADk+KB68YKNIFt4L8p5fBrVgbjr1Lo94kZNL4BFavfqgxu5RZsCV3kwa8qiTV5gh3bHLHCC9RQ9K4KqApbjo9Fc4BdAfw5w3u42B24ZLuaMOy1yrAB5VEc50hlYS/cgPG4UykcheZQQAO48zvADRGHX4MiGH9VQl9+B/YeD/YqGgwPLLYJvvv3UncBrnjvzKlLSAUCM2Hc8u+hwQ63cBNY+GXx2VhGP0ukAE3KCbsC+FKF/pgDAA0fsHmMqhsARdgNC1jeKj4tAHf/MVoRCWRE4xH/fo+LAFt2HOv3tCbMUOMb/py5gvHPR+hha0s4qkRgWwCq++O2IED13+vQgqkOuiytYy2CsOfIa67CljuBsYlfuefpsbBZmB2iaXEpsCuAV2Dl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CqJE8rUn/kCS1tsSVgSs8xJ5M48tZZEKnm+7kXQMqoUn11qe733o4nODBn99FRX4PmC4VAI7j7umBLYU1jbvUE5tWx8Uus0HvCrBf00KoEkR7BD4xXsbKb2lqDxA+QFZt9zYTEK2wP9YGUEForfCcmx8KNeCm3tj3EvSDG3TEKi00gKxj1EP+yz3VDuE78iE3erwG/hCBP81KoC9imBVGUC7osAEBItijHerJ0HV8kcoBjLbgqtEG1bDpwt+YtPSQzLFqJWfaR3BttfCYoXEKyUmtR//eorrMApYuWkoXukaxetdLdN/F9tA2/4Li5+RV7nLsKl0cFsRbNcU5FThuhLMQ4uljLZm6B9mb1Zh9ZoL1Y4IsNi5pxUFrMP7ddx1iyy9Lwbqf4kKoFkRQCMqWLwPdXSAdSRQPl7bXOOjAyzLyAEWCuOwAqgYMBQNpdB7/O2oZ0CpmErtIPD2ps7uF+66Ct7sOAziy1ij+HJWS+Rgy1rngrNat7DSMbaZTMSWMGOLQAbYDI0CckQBtEL//dY1gv0c/0e8TKHUPqelLfiR9/DAfegK4DO6B0vhhP18QsEdKPl9LSHFkudbhrxl/3/dBaj9np78lhsAWIfdRx5+zK6pHc7v/5wlosArQHVcmT74BQv+l64AWq39PmRQcRWcUFRKhKv74naTk3JUHzZh+VbaqhDH0lBLnwcXC2Qd3quGe7M3t34rFoMHr+nPSvD/XBTAPmVQTkZpjjZsDJFYcwvaG5vCzWD4HuHHnWwFVoS7ul3TyPhtf79tMgNeqBzrGYKiK4AvyUUAITb6xG+iA4y2ySDCnszFMnLIpw+V3sEdDyVUmfbq+UJ9dt5Ra3iUh9gJ1Re9yFuyMvAK19cVwBeDCrDJq92FDnCDH2iy+ssmpVjAAulZx21B9vvQrT4+iFIfwn2CsQfeH4fhAEeQwK9S6H9NCqD+ZZZ6Ee3gBSow1m+3Mjxliwis9xssh/6uIUhrVXdw8XG2XZJbWWJcvdO/UqH/tSqA8hedwu69D0d7tmLdTWhJsnFjQ3OlhVVrCk3KR6yglaMt17eU0kXCvpLk0XbcuvP1q1y/ZgVwRLCP7Iebj99aglECc/eNbL8IUu+7J9ew7tgquyJrbYaXf9+iK4C+9vIARxTCnhqDvedwtYcayhKGV76vu/aBl//cX8UCxH5v+urr17pkvwV99dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF999dUVQF99dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199dQXQV199ffHr/xdgAKO3NCOK/8ywAAAAAElFTkSuQmCC",
rgbNames:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,
144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,
216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,
170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,
232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,
128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},calculatePerfectPosition:function(g,p,x,m){(null==m||1E-6>Math.abs(m))&&(m=32.25);f.set(A,g[0],g[1],g[2]);f.cross(K,A,t);0==f.dot(K,K)&&f.cross(K,A,F);h.identity(H);h.rotate(H,
H,-k*x,A);h.rotate(H,H,-k*m,K);f.normalize(q,A);f.scale(n,q,p);f.add(A,A,n);f.transformMat4(f.negate(q,q),f.negate(q,q),H);return f.scale(q,q,p*Math.tan(k*m)),f.add(A,A,q),A}},r='The 3DFx requires a browser that supports `OES_element_index_uint` and `OES_texture_float` extensions of WebGL. \x3cbr/\x3e\x3ca href\x3d"https://www.khronos.org/registry/webgl/extensions"\x3eClick here for more information.\x3c/a\x3e';return J})},"dojox/validate/regexp":function(){define(["dojo/_base/lang","dojo/regexp",
"dojox/main"],function(b,a,d){var e=b.getObject("validate.regexp",!0,d);return e=d.validate.regexp={ipAddress:function(c){c="object"==typeof c?c:{};"boolean"!=typeof c.allowDottedDecimal&&(c.allowDottedDecimal=!0);"boolean"!=typeof c.allowDottedHex&&(c.allowDottedHex=!0);"boolean"!=typeof c.allowDottedOctal&&(c.allowDottedOctal=!0);"boolean"!=typeof c.allowDecimal&&(c.allowDecimal=!0);"boolean"!=typeof c.allowHex&&(c.allowHex=!0);"boolean"!=typeof c.allowIPv6&&(c.allowIPv6=!0);"boolean"!=typeof c.allowHybrid&&
(c.allowHybrid=!0);var f=[];c.allowDottedDecimal&&f.push("((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");c.allowDottedHex&&f.push("(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]");c.allowDottedOctal&&f.push("(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]");c.allowDecimal&&f.push("(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])");
c.allowHex&&f.push("0[xX]0*[\\da-fA-F]{1,8}");c.allowIPv6&&f.push("([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}");c.allowHybrid&&f.push("([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])");c="";0<f.length&&(c="("+f.join("|")+")");return c},host:function(c){c="object"==typeof c?c:{};"boolean"!=typeof c.allowIP&&(c.allowIP=!0);"boolean"!=typeof c.allowLocal&&(c.allowLocal=!1);"boolean"!=typeof c.allowPort&&(c.allowPort=!0);"boolean"!=typeof c.allowNamed&&
(c.allowNamed=!1);var f=c.allowPort?"(\\:\\d+)?":"",h="((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.?)";c.allowIP&&(h+="|"+e.ipAddress(c));c.allowLocal&&(h+="|localhost");c.allowNamed&&(h+="|^[^-][a-zA-Z0-9_-]*");return"("+h+")"+f},url:function(c){c="object"==typeof c?c:{};"scheme"in c||(c.scheme=[!0,!1]);return a.buildGroupRE(c.scheme,function(f){return f?"(https?|ftps?)\\://":""})+e.host(c)+"(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]+(?:\\?[^?#\\s/]*)?(?:#[A-Za-z][\\w.:-]*)?)?)?"},
emailAddress:function(c){c="object"==typeof c?c:{};"boolean"!=typeof c.allowCruft&&(c.allowCruft=!1);c.allowPort=!1;var f="([!#-'*+\\-\\/-9\x3d?A-Z^-~]+[.])*[!#-'*+\\-\\/-9\x3d?A-Z^-~]+@"+e.host(c);c.allowCruft&&(f="\x3c?(mailto\\:)?"+f+"\x3e?");return f},emailAddressList:function(c){c="object"==typeof c?c:{};"string"!=typeof c.listSeparator&&(c.listSeparator="\\s;,");var f=e.emailAddress(c);return"("+f+"\\s*["+c.listSeparator+"]\\s*)*"+f+"\\s*["+c.listSeparator+"]?\\s*"},numberFormat:function(c){c=
"object"==typeof c?c:{};"undefined"==typeof c.format&&(c.format="###-###-####");return a.buildGroupRE(c.format,function(f){return a.escapeString(f,"?").replace(/\?/g,"\\d?").replace(/#/g,"\\d")})},ca:{postalCode:function(){return"([A-Z][0-9][A-Z] [0-9][A-Z][0-9])"},province:function(){return"(AB|BC|MB|NB|NL|NS|NT|NU|ON|PE|QC|SK|YT)"}},us:{state:function(c){c="object"==typeof c?c:{};"boolean"!=typeof c.allowTerritories&&(c.allowTerritories=!0);"boolean"!=typeof c.allowMilitary&&(c.allowMilitary=!0);
var f="AL|AK|AZ|AR|CA|CO|CT|DE|DC|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY";c.allowTerritories&&(f+="|AS|FM|GU|MH|MP|PW|PR|VI");c.allowMilitary&&(f+="|AA|AE|AP");return"("+f+")"}}}})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(b,a){var d={};a.setObject("dojo.regexp",d);d.escapeString=function(e,c){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(f){return c&&-1!=c.indexOf(f)?
f:"\\"+f})};d.buildGroupRE=function(e,c,f){if(!(e instanceof Array))return c(e);for(var h=[],v=0;v<e.length;v++)h.push(c(e[v]));return d.group(h.join("|"),f)};d.group=function(e,c){return"("+(c?"?:":"")+e+")"};return d})},"dojox/main":function(){define(["dojo/_base/kernel"],function(b){return b.dojox})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["exports","../../../chunks/vec3f64"],function(b,a){b.vec3f64=a.vec3f64;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/mat4f64":function(){define(["exports",
"../../../chunks/mat4f64"],function(b,a){b.mat4f64=a.mat4f64;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["exports","../../../chunks/vec3"],function(b,a){b.vec3=a.vec3;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/mat4":function(){define(["exports","../../../chunks/mat4"],function(b,a){b.mat4=a.mat4;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"fx3d/views/3d/webgl-engine-extensions/constraints":function(){define([],
function(){return{EARTH_RADIUS:6378137,VertexAttrConstants:{POSITION:"position",NORMAL:"normal",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",MAPPOS:"mapPos",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",TANGENT:"tangent",OFFSET:"offset",SUBDIVISIONS:"subdivisions",SUBDIVISIONFACTOR:"subdivisionFactor",COLORFEATUREATTRIBUTE:"colorFeatureAttribute",SIZEFEATUREATTRIBUTE:"sizeFeatureAttribute",OPACITYFEATUREATTRIBUTE:"opacityFeatureAttribute",UVMAPSPACE:"uvMapSpace",BOUNDINGRECT:"boundingRect",
UVREGION:"uvRegion",NORMALCOMPRESSED:"normalCompressed",PROFILERIGHT:"profileRight",PROFILEUP:"profileUp",PROFILEVERTEXANDNORMAL:"profileVertexAndNormal",FEATUREVALUE:"featureValue",MODELORIGINHI:"modelOriginHi",MODELORIGINLO:"modelOriginLo",MODEL:"model",MODELNORMAL:"modelNormal",INSTANCECOLOR:"instanceColor",INSTANCEFEATUREATTRIBUTE:"instanceFeatureAttribute",LOCALTRANSFORM:"localTransform",GLOBALTRANSFORM:"globalTransform",BOUNDINGSPHERE:"boundingSphere",MODELORIGIN:"modelOrigin",MODELSCALEFACTORS:"modelScaleFactors",
FEATUREATTRIBUTE:"featureAttribute",STATE:"state",LODLEVEL:"lodLevel",POSITION0:"position0",POSITION1:"position1",NORMALA:"normalA",NORMALB:"normalB",COMPONENTINDEX:"componentIndex",VARIANTOFFSET:"variantOffset",VARIANTSTROKE:"variantStroke",VARIANTEXTENSION:"variantExtension",U8PADDING:"u8padding",U16PADDING:"u16padding",SIDENESS:"sideness",START:"start",END:"end",UP:"up",EXTRUDE:"extrude"}}})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],function(b,
a,d,e){var c;d("host-browser")?c=function(k,y,t){e(k,{sync:!!y,headers:{"X-Requested-With":null}}).then(t)}:a.getText?c=a.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var f={},h=function(k){if(k){k=k.replace(/^\s*<\?xml(\s)+version=['"](\d)*.(\d)*['"](\s)*\?>/im,"");var y=k.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);y&&(k=y[1])}else k="";return k},v={},G={};b.cache=function(k,y,t){if("string"==typeof k)if(/\//.test(k)){var F=k;t=y}else F=a.toUrl(k.replace(/\./g,
"/")+(y?"/"+y:""));else F=k+"",t=y;k=void 0!=t&&"string"!=typeof t?t.value:t;t=t&&t.sanitize;if("string"==typeof k)return f[F]=k,t?h(k):k;if(null===k)return delete f[F],null;F in f||c(F,!0,function(H){f[F]=H});return t?h(f[F]):f[F]};return{dynamic:!0,normalize:function(k,y){k=k.split("!");var t=k[0];return(/^\./.test(t)?y(t):t)+(k[1]?"!"+k[1]:"")},load:function(k,y,t){k=k.split("!");var F=1<k.length,H=k[0],K=y.toUrl(k[0]);k="url:"+K;var q=v,n=function(z){t(F?h(z):z)};H in f?q=f[H]:y.cache&&k in y.cache?
q=y.cache[k]:K in f&&(q=f[K]);if(q===v)if(G[K])G[K].push(n);else{var A=G[K]=[n];c(K,!y.async,function(z){f[H]=f[K]=z;for(var J=0;J<A.length;)A[J++](z);delete G[K]})}else n(q)}}})},"fx3d/views/3d/layers/FxLayerView3D":function(){define("dojo/_base/lang dojo/_base/array esri/views/layers/LayerView ./SnapshotController esri/geometry/Point esri/geometry/Extent esri/geometry/projection esri/geometry/projection/projectXYZToVector esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/vec3 esri/geometry/SpatialReference esri/core/reactiveUtils esri/core/Collection esri/Graphic esri/symbols/PictureMarkerSymbol esri/geometry/support/centroid ../effects/FxEffectRendererManager ../effects/FxEffectFactory ../support/fx3dUtils".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K,q,n,A,z){h=G.vec3f64;k=k.vec3;var J=h.create(),r=h.create(),g=h.create(),p=h.create(),x=h.create();return d.createSubclass({declaredClass:"esri.views.3d.layers.FxLayerView3D",constructor:function(m){this.supportsDraping=!1;this._fx3dSpatialReference=y.WGS84;m.layer&&(this.layer=m.layer);m.view&&(this.view=m.view);this.availableFields=["*"]},initialize:function(){n.init(this.view);this.layer.when().then(function(){this._eventHandles=[];this.loadedGraphics=null;
this._graphicsLoading=!0;this._graphicsCollectionEventHandle=null;this._graphicsControllerEventHandles=[];var m=this._initEffect();m.then(b.hitch(this,this._initGraphicsController));this.layer.addResolvingPromise(m);this._eventHandles.push(this.layer.on("destroy-fxlayer",function(){n.pause();n.destroy(this._layerVizType,this._layerId);this.view.map.remove(this.layer)}.bind(this)));this._eventHandles.push(this.layer.on("show-feature-label",b.hitch(this,this._onShowFeatureLabel)));this._eventHandles.push(this.layer.on("hide-feature-label",
function(){this.layer&&this.layer._labelsLayer&&(this.layer._labelsLayer.removeAll(),this._selectedFeature=null)}.bind(this)));this._eventHandles.push(this.view.on("click",b.hitch(this,this._viewClicked)))}.bind(this))},destroy:function(){this._viewModelHandler&&(this._viewModelHandler.remove(),this._viewModelHandler=null);var m=function(w){w.remove()};this.controller&&(this.controller.destroy(),this.controller=null);this._graphicsCollectionEventHandle&&this._graphicsCollectionEventHandle.remove();
this._graphicsControllerEventHandles&&this._graphicsControllerEventHandles.forEach(m);this._tilingSchemeHandle&&this._tilingSchemeHandle.remove();this._eventHandles&&this._eventHandles.forEach(m);this.inherited(arguments)},getLoadedGraphics:function(){return this.loadedGraphics&&this.loadedGraphics.toArray?[].concat(this.loadedGraphics.toArray()):[]},_initEffect:function(){return A.make({layer:this.layer,layerView:this,view:this.view})},_calculateExtentCenter:function(m){var w=m.length;if(w){var D,
M,S;if("point"==this.layer.geometryType){var V=D=m[0].geometry.longitude;var B=M=m[0].geometry.latitude;for(S=1;S<w;S++){var P=m[S];null!=P.geometry&&(P.geometry.longitude<V&&(V=P.geometry.longitude),P.geometry.longitude>D&&(D=P.geometry.longitude),P.geometry.latitude<B&&(B=P.geometry.latitude),P.geometry.latitude>M&&(M=P.geometry.latitude))}}else if("polyline"==this.layer.geometryType||"polygon"==this.layer.geometryType){var E=m[0].geometry.extent;V=E.xmin;D=E.xmax;B=E.ymin;M=E.ymax;for(S=1;S<w;S++)P=
m[S],null!=P.geometry&&null!=P.geometry.extent&&(E=P.geometry.extent,E.xmin<V&&(V=E.xmin),E.xmax>D&&(D=E.xmax),E.ymin<B&&(B=E.ymin),E.ymax>M&&(M=E.ymax))}return this._minDelta=6937.5*Math.min(D-V,M-B),new f(V,B,D,M,this._fx3dSpatialReference)}return null},_getGeomZFromPolyline:function(m,w){return k.set(r,m[0],m[1],m[2]||1),z.wgs84ToSphericalEngineCoords(r,0,r,0),k.set(g,w[0],w[1],w[2]||1),z.wgs84ToSphericalEngineCoords(g,0,g,0),k.subtract(x,r,g),k.add(p,r,g),k.scale(p,p,.5),k.length(p)+.6*k.length(x)-
6378137},_calculatePerfectPosition:function(m){var w={};if(null==m||null==m.geometry)return console.warn("Feature or geometry is invalid."),w;var D,M,S,V=m.geometry;if("point"===this.layer.geometryType)w.x=V.longitude,w.y=V.latitude,V=this.layer._labelDefaultHeight,w.z=5E3,V&&this.layer._currentVizFieldMinMax&&(S=this.layer._currentVizFieldMinMax.max-this.layer._currentVizFieldMinMax.min,isNaN(S)||"number"==typeof this.layer._currentVizPage&&(D=this.layer.vizFields[this.layer._currentVizPage],M=m.attributes[D],
null!=M&&(0===V.flag?(w.z+=V.max,0!=S?w.z*=(M-this.layer._currentVizFieldMinMax.min)/S:w.z=V.min):1===V.flag&&(V.max===V.min?w.z+=V.max:0!=S?w.z+=1.2*(V.min+(V.max-V.min)*(M-this.layer._currentVizFieldMinMax.min)/S):0!=this.layer._currentVizFieldMinMax.max?w.z+=V.max:w.z=V.min))));else if("polyline"===this.layer.geometryType){if(null==V.paths)return console.warn("Paths of feature is invalid."),w;m=V.paths[0];D=m.length;w.x=(m[0][0]+m[D-1][0])/2;w.y=(m[0][1]+m[D-1][1])/2;w.z=1.1*this._getGeomZFromPolyline(m[0],
m[D-1])}else if("polygon"===this.layer.geometryType){if(null==V.rings)return console.warn("Rings of feature is invalid."),w;S=q.polygonCentroid({rings:V.rings,hasZ:!1});if(isNaN(S[0])||isNaN(S[1]))return null;w.x=S[0];w.y=S[1];V=this.layer._labelDefaultHeight;w.z=10;S=this.layer._currentVizFieldMinMax.max-this.layer._currentVizFieldMinMax.min;isNaN(S)||(D=this.layer.vizFields[this.layer._currentVizPage],M=m.attributes[D],null!=M&&(0===V.flag?(w.z+=V.max,0!=S?w.z*=(M-this.layer._currentVizFieldMinMax.min)/
S:w.z=V.min):1===V.flag&&(V.max===V.min?w.z+=V.max:0!=S?w.z+=1.3*(V.min+(V.max-V.min)*(M-this.layer._currentVizFieldMinMax.min)/S):0!=this.layer._currentVizFieldMinMax.max?w.z+=V.max:w.z=V.min)))}return isNaN(w.z)&&(w.z=null),w},_calculatePerfectHeight:function(){var m=this.layer._labelDefaultHeight,w=10;this.layer._currentVizFieldMinMax.max==this.layer._currentVizFieldMinMax.min&&0==this.layer._currentVizFieldMinMax.max?w=m&&m.min||1E3:m&&(0===m.flag?w+=m.max:1===m.flag&&(w+=m.max===m.min?m.max:
1.2*(m.min+(m.max-m.min))));m=Math.abs(w)/111E3;return"local"==this.view.viewModel&&(m=Math.abs(w)/235596.8),10<m&&(m=10),{z:w,lonD:m}},_onShowFeatureLabel:function(m){if(this.layer._labelsLayer&&this.layer._labelsLayer.visible){if(this._selectedFeature=null,m.feature){if(null==m.feature.geometry)return void console.warn("The feature with FID has no geometry content.");this.layer._labelsLayer.removeAll();var w=this._calculatePerfectPosition(m.feature);if(null==w.x||null==w.y)return;null==w.z?w.z=
10:w.z+=1E3;var D=z.createTextTexture(""+m.feature.attributes[this.layer.displayField],14,"#ffffff","center","Arial","rgba(0,0,0,0.5)");D=new K({url:D.toDataURL(),width:D.width,height:D.height,contentType:"image/png"});var M=new c(w.x,w.y,w.z,this._fx3dSpatialReference);D=new H(M,D,m.feature.attributes,this.layer.popupTemplate);this.layer._labelsLayer.add(D);D=Math.abs(w.z)/111E3;M=Math.abs(w.z)/(111E3*Math.cos(w.y*Math.PI/180));"local"==this.view.viewModel&&(D=Math.abs(w.z)/111319.5,M=Math.abs(w.z)/
235596.8);10<M&&(M=10);20<D&&(D=20);D=new f(w.x-D,w.y-M,w.x+D,w.y+M,this._fx3dSpatialReference);this._fixCameraPosition(w,D);this._animateTo(D)}else this.layer._labelsLayer.removeAll();this._selectedFeature=m.feature}},_updateSelectedFeatureLabel:function(){if(this.layer._labelsLayer){var m=0<this.layer._labelsLayer.graphics.toArray().length;this.layer._labelsLayer.removeAll();m&&this._selectedFeature&&this._onShowFeatureLabel({feature:this._selectedFeature})}},_viewClicked:function(m){if(m.graphic)if(this.layer._labelsLayer&&
m.graphic.layer===this.layer._labelsLayer)0==this.layer._labelsLayer.graphics.length&&this._onShowFeatureLabel({feature:m.graphic});else{if(m.graphic.layer===this.layer&&this.view&&this.view.popup.viewModel&&this.view.popup.viewModel.selectedFeature){m=this.view.popup.viewModel.selectedFeature;var w=new H({attributes:b.clone(m.attributes),geometry:m.geometry&&m.geometry.clone()||null,popupTemplate:m.popupTemplate||null,symbol:m.symbol||null,visible:m.visible});null!=w&&(this._onShowFeatureLabel({feature:w}),
this.layer.emit("selected-feature-from-globe",{selectedFeature:w}),this.view.popup.viewModel._set("selectedFeature",null))}}else if(this.layer&&this.layer._labelsLayer&&0<this.layer._labelsLayer.graphics.length&&(this.layer._labelsLayer.removeAll(),this._selectedFeature=null,this.layer.emit("abandon-selected-feature"),this.view&&this.view.popup.viewModel&&this.view.popup.viewModel._set("selectedFeature",null)),this.view&&this.view.popup.viewModel&&this.view.popup.viewModel.selectedFeature)try{this.view.popup.viewModel.selectedFeature.symbol=
null,this.view.popup.viewModel.selectedFeature.popupTemplate=null,w=this.view.popup.viewModel.selectedFeature.clone(),this._onShowFeatureLabel({feature:w}),this.layer.emit("selected-feature-from-globe",{selectedFeature:w})}finally{this.view.popup.viewModel._set("selectedFeature",null)}},_fixCameraPosition:function(m,w){var D=m.z;1E4<=D&&(D=1E3);m=m.z;1E4<=m&&(w.center.z=1E3);m=z.clamp(m,1E3,1E4);w.zmin=D;w.zmax=m},_animateTo:function(m,w,D){this.view&&this.view.goTo({target:m,heading:this.view.camera.heading,
tilt:this.view.camera.tilt})},_initGraphicsController:function(m){if(this._layerId=this.layer.id,this._layerVizType=this.layer.vizType,n.addEffect(this.layer,m)){var w=this.view.map.layers.find(function(S){return S.url===this.layer.url&&"esri.layers.FeatureLayer"===S.declaredClass&&"Feature Layer"===S.type&&!0===S.loaded}.bind(this)),D=this;m=function(){var S=F.ofType(H);S={layer:D.layer,layerView:D,graphics:new S};D.controller=new e(S);t.whenOnce(b.hitch(this,function(){return!0===D.view.basemapTerrain.ready})).then(b.hitch(this,
function(){D.controller.when().then(function(){var V=null;D.loadedGraphics=D.controller.graphics;D._graphicsCollectionEventHandle=D.loadedGraphics.on("change",D._collectionChangeHandler.bind(D));0<D.loadedGraphics.length&&(V=D.loadedGraphics.toArray(),D._add([].concat(V)));D._graphicsControllerEventHandles.push(D.controller.on("query-end",function(){D._graphicsLoading=!1}));D.controller.startup()},function(V){console.log(V)})}))};if(w){var M=this.view.layerViews.find(function(S){return S.layer.url===
w.url&&S.layer.id===w.id}.bind(this));M?(w.source&&this.layer._initLayerProperties(w.source),this.loadedGraphics=M.loadedGraphics,0<this.loadedGraphics.length&&this._add([].concat(this.loadedGraphics.toArray())),this.layer.emit("all-features-loaded",{graphics:[].concat(this.loadedGraphics.toArray())})):m()}else m()}},_collectionChangeHandler:function(m){this._add([].concat(m.added));this._remove([].concat(m.removed))},_add:function(m){function w(M){var S,V;M=[].concat(M);a.forEach(M,function(B){if(S=
B.geometry)if("point"==D.layer.geometryType)v.projectXYZToVector(S.x,S.y,S.z,S.spatialReference,J,D._fx3dSpatialReference),S.longitude=J[0],S.latitude=J[1],S.altitude=isNaN(J[2])?null:J[2];else{if("polyline"==D.layer.geometryType||"polygon"==D.layer.geometryType)for(V=S.paths||S.rings,B=0;B<V.length;B++)for(var P=0;P<V[B].length;P++)v.projectXYZToVector(V[B][P][0],V[B][P][1],V[B][P][2],S.spatialReference,J,D._fx3dSpatialReference),V[B][P][0]=J[0],V[B][P][1]=J[1],V[B][P][2]=isNaN(J[2])?null:J[2]}else console.warn("No geometry information found in feature: "+
B.attributes.FID)});D.layer.emit("fx3d-add-graphics",{graphics:M});D._graphicsLoading||(D.layer.on("can-locating-now",function(){var B=D._calculateExtentCenter(D.getLoadedGraphics());if(B){var P=D._calculatePerfectHeight();B.zmax=P.z;B.zmin=P.z-1;B.xmax+=2+P.lonD;B.xmin-=2+P.lonD;B.ymax+=1+P.lonD;B.ymin-=1+P.lonD;D._animateTo(B)}}),D.layer.emit("all-features-loaded",{graphics:D.getLoadedGraphics()}))}if(b.isArray(m)&&0<m.length){var D=this;this.isResolved()?w(m):this.when().then(function(){w(m)})}},
_remove:function(m){b.isArray(m)&&0<m.length}})})},"fx3d/views/3d/layers/SnapshotController":function(){define("esri/config esri/core/Accessor esri/core/Error esri/core/Evented esri/core/Handles esri/core/Logger esri/core/Promise esri/core/promiseUtils esri/geometry/support/WKIDUnitConversion ./GraphicsManager ./Graphics3DVerticalScale".split(" "),function(b,a,d,e,c,f,h,v,G,k,y){function t(n){var A,z;if(n&&("object"==typeof n?(A=n.wkid,z=n.wkt):"number"==typeof n?A=n:"string"==typeof n&&(z=n)),A)var J=
q.values[q[A]];else z&&-1!==z.search(/^PROJCS/i)&&(n=K.exec(z))&&n[1]&&(J=parseFloat(n[1].split(",")[1]));return J}var F=f.getLogger("esri.layers.graphics.controllers.SnapshotController"),H=6378137*Math.PI/180,K=/UNIT\[([^\]]+)\]\]$/i,q=G;return h.EsriPromiseMixin(e.EventedMixin(a)).createSubclass({declaredClass:"esri.layers.graphics.controllers.SnapshotController",constructor:function(n){return this.type="snapshot",this._gManager=null,this._verticalScale=null,this._handles=new c,this._source=null,
this._started=!1,this._pendingQueries=new Map,this.extent=null,this.hasAllFeatures=!1,this.hasFeatures=!1,this.layer=null,this.layerView=null,this.maxPageSize=null,this.defaultReturnZ=void 0,this.defaultReturnM=void 0,this.pageSize=null,this.paginationEnabled=!1,this._cancelErrorMsg="SnapshotController: query cancelled",this._featureResolution={value:.25,scale:945},this._maxFeatures={point:16E3,multipoint:8E3,polyline:4E3,polygon:4E3,multipatch:4E3},this.layer=n.layer,this.layerView=n.layerView,this.maxPageSize=
n.maxPageSize,this.graphics=n.graphics,this},initialize:function(){var n=this,A=this.layer.when(function(){return n._verifyCapabilities()}).then(function(){return n._init()});this.addResolvingPromise(A)},destroy:function(){this.cancelQuery();this._gManager&&(this._gManager.destroy(),this._gManager=null);this._handles.destroy();this._pendingQueries=this._handles=null},properties:{updating:{value:null,dependsOn:["_pendingQueries"],get:function(){return!!(this._pendingQueries&&0<this._pendingQueries.size)}},
graphics:{value:null,set:function(n){var A=this._get("graphics");A!==n&&(this._handles.remove("graphics"),n&&(this._collectionChanged({added:n.toArray(),removed:A&&A.toArray()}),this._handles.add(n.on("change",this._collectionChanged.bind(this)),"graphics")),this._set("graphics",n))}}},cancelQuery:function(){var n=this;this._pendingQueries&&(this._pendingQueries.forEach(function(A,z){A.isFulfilled()||A.cancel(Error(n._cancelErrorMsg))}),this._pendingQueries.clear(),this.notifyChange("updating"))},
refresh:function(){this.isResolved()&&this._started&&this._queryFeatures()},startup:function(){this._started||(this._started=!0,this._resolutionParams=this._getResolutionParams(),this._queryFeatures())},update:function(){this.startup()},_init:function(){var n=this.layer;this.paginationEnabled=!!n.get("capabilities.query.supportsPagination");this._source=n.source;var A=n.maxRecordCount||4E3;this.pageSize=null==this.maxPageSize?A:Math.min(A,this.maxPageSize);this._gManager=new k({graphics:this.graphics,
objectIdField:n.objectIdField});this._verticalScale=new y({sourceSpatialReference:n.spatialReference,destSpatialReference:this.layerView.view.spatialReference});this._setupStateWatchers()},_getResolutionParams:function(){var n=this.layer,A=n.get("capabilities.query.supportsQuantization");if("polyline"===n.geometryType||"polygon"===n.geometryType){var z=t(this.layerView.view.spatialReference);if(null!=z){var J=this._featureResolution.scale;z=this._featureResolution.value/z;if(n.maxScale)var r=n.maxScale;
else if(n.minScale)r=Math.min(J,n.minScale);else{r=Math;var g=r.min,p=this.layerView.view,x=n.fullExtent||p.extent;p=p.width;var m=t(x&&x.spatialReference);r=g.call(r,J,x&&p?x.width/p*(m||H)*39.37*b.screenDPI:0)}r*=z/this._featureResolution.scale}}return r?{maxAllowableOffset:A?null:r,quantizationParameters:A?{mode:"view",originPosition:"upperLeft",tolerance:r,extent:n.fullExtent}:null}:null},_setupStateWatchers:function(){var n=this;this._handles.add([this.watch("extent",this.refresh.bind(this)),
this.layer.watch("outFields",function(A,z){A&&z?-1===z.indexOf("*")&&(A.sort(),z.sort(),JSON.stringify(A)!==JSON.stringify(z)&&n.refresh()):n.refresh()}),this.layer.watch("definitionExpression, historicMoment",this.refresh.bind(this)),this.layer.on("edits",this._editsHandler.bind(this))])},_createQueryParams:function(){var n=this.layer,A=this.layerView,z=n.createQuery();z.outSpatialReference=A.view.spatialReference;z.geometry=this.extent;n=n.capabilities&&n.capabilities.data;return n&&n.supportsZ&&
null==z.returnZ&&null!=this.defaultReturnZ&&(z.returnZ=this.defaultReturnZ),n&&n.supportsM&&null==z.returnM&&null!=this.defaultReturnM&&(z.returnM=this.defaultReturnM),z.set(this._resolutionParams),this.paginationEnabled&&(z.start=0,z.num=this.pageSize),z},_queryFeatures:function(){this.cancelQuery();this.hasAllFeatures=this.hasFeatures=!1;this._gManager.beginPagedUpdate();this.emit("query-start");this._executeQuery(this._createQueryParams())},_executeQuery:function(n){var A=this,z=this._source.queryFeatures(n),
J=this._gManager.createIntentToAdd();this._querySetup(J,z);z.then(this._processFeatureSet.bind(this,n,J))["catch"](function(r){return A._queryError(J,r)}).then(function(){return A._queryTeardown(J)},function(){return A._queryTeardown(J)})},_hydrate:function(n,A,z){if(n){var J=n.translate[0],r=n.translate[1],g=n.scale[0],p=n.scale[1],x=function(m,w,D){return"esriGeometryPoint"===m?function(M){M.x=w(M.x);M.y=D(M.y)}:"polyline"===m||"polygon"===m?function(M){var S,V,B,P,E=M.rings||M.paths;M=0;for(S=
E.length;M<S;M++){var l=E[M];var C=0;for(V=l.length;C<V;C++){var Q=l[C];0<C?(B+=Q[0],P+=Q[1]):(B=Q[0],P=Q[1]);Q[0]=w(B);Q[1]=D(P)}}}:"extent"===m?function(M){M.xmin=w(M.xmin);M.ymin=D(M.ymin);M.xmax=w(M.xmax);M.ymax=D(M.ymax)}:"multipoint"===m?function(M){var S,V,B,P=M.points;M=0;for(S=P.length;M<S;M++){var E=P[M];0<M?(V+=E[0],B+=E[1]):(V=E[0],B=E[1]);E[0]=w(V);E[1]=D(B)}}:void 0}(A,function(m){return m*g+J},function(m){return r-m*p});n=0;for(A=z.length;n<A;n++)z[n].geometry&&x(z[n].geometry)}},_processFeatureSet:function(n,
A,z){z.transform&&this._hydrate(z.transform,z.geometryType,z.features);var J=z.exceededTransferLimit,r=z.features,g=this._maxFeatures[this.layer.geometryType]||0,p=r?r.length:0,x=this._gManager.numGraphics+p,m=x>=g;m&&(F.warn('Feature limit exceeded on layer "',this.layer.title,'". Not all features are shown.'),(g=x-g)&&r.splice(p-g,g));n=!(!J||!this.paginationEnabled||m)&&this._queryNextPage(n);return this._verticalScale.adjust(r),r&&this._gManager.addPage(r,A),this.hasFeatures=!0,n||(this._gManager.endPagedUpdate(),
this.hasAllFeatures=!J,this.emit("query-end",{success:!0})),z},_queryNextPage:function(n){return n.start+=this.pageSize,this._executeQuery(n),!0},_queryError:function(n,A){if(A&&"cancel"===A.dojoType&&!this.hasFeatures?this._gManager.revertPagedUpdate():this._gManager.endPagedUpdate(),this.emit("query-end",{success:!1}),A&&"cancel"===A.dojoType)return v.reject(A);n=new d("snapshotcontroller:tile-request-failed","Failed to query for features",{error:A});return F.error(n),v.reject(n)},_querySetup:function(n,
A){this._pendingQueries.set(n,A);this.notifyChange("updating")},_queryTeardown:function(n){this._gManager.removeIntent(n);this._pendingQueries["delete"](n);this.notifyChange("updating")},_processRefetch:function(n,A){(A=A.features)&&this._gManager.add(A,n)},_refetchError:function(n,A){},_verifyCapabilities:function(){if(!this.layer.get("capabilities.operations.supportsQuery"))throw new d("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",
{layer:this.layer});},_collectionChanged:function(n){var A=n.added;if(A)for(var z=0;z<A.length;z++)A[z].layer=this.layer,A[z].sourceLayer=this.layer;if(A=n.removed)for(z=0;z<A.length;z++)A[z].layer=null,A[z].sourceLayer=null},_editsHandler:function(n){var A=this,z=function(g){return g.objectId},J=n.deletedFeatures.map(z);this._gManager["delete"](J);n=n.addedFeatures.concat(n.updatedFeatures).map(z);if(n.length){z=this._createQueryParams();z.objectIds=n;z=this._source.queryFeatures(z);var r=this._gManager.createIntentToAdd(n);
this._querySetup(r,z);z.then(this._processRefetch.bind(this,r))["catch"](this._refetchError.bind(this,r)).then(function(){return A._queryTeardown(r)},function(){return A._queryTeardown(r)})}}})})},"fx3d/views/3d/layers/GraphicsManager":function(){define(["esri/core/Accessor"],function(b){var a=0;return b.createSubclass({constructor:function(){this._deletedGraphicsIndex=new Set;this._intentsIndex=new Map},destroy:function(){this.removeAll();this._intentsIndex=this._deletedGraphicsIndex=null},properties:{graphics:null,
indexById:{value:null,dependsOn:["graphics","objectIdField"],get:function(){return this._createIndexById(this.graphics&&this.graphics.toArray(),this.objectIdField)}},numGraphics:{value:0,dependsOn:["indexById"],get:function(){return this.indexById?this.indexById.size:0}},objectIdField:null,updating:{value:!1,dependsOn:["_intentsIndex"],get:function(){return!!(this._intentsIndex&&0<this._intentsIndex.size)}},_intentsIndex:{value:null}},_oldIndex:null,_deletedGraphicsIndex:null,beginPagedUpdate:function(){this._oldIndex=
this.indexById;this.indexById=null;this.notifyChange("numGraphics")},addPage:function(d,e){this.add(d,e)},revertPagedUpdate:function(){var d=this._removeLeftOnly(this.indexById,this._oldIndex);this.indexById=this._oldIndex;this._oldIndex=null;this.graphics.removeMany(d);this.notifyChange("numGraphics")},endPagedUpdate:function(){var d=this._removeLeftOnly(this._oldIndex,this.indexById);this._oldIndex=null;this.graphics.removeMany(d);this.notifyChange("numGraphics")},findGraphic:function(d){return(d=
this.indexById&&this.indexById.get(d))&&d.graphic},removeAll:function(){this.indexById=this._oldIndex=null;this.graphics.removeAll();this.notifyChange("numGraphics")},add:function(d,e){if(d&&d.length){var c=this.objectIdField,f=this.indexById=this.indexById||new Map,h=this._oldIndex,v=this._createIndexById(d,c);v=this._extractObjectIds(v);f=this._extractObjectIds(f);h=this._extractObjectIds(h);f=f.concat(h);var G=[],k=f.length;for(h=0;h<k;h++){var y=f[h];-1<v.indexOf(y)&&G.push(y)}G.length&&this._remove(G,
!1);e=this.findIntent(e);v=new Map;f=d.length;for(h=0;h<f;h++)(G=d[h])&&G.attributes&&v.set(G.attributes[c],e);d.length&&this._add(d,v)}},remove:function(d){this._remove(d,!1)},"delete":function(d){this._remove(d,!0)},isDeleted:function(d){return this._deletedGraphicsIndex.has(d)},createIntentToAdd:function(d){d&&this._intentsIndex.forEach(function(c,f){d.forEach(function(h){c.ignoredIds.add(h)})},this);var e=a++;return this._intentsIndex.set(e,{ignoredIds:new Set}),this.notifyChange("updating"),
e},findIntent:function(d){return this._intentsIndex.get(d)},removeIntent:function(d){this._intentsIndex["delete"](d);this.notifyChange("updating")},update:function(d,e){if(d&&d.length){var c=this.objectIdField,f=this.indexById=this.indexById||new Map,h=this._oldIndex;d=this._createIndexById(d,c);c=this._extractObjectIds(d);var v=this._extractObjectIds(f),G=this._extractObjectIds(h);v=v.concat(G);G=[];for(var k=v.length,y=0;y<k;y++){var t=v[y];if(-1===c.indexOf(t))G.push(t);else{var F=f.get(t)||h.get(t);
F=F&&F.graphic&&F.graphic._ts;var H=d.get(t);(H&&H.graphic&&H.graphic._ts)>F&&G.push(t)}}f=[];h=c.length;for(y=0;y<h;y++)t=c[y],(-1===v.indexOf(t)||-1<G.indexOf(t))&&f.push(t);G.length&&this._remove(G,!1);f.length&&this._add(this._extractGraphics(f,d),e)}},_createIndexById:function(d,e){if(d&&d.length&&e){var c,f;var h=new Map;for(c=0;f=d[c];c++){var v=f.attributes&&f.attributes[e];null!=v&&h.set(v,{graphic:f,refCount:1})}}return h},_add:function(d,e){var c=this.objectIdField;d.forEach(function(f){var h=
e.get(f.attributes&&f.attributes[c]);this._addToIndex(f,this.indexById,h)},this);this.graphics.addMany(d);this.notifyChange("numGraphics")},_addToIndex:function(d,e,c){var f=d.attributes&&d.attributes[this.objectIdField];e&&null!=f&&(e.has(f)?c&&c.ignoredIds.has(f)||(c=e.get(f),e.set(f,{graphic:d,refCount:c.refCount+1})):this.isDeleted(f)||e.set(f,{graphic:d,refCount:1}))},_remove:function(d,e){d=d||[];d="object"==typeof d[0]?d.map(function(h){return h.attributes&&h.attributes[this.objectIdField]}.bind(this)):
d;var c=this._extractGraphics(d,this._oldIndex),f=this._extractGraphics(d,this.indexById);d.forEach(function(h){e&&this._deletedGraphicsIndex.add(h);this._removeFromIndex(h,this._oldIndex,e);this._removeFromIndex(h,this.indexById,e)}.bind(this));this.graphics.removeMany(c.concat(f));this.notifyChange("numGraphics")},_removeFromIndex:function(d,e,c){if(e&&e.has(d))if(c)e["delete"](d);else{c=e.get(d);var f=c.refCount-1;0===f?e["delete"](d):c.refCount=f}},_removeLeftOnly:function(d,e){var c=[];return d&&
d.forEach(function(f,h){var v=f.graphic;!v||e&&e.has(h)||(--f.refCount,0===f.refCount&&d["delete"](h),c.push(v))}),c},_extractGraphics:function(d,e){return d&&e?d.map(function(c){return(c=e.get(c))&&c.graphic}):[]},_extractObjectIds:function(d){var e=[];return d&&d.forEach(function(c,f){e.push(f)}),e}})})},"fx3d/views/3d/layers/Graphics3DVerticalScale":function(){define(["esri/core/Accessor","esri/core/maybe","esri/core/unitUtils"],function(b,a,d){return b.createSubclass({constructor:function(e){this.sourceSpatialReference=
e.sourceSpatialReference;this.destSpatialReference=e.destSpatialReference},adjust:function(e){var c=this._getVerticalUnitScale();1!==c&&this._scaleVerticalUnits(e,c)},_getVerticalUnitScale:function(){if(this.sourceSpatialReference&&!this.sourceSpatialReference.equals(this.destSpatialReference)){var e=d.getMetersPerVerticalUnitForSR(this.sourceSpatialReference),c=d.getMetersPerVerticalUnitForSR(this.destSpatialReference);return e/c}return 1},_vertexListsScaleZ:function(e,c){for(var f=0;f<e.length;++f)for(var h=
e[f],v=0;v<h.length;++v)h[v][2]*=c},_scaleVerticalUnits:function(e,c){for(var f=0;f<e.length;++f){var h=e[f].geometry;!a.isNone(h)&&h.hasZ&&(this._geometryIsPoint(h)?null!==h.z&&(h.z*=c):this._geometryIsPolyline(h)?this._vertexListsScaleZ(h.paths,c):this._geometryIsPolygon(h)&&this._vertexListsScaleZ(h.rings,c))}},_geometryIsPoint:function(e){return"point"===e.type},_geometryIsPolygon:function(e){return"polygon"===e.type},_geometryIsPolyline:function(e){return"polyline"===e.type}})})},"fx3d/views/3d/effects/FxEffectRendererManager":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare esri/core/scheduling esri/core/reactiveUtils ../webgl-engine-extensions/ShaderSnippets esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/mat4f64 esri/core/libs/gl-matrix-2/vec3 esri/core/libs/gl-matrix-2/mat4 esri/views/3d/externalRenderers esri/layers/GraphicsLayer ./Effect ../support/fx3dUtils dojo/text!./CommonShaders.xml".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K){var q=v.mat4f64;k=k.mat4;var n=h.vec3f64,A=d(null,{declaredClass:"esri.views.3d.effects.FxEffectRendererManager",constructor:function(){this._sceneView=null;this._ready=!1;this._effects=[];this._shaderSnippets=this._fx3dFrameTask=null;this._normalMatrix=q.create();this._viewDirection=n.create();this._shaderSnippets||(this._shaderSnippets=new f,this._shaderSnippets._parse(K))},_init:function(J){return b.isObject(J)?(this._sceneView=J,this._vaoExt=this._sceneView._stage.renderView._rctx._capabilities.vao,
void(this._ready||this._sceneView.when(b.hitch(this,function(){this._viewReadyHandler()})))):void console.error("FxEffectRendererManager: no sceneView")},_viewReadyHandler:function(){this._sceneView&&(this._labelsLayer=new t({id:"-labelinfo-layer",listMode:"hide"}),this._sceneView.map.add(this._labelsLayer))},setup:function(J){this.context={};this.context.gl=J.gl;this.context.rctx=J.rctx;this._gl=this.context.gl;this._gl.getExtension("OES_texture_float");this._gl.getExtension("OES_texture_float_linear");
this._effects.forEach(function(r){r.effect.setupEffect({gl:this._gl,vaoExt:this._vaoExt,shaderSnippets:this._shaderSnippets})}.bind(this));J.resetWebGLState()},_updateContext:function(J){var r={};r.direction=J.sunLight.direction;r.ambient=J.sunLight.ambient.color;r.diffuse=J.sunLight.diffuse.color;r.specular=[.2,.2,.2,.2];r.ambient[3]=J.sunLight.ambient.intensity;r.diffuse[3]=J.sunLight.diffuse.intensity;this.context.lightingData=r;k.copy(this._normalMatrix,J.camera.viewInverseTransposeMatrix);this._normalMatrix[3]=
this._normalMatrix[7]=this._normalMatrix[11]=0},render:function(J){J.gl.enable(J.gl.DEPTH_TEST);J.gl.disable(J.gl.CULL_FACE);J.gl.disable(J.gl.BLEND);this._updateContext(J);_context=J;this._effects.forEach(function(r){r.effect.update();r.effect.render({zoom:this._sceneView.zoom,proj:_context.camera.projectionMatrix,view:_context.camera.viewMatrix,viewInvTransp:_context.camera.viewInverseTransposeMatrix,normalMat:this._normalMatrix,camPos:_context.camera.eye,lightingData:this.context.lightingData,
viewport:_context.camera.viewport},_context.rctx)}.bind(this));y.requestRender(this._sceneView);J.resetWebGLState()},dispose:function(){},addEffect:function(J,r){if(b.isObject(J)&&r instanceof F){if(0<a.filter(this._effects,function(g){return g.id===J.id&&g.effect.effectName==r.effectName}).length)return console.warn("Layer "+J.id+" in "+r.effectName+" effect has already existed."),!1;if(b.isObject(r))return J.emit("hide-feature-label"),this._labelsLayer.id=J.id+this._labelsLayer.id,J._labelsLayer=
this._labelsLayer,this._labelsLayer.visible=J.visible,J.watch("visible",function(g,p,x){this._labelsLayer&&(J.emit("hide-feature-label"),this._labelsLayer.set("visible",!!g))}.bind(this)),this._effects.push({id:J.id,effect:r}),r.initEffect({}),!0}return!1},_remove:function(J,r){if(J&&r){var g=-1,p=a.filter(this._effects,function(x,m){return x.id===r&&J==x.effect.effectName&&(g=m,!0)});0<p.length&&-1<g&&(p[0].effect.destroy(),this._effects.splice(g,1));0===this._effects.length&&(this._ready=!1,this._labelsLayer&&
(this._labelsLayer.removeAll(),this._sceneView.map.remove(this._labelsLayer)))}}}),z=null;return A.init=function(J){z||(z=new A);z._init(J)},A.addEffect=function(J,r){if(z){var g=z._sceneView;return this._eventHandler=J.on("effect-ok-test",function(p){y.add(g,z)}.bind(this)),z.addEffect(J,r)}return!1},A.run=function(J,r){return!!z&&z._prepare(J,r)},A.destroy=function(J,r){if(z){var g=z._sceneView;z._remove(J,r);y.remove(g,z)}},A.pause=function(){z&&z._fx3dFrameTask&&z._fx3dFrameTask.pause()},A})},
"fx3d/views/3d/webgl-engine-extensions/ShaderSnippets":function(){define(["dojo/_base/declare","dojox/xml/parser","esri/views/3d/webgl-engine/lib/Util","./constraints"],function(b,a,d,e){return b(null,{declaredClass:"esri.views.3d.webgl-engine-extensions.ShaderSnippets",constructor:function(c){var f=e.VertexAttrConstants,h;for(h in f)this[f[h]]=e.VertexAttrConstants[h];if(c)for(var v in c)this[v]=c[v]},_parse:function(c){c=a.parse(c).getElementsByTagName("snippet");for(var f=/\$[a-zA-Z0-9_]+[ \t]*/,
h=/[\$\s]+/g,v=0;v<c.length;v++){var G=c[v].getAttribute("name");d.assert(null==this[G]);for(var k=c[v].textContent;;){var y=k.match(f);if(null==y)break;var t=this[y[0].replace(h,"")];d.assert(void 0!==t);k=k.replace(y[0],t)}this[G]=k}}})})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(b){b.getObject("xml.parser",!0,dojox);dojox.xml.parser.parse=function(a,d){var e=b.doc;d=d||"text/xml";if(a&&b.trim(a)&&
"DOMParser"in b.global){var c=(new DOMParser).parseFromString(a,d);a=c.documentElement;if("parsererror"==a.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==a.namespaceURI){if(e=a.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0])e=e.firstChild.data;throw Error("Error parsing text "+a.firstChild.data+" \n"+e);}return c}if("ActiveXObject"in b.global){e=function(h){return"MSXML"+h+".DOMDocument"};e=["Microsoft.XMLDOM",e(6),e(4),e(3),e(2)];
b.some(e,function(h){try{c=new ActiveXObject(h)}catch(v){return!1}return!0});if(a&&c&&(c.async=!1,c.loadXML(a),a=c.parseError,0!==a.errorCode))throw Error("Line: "+a.line+"\nCol: "+a.linepos+"\nReason: "+a.reason+"\nError Code: "+a.errorCode+"\nSource: "+a.srcText);if(c)return c}else if(e.implementation&&e.implementation.createDocument){if(a&&b.trim(a)&&e.createElement){d=e.createElement("xml");d.innerHTML=a;var f=e.implementation.createDocument("foo","",null);b.forEach(d.childNodes,function(h){f.importNode(h,
!0)});return f}return e.implementation.createDocument("","",null)}return null};dojox.xml.parser.textContent=function(a,d){if(1<arguments.length)return dojox.xml.parser.replaceChildren(a,(a.ownerDocument||b.doc).createTextNode(d)),d;if(void 0!==a.textContent)return a.textContent;var e="";a&&b.forEach(a.childNodes,function(c){switch(c.nodeType){case 1:case 5:e+=dojox.xml.parser.textContent(c);break;case 3:case 2:case 4:e+=c.nodeValue}});return e};dojox.xml.parser.replaceChildren=function(a,d){var e=
[];b.isIE&&b.forEach(a.childNodes,function(c){e.push(c)});dojox.xml.parser.removeChildren(a);b.forEach(e,b.destroy);b.isArray(d)?b.forEach(d,function(c){a.appendChild(c)}):a.appendChild(d)};dojox.xml.parser.removeChildren=function(a){for(var d=a.childNodes.length;a.hasChildNodes();)a.removeChild(a.firstChild);return d};dojox.xml.parser.innerXML=function(a){return a.innerXML?a.innerXML:a.xml?a.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(a):null};return dojox.xml.parser})},
"esri/views/3d/webgl-engine/lib/Util":function(){define(["exports","../../../../chunks/vec2f64","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(b,a,d,e){function c(v,G){if(!v)throw G=G||"Assertion",new h(`${G} at ${Error(G).stack}`);}const f=e.create();class h{constructor(v){this.message=v}toString(){return`AssertException: ${this.message}`}}b.assert=c;b.isTranslationMatrix=function(v){return 1===v[0]&&0===v[1]&&0===v[2]&&0===v[3]&&0===v[4]&&1===v[5]&&0===v[6]&&0===v[7]&&0===v[8]&&
0===v[9]&&1===v[10]&&0===v[11]&&1===v[15]};b.logWithBase=function(v,G){return Math.log(v)/Math.log(G)};b.project=function(v,G,k,y,t){f[0]=v[0];f[1]=v[1];f[2]=v[2];f[3]=1;d.transformMat4(f,f,G);2<t.length&&(t[2]=-f[2]);d.transformMat4(f,f,k);c(0!==f[3]);t[0]=f[0]/f[3];t[1]=f[1]/f[3];t[2]=f[2]/f[3];t[0]=(.5*t[0]+.5)*y[2]+y[0];t[1]=(.5*t[1]+.5)*y[3]+y[1]};b.rayBoxTest=function(v,G,k,y){let t,F=(k[0]-v[0])/G[0],H=(y[0]-v[0])/G[0];F>H&&(t=F,F=H,H=t);let K=(k[1]-v[1])/G[1],q=(y[1]-v[1])/G[1];K>q&&(t=K,
K=q,q=t);if(F>q||K>H)return!1;K>F&&(F=K);q<H&&(H=q);k=(k[2]-v[2])/G[2];v=(y[2]-v[2])/G[2];k>v&&(t=k,k=v,v=t);if(F>v||k>H)return!1;v<H&&(H=v);return 0>H?!1:!0};b.rayRay2D=function(v,G,k,y,t,F=a.create()){const H=(y[t]-k[t])*(G[0]-v[0])-(y[0]-k[0])*(G[t]-v[t]);if(0===H)return!1;k=((y[0]-k[0])*(v[t]-k[t])-(y[t]-k[t])*(v[0]-k[0]))/H;F[0]=v[0]+k*(G[0]-v[0]);F[1]=v[t]+k*(G[t]-v[t]);return!0};b.setMatrixTranslation3=function(v,G,k,y){v[12]=G;v[13]=k;v[14]=y};b.verify=function(v,G){v||console.warn("Verify failed: "+
(G||"")+"\n"+Error("verify").stack)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec2f64":function(){define(["exports"],function(b){function a(){return[0,0]}function d(q){return[q[0],q[1]]}function e(q,n){return[q,n]}function c(q,n=[0,0]){const A=Math.min(2,q.length);for(let z=0;z<A;++z)n[z]=q[z];return n}function f(q,n){return new Float64Array(q,n,2)}function h(){return[0,0]}function v(){return[1,1]}function G(){return[1,0]}function k(){return[0,1]}const y=[0,0],
t=[1,1],F=[1,0],H=[0,1],K=Object.freeze(Object.defineProperty({__proto__:null,ONES:t,UNIT_X:F,UNIT_Y:H,ZEROS:y,clone:d,create:a,createView:f,fromArray:c,fromValues:e,ones:v,unitX:G,unitY:k,zeros:h},Symbol.toStringTag,{value:"Module"}));b.ONES=t;b.UNIT_X=F;b.UNIT_Y=H;b.ZEROS=y;b.clone=d;b.create=a;b.createView=f;b.fromArray=c;b.fromValues=e;b.ones=v;b.unitX=G;b.unitY=k;b.vec2f64=K;b.zeros=h})},"esri/views/3d/externalRenderers":function(){define("exports ../../core/deprecate ../../core/Logger ../../chunks/mat4f64 ../../geometry/projection/computeTranslationToOriginAndRotation ../../geometry/projection/projectBuffer ./externalRenderers/ExternalRendererStore".split(" "),
function(b,a,d,e,c,f,h){function v(K,q){H.add(K,q)}function G(K,q){H.remove(K,q)}function k(K){K._stage.renderView.requestRender()}function y(K,q,n,A,z,J,r){A=A||K.spatialReference;return f.projectBuffer(q,A,n,z,K.renderCoordsHelper.spatialReference,J,r)?z:null}function t(K,q,n,A,z,J,r){J=J||K.spatialReference;return f.projectBuffer(q,K.renderCoordsHelper.spatialReference,n,A,J,z,r)?A:null}function F(K,q,n,A){A||(A=e.create());n=n||K.spatialReference;return c.computeTranslationToOriginAndRotation(n,
q,A,K.renderCoordsHelper.spatialReference)?A:null}const H=new h.ExternalRendererStore;b.add=v;b.bind=function(K){return{add:v.bind(this,K),remove:G.bind(this,K),requestRender:k.bind(this,K),toRenderCoordinates:y.bind(this,K),fromRenderCoordinates:t.bind(this,K),renderCoordinateTransformAt:F.bind(this,K)}};b.forceWebGLContext=function(K){const q=d.getLogger("esri/views/3d/externalRenderers");a.deprecatedFunction(q,"forceWebGLContext",{moduleName:"esri/views/3d/externalRenderers",version:"4.27",see:"https://developers.arcgis.com/javascript/latest/system-requirements/"});
2!==K&&q.warn(`Requested context version '${K}' is not supported! Using a WebGL2 context.`)};b.fromRenderCoordinates=t;b.getRenderCamera=function(K){return K.state.camera.clone()};b.remove=G;b.renderCoordinateTransformAt=F;b.requestRender=k;b.toRenderCoordinates=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/computeTranslationToOriginAndRotation":function(){define("exports ../../core/mathUtils ../../chunks/mat4 ../../chunks/vec3f64 ./localRotationUtils ./projectors ../support/spatialReferenceUtils".split(" "),
function(b,a,d,e,c,f,h){function v(t){return t===f.ProjectionID.SPHERICAL_ECEF||t===f.ProjectionID.SPHERICAL_MARS_PCPF||t===f.ProjectionID.SPHERICAL_MOON_PCPF}const G=a.deg2rad(1),k=e.create(),y=e.create();b.computeTranslationToOriginAndRotation=function(t,F,H,K){if(null==t||null==K)return!1;var q=f.classifySpatialReference(t,f.sourceClassificationCache),n=f.classifySpatialReference(K,f.destClassificationCache);if(q===n&&!v(n)&&(q!==f.ProjectionID.UNKNOWN||h.equals(t,K)))return d.fromTranslation(H,
F),!0;if(v(n)){q=f.projectionTable[q][f.ProjectionID.LON_LAT];n=f.projectionTable[f.ProjectionID.LON_LAT][n];if(null==q||null==n)return!1;q(F,0,k,0);n(k,0,y,0);c.computeENUToSphericalPCPFLocalRotation(G*k[0],G*k[1],H);H[12]=y[0];H[13]=y[1];H[14]=y[2];return!0}if((n===f.ProjectionID.WEB_MERCATOR||n===f.ProjectionID.PLATE_CARREE)&&(q===f.ProjectionID.WGS84||q===f.ProjectionID.CGCS2000&&n===f.ProjectionID.PLATE_CARREE||q===f.ProjectionID.SPHERICAL_ECEF||q===f.ProjectionID.WEB_MERCATOR)){t=f.projectionTable[q][f.ProjectionID.LON_LAT];
n=f.projectionTable[f.ProjectionID.LON_LAT][n];if(null==t||null==n)return!1;t(F,0,k,0);n(k,0,y,0);q===f.ProjectionID.SPHERICAL_ECEF?c.computeSphericalPCPFToENULocalRotation(G*k[0],G*k[1],H):d.identity(H);H[12]=y[0];H[13]=y[1];H[14]=y[2];return!0}return!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/projection/localRotationUtils":function(){define(["exports","../../chunks/mat4"],function(b,a){function d(e,c,f){const h=Math.sin(e);e=Math.cos(e);const v=Math.sin(c);
c=Math.cos(c);f[0]=-h;f[4]=-v*e;f[8]=c*e;f[12]=0;f[1]=e;f[5]=-v*h;f[9]=c*h;f[13]=0;f[2]=0;f[6]=c;f[10]=v;f[14]=0;f[3]=0;f[7]=0;f[11]=0;f[15]=1;return f}b.computeENUToSphericalPCPFLocalRotation=d;b.computeSphericalPCPFToENULocalRotation=function(e,c,f){d(e,c,f);a.transpose(f,f);return f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/externalRenderers/ExternalRendererStore":function(){define(["exports","../../../core/Collection","./StageRenderer"],function(b,a,d){class e{constructor(){this._renderers=
new a}add(c,f){let h=this._findStageRenderer(c);h||(h=new d.StageRenderer({view:c}),this._renderers.add(h));h.add(f)}remove(c,f){if(c=this._findStageRenderer(c))c.remove(f),0===c.renderers.length&&(c.destroy(),this._renderers.remove(c))}_findStageRenderer(c){return this._renderers.find(f=>f.view===c)}}b.ExternalRendererStore=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/externalRenderers/StageRenderer":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Collection ../../../core/Logger ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass ./RenderContext ../webgl-engine/core/shaderLibrary/ShaderOutput ../webgl-engine/effects/RenderPlugin ../webgl-engine/lib/RenderSlot".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H){function K(q,n,A){if("function"===typeof q[n]&&null!=A)q[n]?.(A)}b.StageRenderer=class extends F.SyncRenderPlugin{constructor(q){super(q);this.produces=new Map([[H.RenderSlot.OPAQUE_MATERIAL,()=>this.renderers.some(n=>"function"===typeof n.render)],[H.RenderSlot.TRANSPARENT_MATERIAL,()=>this.renderers.some(n=>"function"===typeof n.renderTransparent)]]);this.renderers=new d;this.context=null}initialize(){this.addHandles([c.watch(()=>this.view.ready,q=>{q?(this.context=
new y(this.view),this.view._stage.addRenderPlugin(this)):(this.renderers.forEach(n=>K(n,"dispose",this.context)),this.context=null)},c.initial)])}destroy(){this.renderers.drain(q=>{this.context&&K(q,"dispose",this.context)});this.view._stage?.removeRenderPlugin(this);this.context=null}add(q){this.renderers.includes(q)?e.getLogger("esri.views.3d.externalRenderers.ExternalRendererStore").warn("add(): Cannot add external renderer: renderer has already been added"):(this.renderers.add(q),this.context&&
(this._webglStateReset(),K(q,"setup",this.context),this.view._stage.renderView.requestRender()))}remove(q){const n=this.renderers.indexOf(q);-1!==n&&(this.renderers.removeAt(n),this.context&&(K(q,"dispose",this.context),this.view._stage.renderView.requestRender()))}initializeRenderContext(q){this.context.rctx=q.renderContext.rctx;0<this.renderers.length&&this._webglStateReset();this.renderers.forEach(n=>K(n,"setup",this.context))}uninitializeRenderContext(){}renderNode(q){if(0!==this.renderers.length&&
q.output===t.ShaderOutput.Color){var n=A=>{this._updateContext(q);this._webglStateReset();this.renderers.forEach(z=>K(z,A,this.context))};q.bindParameters.slot===H.RenderSlot.OPAQUE_MATERIAL?n("render"):n("renderTransparent")}}_updateContext(q){this.context.camera.copyFrom(q.bindParameters.camera);this.context.sunLight=q.bindParameters.lighting.legacy;this.context._renderTargetHelper=q.offscreenRenderingHelper}_webglStateReset(){this.context.rctx.resetState();this.context._renderTargetHelper?.bindFbo()}};
a.__decorate([f.property({constructOnly:!0})],b.StageRenderer.prototype,"view",void 0);b.StageRenderer=a.__decorate([k.subclass("esri.views.3d.externalRenderers.StageRenderer")],b.StageRenderer);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/externalRenderers/RenderContext":function(){define(["../webgl-engine/lib/Camera"],function(b){class a{get gl(){return this.rctx.gl}constructor(d){this.view=d;this.camera=new b.Camera;this._renderTargetHelper=null}resetWebGLState(){null!=
this.rctx&&(this.rctx.enforceState(),this._renderTargetHelper&&this._renderTargetHelper.bindFbo())}bindRenderTarget(){this._renderTargetHelper&&this._renderTargetHelper.framebuffer.initializeAndBind()}}return a})},"esri/views/3d/webgl-engine/lib/Camera":function(){define("exports ../../../../chunks/tslib.es6 ../../../../core/Accessor ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../core/accessorSupport/decorators/property ../../../../core/accessorSupport/ensureType ../../../../core/arrayUtils ../../../../core/has ../../../../core/accessorSupport/decorators/subclass ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec2 ../../../../chunks/vec2f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4 ../../../../chunks/vec4f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../geometry/support/vector ../../../ViewingMode ./fov".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K,q,n,A,z,J,r,g,p,x){var m;b.Camera=m=class extends d{constructor(B={}){super(B);this._center=n.create();this._up=n.create();this._viewUp=n.create();this._viewForward=n.create();this._viewRight=n.create();this._ray=r.create();this._viewport=z.fromValues(0,0,1,1);this._padding=z.fromValues(0,0,0,0);this._fov=55/180*Math.PI;this._nearFar=K.fromValues(1,1E3);this._viewDirty=!0;this._viewMatrix=F.create();this._viewProjectionDirty=!0;this._viewProjectionMatrix=F.create();
this._viewInverseTransposeMatrixDirty=!0;this._viewInverseTransposeMatrix=F.create();this._frustumDirty=!0;this._frustum=J.create();this._fullViewport=z.create();this._pixelRatio=1;this.relativeElevation=0}get pixelRatio(){return this._pixelRatio}set pixelRatio(B){this._pixelRatio=0<B?B:1}get eye(){return this._ray.origin}set eye(B){this._compareAndSetView(B,this._ray.origin)}get center(){return this._center}set center(B){this._compareAndSetView(B,this._center,"_center")}get ray(){q.subtract(this._ray.direction,
this.center,this.eye);return this._ray}get up(){return this._up}set up(B){this._compareAndSetView(B,this._up,"_up")}get viewMatrix(){this._ensureViewClean();return this._viewMatrix}set viewMatrix(B){t.copy(this._viewMatrix,B);this._viewDirty=!1;this._frustumDirty=this._viewProjectionDirty=this._viewInverseTransposeMatrixDirty=!0}get viewForward(){this._ensureViewClean();return this._viewForward}get viewUp(){this._ensureViewClean();return this._viewUp}get viewRight(){this._ensureViewClean();return this._viewRight}get nearFar(){return this._nearFar}get near(){return this._nearFar[0]}set near(B){this._nearFar[0]!==
B&&(this._nearFar[0]=B,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_nearFar"))}get far(){return this._nearFar[1]}set far(B){this._nearFar[1]!==B&&(this._nearFar[1]=B,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_nearFar"))}get viewport(){return this._viewport}set viewport(B){this.x=B[0];this.y=B[1];this.width=B[2];this.height=B[3]}get screenViewport(){if(1===this.pixelRatio)return this._viewport;const B=A.scale(z.create(),this._viewport,1/this.pixelRatio),
P=this._get("screenViewport");return P&&A.equals(B,P)?P:B}get screenPadding(){if(1===this.pixelRatio)return this._padding;const B=A.scale(z.create(),this._padding,1/this.pixelRatio),P=this._get("screenPadding");return P&&A.equals(B,P)?P:B}get x(){return this._viewport[0]}set x(B){B+=this._padding[b.PaddingSide.LEFT];this._viewport[0]!==B&&(this._viewport[0]=B,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get y(){return this._viewport[1]}set y(B){B+=this._padding[b.PaddingSide.BOTTOM];
this._viewport[1]!==B&&(this._viewport[1]=B,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get width(){return this._viewport[2]}set width(B){this._viewport[2]!==B&&(this._viewport[2]=B,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get height(){return this._viewport[3]}set height(B){this._viewport[3]!==B&&(this._viewport[3]=B,this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_viewport"))}get fullWidth(){return this._viewport[2]+
this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT]}set fullWidth(B){this.width=B-(this._padding[b.PaddingSide.RIGHT]+this._padding[b.PaddingSide.LEFT])}get fullHeight(){return this._viewport[3]+this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM]}set fullHeight(B){this.height=B-(this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM])}get fullViewport(){this._fullViewport[0]=this._viewport[0]-this._padding[b.PaddingSide.LEFT];this._fullViewport[1]=this._viewport[1]-
this._padding[b.PaddingSide.BOTTOM];this._fullViewport[2]=this.fullWidth;this._fullViewport[3]=this.fullHeight;return this._fullViewport}get _aspect(){return this.width/this.height}get padding(){return this._padding}set padding(B){A.exactEquals(this._padding,B)||(this._viewport[0]+=B[b.PaddingSide.LEFT]-this._padding[b.PaddingSide.LEFT],this._viewport[1]+=B[b.PaddingSide.BOTTOM]-this._padding[b.PaddingSide.BOTTOM],this._viewport[2]-=B[b.PaddingSide.RIGHT]+B[b.PaddingSide.LEFT]-(this._padding[b.PaddingSide.RIGHT]+
this._padding[b.PaddingSide.LEFT]),this._viewport[3]-=B[b.PaddingSide.TOP]+B[b.PaddingSide.BOTTOM]-(this._padding[b.PaddingSide.TOP]+this._padding[b.PaddingSide.BOTTOM]),A.copy(this._padding,B),this._frustumDirty=this._viewProjectionDirty=!0,this.notifyChange("_padding"),this.notifyChange("_viewport"))}get viewProjectionMatrix(){this._viewProjectionDirty&&(t.multiply(this._viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),this._viewProjectionDirty=!1);return this._viewProjectionMatrix}get projectionMatrix(){var B=
this.width,P=this.height;const E=this.near*Math.tan(this.fovY/2),l=E*this._aspect;B=t.frustum(F.create(),-l*(1+2*this._padding[b.PaddingSide.LEFT]/B),l*(1+2*this._padding[b.PaddingSide.RIGHT]/B),-E*(1+2*this._padding[b.PaddingSide.BOTTOM]/P),E*(1+2*this._padding[b.PaddingSide.TOP]/P),this.near,this.far);return(P=this._get("projectionMatrix"))&&t.equals(P,B)?P:B}get inverseProjectionMatrix(){return t.invert(F.create(),this.projectionMatrix)||this._get("inverseProjectionMatrix")||F.create()}get fov(){return this._fov}set fov(B){this._fov=
B;this._frustumDirty=this._viewProjectionDirty=!0}get fovX(){return x.fovd2fovx(this._fov,this.width,this.height)}set fovX(B){this._fov=x.fovx2fovd(B,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=!0}get fovY(){return x.fovd2fovy(this._fov,this.width,this.height)}set fovY(B){this._fov=x.fovy2fovd(B,this.width,this.height);this._frustumDirty=this._viewProjectionDirty=!0}get distance(){return q.distance(this.center,this.eye)}get frustum(){this._recomputeFrustum();return this._frustum}get viewInverseTransposeMatrix(){if(this._viewInverseTransposeMatrixDirty||
this._viewDirty)t.invert(this._viewInverseTransposeMatrix,this.viewMatrix),t.transpose(this._viewInverseTransposeMatrix,this._viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1;return this._viewInverseTransposeMatrix}depthNDCToWorld(B){return 2*this.near*this.far/(this.far+this.near-(2*B-1)*(this.far-this.near))}get perRenderPixelRatio(){return Math.tan(this.fovX/2)/(this.width/2)}get perScreenPixelRatio(){return this.perRenderPixelRatio*this.pixelRatio}get aboveGround(){return null!=
this.relativeElevation&&0<=this.relativeElevation}copyFrom(B){q.copy(this._ray.origin,B.eye);this.center=B.center;this.up=B.up;A.copy(this._viewport,B.viewport);this.notifyChange("_viewport");A.copy(this._padding,B.padding);this.notifyChange("_padding");H.copy(this._nearFar,B.nearFar);this.notifyChange("_nearFar");this._fov=B.fov;this.relativeElevation=B.relativeElevation;this._viewDirty=B._viewDirty;this._viewDirty||(t.copy(this._viewMatrix,B.viewMatrix),q.copy(this._viewRight,B.viewRight),q.copy(this._viewUp,
B.viewUp),q.copy(this._viewForward,B.viewForward));this._viewProjectionDirty=!0;this._frustumDirty=B._frustumDirty;this._frustumDirty||(J.copy(this._frustum,B.frustum),this._frustumDirty=!1);B._viewInverseTransposeMatrixDirty?this._viewInverseTransposeMatrixDirty=!0:(t.copy(this._viewInverseTransposeMatrix,B.viewInverseTransposeMatrix),this._viewInverseTransposeMatrixDirty=!1);A.copy(this._fullViewport,B.fullViewport);this.pixelRatio=B.pixelRatio;return this}copyViewFrom(B){this.eye=B.eye;this.center=
B.center;this.up=B.up}clone(){return(new m).copyFrom(this)}equals(B){return q.exactEquals(this.eye,B.eye)&&q.exactEquals(this.center,B.center)&&q.exactEquals(this.up,B.up)&&A.exactEquals(this._viewport,B.viewport)&&A.exactEquals(this._padding,B.padding)&&H.exactEquals(this.nearFar,B.nearFar)&&this._fov===B.fov&&this.pixelRatio===B.pixelRatio&&this.relativeElevation===B.relativeElevation}almostEquals(B){var P=Math.max(1,1/this.pixelRatio,1/B.pixelRatio);if(.001<=Math.abs(B.fov-this._fov)||A.squaredDistance(B.screenPadding,
this.screenPadding)>=P||A.squaredDistance(this.screenViewport,B.screenViewport)>=P)return!1;q.sub(M,B.eye,B.center);q.sub(S,this.eye,this.center);P=q.dot(M,S);const E=q.sqrLen(M),l=q.sqrLen(S);return P*P>=(1-1E-10)*E*l&&q.sqrDist(B.eye,this.eye)<2.5E-7*Math.max(E,l)}computeRenderPixelSizeAt(B){return this.computeRenderPixelSizeAtDist(this._viewDirectionDistance(B))}computeRenderPixelSizeAtDist(B){return B*this.perRenderPixelRatio}computeScreenPixelSizeAt(B){return this.computeScreenPixelSizeAtDist(this._viewDirectionDistance(B))}_viewDirectionDistance(B){return Math.abs(g.projectPointSignedLength(this.viewForward,
q.subtract(M,B,this.eye)))}computeScreenPixelSizeAtDist(B){return B*this.perScreenPixelRatio}computeDistanceFromRadius(B,P){return B/Math.tan(Math.min(this.fovX,this.fovY)/(2*(P||1)))}getScreenCenter(B=f.createScreenPointArray()){B[0]=(this.padding[b.PaddingSide.LEFT]+this.width/2)/this.pixelRatio;B[1]=(this.padding[b.PaddingSide.TOP]+this.height/2)/this.pixelRatio;return B}getRenderCenter(B,P=.5,E=.5){B[0]=this.padding[b.PaddingSide.LEFT]+this.width*P;B[1]=this.padding[b.PaddingSide.BOTTOM]+this.height*
E;B[2]=.5;return B}setGLViewport(B){const P=this.viewport,E=this.padding;B.setViewport(P[0]-E[3],P[1]-E[2],P[2]+E[1]+E[3],P[3]+E[0]+E[2])}applyProjection(B,P){B!==w&&q.copy(w,B);w[3]=1;A.transformMat4(w,w,this.projectionMatrix);B=Math.abs(w[3]);q.scale(w,w,1/B);const E=this.fullViewport;P[0]=c.lerp(0,E[0]+E[2],.5+.5*w[0]);P[1]=c.lerp(0,E[1]+E[3],.5+.5*w[1]);P[2]=.5*(w[2]+1);P[3]=B}unapplyProjection(B,P){const E=this.fullViewport;w[0]=(B[0]/(E[0]+E[2])*2-1)*B[3];w[1]=(B[1]/(E[1]+E[3])*2-1)*B[3];w[2]=
(2*B[2]-1)*B[3];w[3]=B[3];null!=this.inverseProjectionMatrix&&(A.transformMat4(w,w,this.inverseProjectionMatrix),P[0]=w[0],P[1]=w[1],P[2]=w[2])}projectToScreen(B,P){this.projectToRenderScreen(B,V);this.renderToScreen(V,P);return P}projectToRenderScreen(B,P){w[0]=B[0];w[1]=B[1];w[2]=B[2];w[3]=1;A.transformMat4(w,w,this.viewProjectionMatrix);if(0===w[3])return null;q.scale(w,w,1/Math.abs(w[3]));B=this.fullViewport;"x"in P?(P.x=c.lerp(0,B[0]+B[2],.5+.5*w[0]),P.y=c.lerp(0,B[1]+B[3],.5+.5*w[1])):(P[0]=
c.lerp(0,B[0]+B[2],.5+.5*w[0]),P[1]=c.lerp(0,B[1]+B[3],.5+.5*w[1]),2<P.length&&(P[2]=.5*(w[2]+1)));return P}unprojectFromScreen(B,P){return this.unprojectFromRenderScreen(this.screenToRender(B,V),P)}unprojectFromRenderScreen(B,P){t.multiply(D,this.projectionMatrix,this.viewMatrix);if(!t.invert(D,D))return null;const E=this.fullViewport;w[0]=2*(B[0]-E[0])/E[2]-1;w[1]=2*(B[1]-E[1])/E[3]-1;w[2]=2*B[2]-1;w[3]=1;A.transformMat4(w,w,D);if(0===w[3])return null;P[0]=w[0]/w[3];P[1]=w[1]/w[3];P[2]=w[2]/w[3];
return P}constrainWindowSize(B,P,E,l){B*=this.pixelRatio;P*=this.pixelRatio;return[Math.round(Math.max(B-E/2,0)),Math.round(Math.max(this.fullHeight-P-l/2,0)),Math.round(E- -Math.min(B-E/2,0)- -Math.min(this.fullWidth-B-E/2,0)),Math.round(l- -Math.min(this.fullHeight-P-l/2,0)- -Math.min(P-l/2,0))]}computeUp(B){B===p.ViewingMode.Global?this._computeUpGlobal():this._computeUpLocal()}screenToRender(B,P){const E=this.fullHeight-B[1]*this.pixelRatio;P[0]=B[0]*this.pixelRatio;P[1]=E;return P}renderToScreen(B,
P){const E=(this.fullHeight-B[1])/this.pixelRatio;P[0]=B[0]/this.pixelRatio;P[1]=E}_computeUpGlobal(){q.subtract(M,this.center,this.eye);const B=q.length(this.center);1>B?(q.set(this._up,0,0,1),this._markViewDirty(),this.notifyChange("_up")):Math.abs(q.dot(M,this.center))>.9999*q.length(M)*B||(q.cross(this._up,M,this.center),q.cross(this._up,this._up,M),q.normalize(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_computeUpLocal(){q.direction(M,this.eye,this.center);.9999>=Math.abs(M[2])&&
(q.scale(M,M,M[2]),q.set(this._up,-M[0],-M[1],1-M[2]),q.normalize(this._up,this._up),this.notifyChange("_up"),this._markViewDirty())}_compareAndSetView(B,P,E=""){"number"===typeof B[0]&&isFinite(B[0])&&"number"===typeof B[1]&&isFinite(B[1])&&"number"===typeof B[2]&&isFinite(B[2])?q.exactEquals(B,P)||(q.copy(P,B),this._markViewDirty(),E.length&&this.notifyChange(E)):e.getLogger("esri.views.3d.webgl-engine.lib.Camera").warn("Camera vector contains invalid number, ignoring value")}_markViewDirty(){this._viewProjectionDirty=
this._frustumDirty=this._viewDirty=!0}_recomputeFrustum(){this._frustumDirty&&(J.fromMatrix(this.viewMatrix,this.projectionMatrix,this._frustum),this._frustumDirty=!1)}_ensureViewClean(){this._viewDirty&&(t.lookAt(this._viewMatrix,this.eye,this.center,this.up),q.set(this._viewForward,-this._viewMatrix[2],-this._viewMatrix[6],-this._viewMatrix[10]),q.set(this._viewUp,this._viewMatrix[1],this._viewMatrix[5],this._viewMatrix[9]),q.set(this._viewRight,this._viewMatrix[0],this._viewMatrix[4],this._viewMatrix[8]),
this._viewDirty=!1,this._viewInverseTransposeMatrixDirty=!0)}};a.__decorate([h.property()],b.Camera.prototype,"_center",void 0);a.__decorate([h.property()],b.Camera.prototype,"_up",void 0);a.__decorate([h.property()],b.Camera.prototype,"_viewport",void 0);a.__decorate([h.property()],b.Camera.prototype,"_padding",void 0);a.__decorate([h.property()],b.Camera.prototype,"_fov",void 0);a.__decorate([h.property()],b.Camera.prototype,"_nearFar",void 0);a.__decorate([h.property()],b.Camera.prototype,"_pixelRatio",
void 0);a.__decorate([h.property()],b.Camera.prototype,"pixelRatio",null);a.__decorate([h.property()],b.Camera.prototype,"eye",null);a.__decorate([h.property()],b.Camera.prototype,"center",null);a.__decorate([h.property()],b.Camera.prototype,"up",null);a.__decorate([h.property({readOnly:!0})],b.Camera.prototype,"nearFar",null);a.__decorate([h.property()],b.Camera.prototype,"near",null);a.__decorate([h.property()],b.Camera.prototype,"far",null);a.__decorate([h.property()],b.Camera.prototype,"viewport",
null);a.__decorate([h.property({readOnly:!0})],b.Camera.prototype,"screenViewport",null);a.__decorate([h.property({readOnly:!0})],b.Camera.prototype,"screenPadding",null);a.__decorate([h.property()],b.Camera.prototype,"x",null);a.__decorate([h.property()],b.Camera.prototype,"y",null);a.__decorate([h.property()],b.Camera.prototype,"width",null);a.__decorate([h.property()],b.Camera.prototype,"height",null);a.__decorate([h.property()],b.Camera.prototype,"fullWidth",null);a.__decorate([h.property()],
b.Camera.prototype,"fullHeight",null);a.__decorate([h.property({readOnly:!0})],b.Camera.prototype,"_aspect",null);a.__decorate([h.property()],b.Camera.prototype,"padding",null);a.__decorate([h.property({readOnly:!0})],b.Camera.prototype,"projectionMatrix",null);a.__decorate([h.property({readOnly:!0})],b.Camera.prototype,"inverseProjectionMatrix",null);a.__decorate([h.property()],b.Camera.prototype,"fov",null);a.__decorate([h.property()],b.Camera.prototype,"fovX",null);a.__decorate([h.property()],
b.Camera.prototype,"fovY",null);b.Camera=m=a.__decorate([y.subclass("esri.views.3d.webgl-engine.lib.Camera")],b.Camera);const w=z.create(),D=F.create(),M=n.create(),S=n.create(),V=f.createRenderScreenPointArray3();b.PaddingSide=void 0;(function(B){B[B.TOP=0]="TOP";B[B.RIGHT=1]="RIGHT";B[B.BOTTOM=2]="BOTTOM";B[B.LEFT=3]="LEFT"})(b.PaddingSide||(b.PaddingSide={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/vec2":function(){define(["exports","./common"],function(b,a){function d(N,
R){N[0]=R[0];N[1]=R[1];return N}function e(N,R,U){N[0]=R;N[1]=U;return N}function c(N,R,U){N[0]=R[0]+U[0];N[1]=R[1]+U[1];return N}function f(N,R,U){N[0]=R[0]-U[0];N[1]=R[1]-U[1];return N}function h(N,R,U){N[0]=R[0]*U[0];N[1]=R[1]*U[1];return N}function v(N,R,U){N[0]=R[0]/U[0];N[1]=R[1]/U[1];return N}function G(N,R){N[0]=Math.ceil(R[0]);N[1]=Math.ceil(R[1]);return N}function k(N,R){N[0]=Math.floor(R[0]);N[1]=Math.floor(R[1]);return N}function y(N,R,U){N[0]=Math.min(R[0],U[0]);N[1]=Math.min(R[1],U[1]);
return N}function t(N,R,U){N[0]=Math.max(R[0],U[0]);N[1]=Math.max(R[1],U[1]);return N}function F(N,R){N[0]=Math.round(R[0]);N[1]=Math.round(R[1]);return N}function H(N,R,U){N[0]=R[0]*U;N[1]=R[1]*U;return N}function K(N,R,U,Z){N[0]=R[0]+U[0]*Z;N[1]=R[1]+U[1]*Z;return N}function q(N,R){const U=R[0]-N[0];N=R[1]-N[1];return Math.sqrt(U*U+N*N)}function n(N,R){const U=R[0]-N[0];N=R[1]-N[1];return U*U+N*N}function A(N){const R=N[0];N=N[1];return Math.sqrt(R*R+N*N)}function z(N){const R=N[0];N=N[1];return R*
R+N*N}function J(N,R){N[0]=-R[0];N[1]=-R[1];return N}function r(N,R){N[0]=1/R[0];N[1]=1/R[1];return N}function g(N,R){var U=R[0];const Z=R[1];U=U*U+Z*Z;0<U&&(U=1/Math.sqrt(U),N[0]=R[0]*U,N[1]=R[1]*U);return N}function p(N,R){return N[0]*R[0]+N[1]*R[1]}function x(N,R,U){R=R[0]*U[1]-R[1]*U[0];N[0]=N[1]=0;N[2]=R;return N}function m(N,R,U,Z){const O=R[0];R=R[1];N[0]=O+Z*(U[0]-O);N[1]=R+Z*(U[1]-R);return N}function w(N,R){R=R||1;const U=2*a.RANDOM()*Math.PI;N[0]=Math.cos(U)*R;N[1]=Math.sin(U)*R;return N}
function D(N,R,U){const Z=R[0];R=R[1];N[0]=U[0]*Z+U[2]*R;N[1]=U[1]*Z+U[3]*R;return N}function M(N,R,U){const Z=R[0];R=R[1];N[0]=U[0]*Z+U[2]*R+U[4];N[1]=U[1]*Z+U[3]*R+U[5];return N}function S(N,R,U){const Z=R[0];R=R[1];N[0]=U[0]*Z+U[3]*R+U[6];N[1]=U[1]*Z+U[4]*R+U[7];return N}function V(N,R,U){const Z=R[0];R=R[1];N[0]=U[0]*Z+U[4]*R+U[12];N[1]=U[1]*Z+U[5]*R+U[13];return N}function B(N,R,U,Z){const O=R[0]-U[0];R=R[1]-U[1];const T=Math.sin(Z);Z=Math.cos(Z);N[0]=O*Z-R*T+U[0];N[1]=O*T+R*Z+U[1];return N}
function P(N,R){var U=N[0];N=N[1];const Z=R[0];R=R[1];let O=U*U+N*N;0<O&&(O=1/Math.sqrt(O));let T=Z*Z+R*R;0<T&&(T=1/Math.sqrt(T));U=(U*Z+N*R)*O*T;return 1<U?0:-1>U?Math.PI:Math.acos(U)}function E(N){return"vec2("+N[0]+", "+N[1]+")"}function l(N,R){return N[0]===R[0]&&N[1]===R[1]}function C(N,R){const U=N[0];N=N[1];const Z=R[0];R=R[1];const O=a.getEpsilon();return Math.abs(U-Z)<=O*Math.max(1,Math.abs(U),Math.abs(Z))&&Math.abs(N-R)<=O*Math.max(1,Math.abs(N),Math.abs(R))}function Q(N,R,U,Z,O){let T=
R[0]-U[0];U=R[1]-U[1];O=(Z[0]*T+Z[1]*U)*(O-1);T=Z[0]*O;U=Z[1]*O;N[0]=R[0]+T;N[1]=R[1]+U;return N}const I=Object.freeze(Object.defineProperty({__proto__:null,add:c,angle:P,ceil:G,copy:d,cross:x,dist:q,distance:q,div:v,divide:v,dot:p,equals:C,exactEquals:l,floor:k,inverse:r,len:A,length:A,lerp:m,max:t,min:y,mul:h,multiply:h,negate:J,normalize:g,projectAndScale:Q,random:w,rotate:B,round:F,scale:H,scaleAndAdd:K,set:e,sqrDist:n,sqrLen:z,squaredDistance:n,squaredLength:z,str:E,sub:f,subtract:f,transformMat2:D,
transformMat2d:M,transformMat3:S,transformMat4:V},Symbol.toStringTag,{value:"Module"}));b.add=c;b.angle=P;b.ceil=G;b.copy=d;b.cross=x;b.dist=q;b.distance=q;b.div=v;b.divide=v;b.dot=p;b.equals=C;b.exactEquals=l;b.floor=k;b.inverse=r;b.len=A;b.length=A;b.lerp=m;b.max=t;b.min=y;b.mul=h;b.multiply=h;b.negate=J;b.normalize=g;b.projectAndScale=Q;b.random=w;b.rotate=B;b.round=F;b.scale=H;b.scaleAndAdd=K;b.set=e;b.sqrDist=n;b.sqrLen=z;b.squaredDistance=n;b.squaredLength=z;b.str=E;b.sub=f;b.subtract=f;b.transformMat2=
D;b.transformMat2d=M;b.transformMat3=S;b.transformMat4=V;b.vec2=I})},"esri/geometry/support/frustum":function(){define("exports ../../core/ObjectStack ../../chunks/mat4 ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/vec4f64 ./clipRay ./plane ./vectorStacks".split(" "),function(b,a,d,e,c,f,h,v,G,k){function y(){return[c.create(),c.create(),c.create(),c.create(),c.create(),c.create(),c.create(),c.create()]}function t(A,z){G.fromPoints(z[b.PointIndex.FAR_BOTTOM_LEFT],z[b.PointIndex.NEAR_BOTTOM_LEFT],
z[b.PointIndex.NEAR_TOP_LEFT],A[b.PlaneIndex.LEFT]);G.fromPoints(z[b.PointIndex.NEAR_BOTTOM_RIGHT],z[b.PointIndex.FAR_BOTTOM_RIGHT],z[b.PointIndex.FAR_TOP_RIGHT],A[b.PlaneIndex.RIGHT]);G.fromPoints(z[b.PointIndex.FAR_BOTTOM_LEFT],z[b.PointIndex.FAR_BOTTOM_RIGHT],z[b.PointIndex.NEAR_BOTTOM_RIGHT],A[b.PlaneIndex.BOTTOM]);G.fromPoints(z[b.PointIndex.NEAR_TOP_LEFT],z[b.PointIndex.NEAR_TOP_RIGHT],z[b.PointIndex.FAR_TOP_RIGHT],A[b.PlaneIndex.TOP]);G.fromPoints(z[b.PointIndex.NEAR_BOTTOM_LEFT],z[b.PointIndex.NEAR_BOTTOM_RIGHT],
z[b.PointIndex.NEAR_TOP_RIGHT],A[b.PlaneIndex.NEAR]);G.fromPoints(z[b.PointIndex.FAR_BOTTOM_RIGHT],z[b.PointIndex.FAR_BOTTOM_LEFT],z[b.PointIndex.FAR_TOP_LEFT],A[b.PlaneIndex.FAR])}function F(A,z){for(let J=0;6>J;J++)if(!G.clip(A[J],z))return!1;return!0}b.PlaneIndex=void 0;(function(A){A[A.LEFT=0]="LEFT";A[A.RIGHT=1]="RIGHT";A[A.BOTTOM=2]="BOTTOM";A[A.TOP=3]="TOP";A[A.NEAR=4]="NEAR";A[A.FAR=5]="FAR"})(b.PlaneIndex||(b.PlaneIndex={}));b.PointIndex=void 0;(function(A){A[A.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT";
A[A.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT";A[A.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT";A[A.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT";A[A.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT";A[A.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT";A[A.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT";A[A.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"})(b.PointIndex||(b.PointIndex={}));const H={bottom:[b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.FAR_BOTTOM_LEFT],near:[b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.NEAR_BOTTOM_RIGHT,
b.PointIndex.NEAR_TOP_RIGHT,b.PointIndex.NEAR_TOP_LEFT],far:[b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.FAR_BOTTOM_LEFT,b.PointIndex.FAR_TOP_LEFT,b.PointIndex.FAR_TOP_RIGHT],right:[b.PointIndex.NEAR_BOTTOM_RIGHT,b.PointIndex.FAR_BOTTOM_RIGHT,b.PointIndex.FAR_TOP_RIGHT,b.PointIndex.NEAR_TOP_RIGHT],left:[b.PointIndex.FAR_BOTTOM_LEFT,b.PointIndex.NEAR_BOTTOM_LEFT,b.PointIndex.NEAR_TOP_LEFT,b.PointIndex.FAR_TOP_LEFT],top:[b.PointIndex.FAR_TOP_LEFT,b.PointIndex.NEAR_TOP_LEFT,b.PointIndex.NEAR_TOP_RIGHT,
b.PointIndex.FAR_TOP_RIGHT]},K=[h.fromValues(-1,-1,-1,1),h.fromValues(1,-1,-1,1),h.fromValues(1,1,-1,1),h.fromValues(-1,1,-1,1),h.fromValues(-1,-1,1,1),h.fromValues(1,-1,1,1),h.fromValues(1,1,1,1),h.fromValues(-1,1,1,1)],q=new a.ObjectStack(v.create),n=y();b.NumPlanes=6;b.NumPoints=8;b.computePlanes=t;b.copy=function(A,z){for(let J=0;6>J;J++)G.copy(A[J],z[J]);return A};b.create=function(A){return A?[G.create(A[0]),G.create(A[1]),G.create(A[2]),G.create(A[3]),G.create(A[4]),G.create(A[5])]:[G.create(),
G.create(),G.create(),G.create(),G.create(),G.create()]};b.createPoints=y;b.fromMatrix=function(A,z,J,r=n){A=d.multiply(k.sm4d.get(),z,A);d.invert(A,A);for(z=0;8>z;++z){const g=f.transformMat4(k.sv4d.get(),K[z],A);e.set(r[z],g[0]/g[3],g[1]/g[3],g[2]/g[3])}t(J,r)};b.intersectClipRay=function(A,z){for(let J=0;6>J;J++)if(!G.clipInfinite(A[J],z))return!1;return!0};b.intersectsLineSegment=function(A,z,J){return F(A,v.fromLineSegmentAndDirection(z,J,q.get()))};b.intersectsPoint=function(A,z){for(let J=
0;6>J;J++)if(0<G.signedDistance(A[J],z))return!1;return!0};b.intersectsRay=function(A,z){return F(A,v.fromRay(z,q.get()))};b.intersectsSphere=function(A,z){for(let J=0;6>J;J++){const r=A[J];if(r[0]*z[0]+r[1]*z[1]+r[2]*z[2]+r[3]>=z[3])return!1}return!0};b.planePointIndices=H;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/ObjectStack":function(){define(["exports","./nextTick"],function(b,a){class d{constructor(e){this._allocator=e;this._items=[];this._itemsPtr=0;this._grow()}get(){0===
this._itemsPtr&&a.nextTick(()=>this._reset());this._itemsPtr===this._items.length&&this._grow();return this._items[this._itemsPtr++]}_reset(){this._items.length=Math.min(Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3072),this._items.length);this._itemsPtr=0}_grow(){for(let e=0;e<Math.max(8,Math.min(this._items.length,1024));e++)this._items.push(this._allocator())}}b.ObjectStack=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/clipRay":function(){define(["exports",
"../../core/ObjectStack","../../chunks/vec3","./ray"],function(b,a,d,e){function c(G){return G?{ray:e.create(G.ray),c0:G.c0,c1:G.c1}:{ray:e.create(),c0:0,c1:Number.MAX_VALUE}}function f(G,k,y,t=c()){e.copy(G,t.ray);t.c0=k;t.c1=y;return t}function h(G,k,y){return d.add(y,G.ray.origin,d.scale(y,G.ray.direction,k))}const v=new a.ObjectStack(()=>c());b.copy=function(G,k=c()){return f(G.ray,G.c0,G.c1,k)};b.create=c;b.fromLineSegmentAndDirection=function(G,k,y=c()){const t=d.length(G.vector);e.fromValues(G.origin,
k,y.ray);y.c0=0;y.c1=t;return y};b.fromRay=function(G,k=c()){e.copy(G,k.ray);k.c0=0;k.c1=Number.MAX_VALUE;return k};b.fromValues=f;b.getAt=h;b.getEnd=function(G,k){return h(G,G.c1,k)};b.getStart=function(G,k){return h(G,G.c0,k)};b.wrap=function(G,k,y){const t=v.get();t.ray=G;t.c0=k;t.c1=y;return t};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/ray":function(){define("exports ../../core/arrayUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),
function(b,a,d,e,c,f){function h(t){return t?v(c.clone(t.origin),c.clone(t.direction)):v(c.create(),c.create())}function v(t,F){return{origin:t,direction:F}}function G(t,F,H=h()){e.copy(H.origin,t);e.copy(H.direction,F);return H}function k(t,F){t=e.cross(f.sv3d.get(),e.normalize(f.sv3d.get(),t.direction),e.subtract(f.sv3d.get(),F,t.origin));return e.dot(t,t)}const y=new d.ObjectStack(()=>h());b.closestPoint=function(t,F,H){F=e.dot(t.direction,e.subtract(H,F,t.origin));e.add(H,t.origin,e.scale(H,t.direction,
F));return H};b.copy=function(t,F=h()){return G(t.origin,t.direction,F)};b.create=h;b.distance=function(t,F){return Math.sqrt(k(t,F))};b.distance2=k;b.equals=function(t,F){return a.equals(t.origin,F.origin)&&a.equals(t.direction,F.direction)};b.fromPoints=function(t,F,H=h()){e.copy(H.origin,t);e.subtract(H.direction,F,t);return H};b.fromValues=G;b.wrap=function(t,F){const H=y.get();H.origin=t;H.direction=F;return H};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/vectorStacks":function(){define(["exports",
"../../core/VectorStack"],function(b,a){const d=a.VectorStack.createVec2f64(),e=a.VectorStack.createVec3f64(),c=a.VectorStack.createVec4f64(),f=a.VectorStack.createMat3f64(),h=a.VectorStack.createMat4f64();a=a.VectorStack.createQuatf64();b.sm3d=f;b.sm4d=h;b.sq4d=a;b.sv2d=d;b.sv3d=e;b.sv4d=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/VectorStack":function(){define("exports ./ByteSizeUnit ./nextTick ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec3f64 ../chunks/vec4f64".split(" "),
function(b,a,d,e,c,f,h,v,G){class k{constructor(t,F,H){this._itemByteSize=t;this._itemCreate=F;this._buffers=[];this._items=[];this._itemsPtr=0;this._itemsPerBuffer=Math.ceil(H/this._itemByteSize)}get(){0===this._itemsPtr&&d.nextTick(()=>this._reset());const t=Math.floor(this._itemsPtr/this._itemsPerBuffer);for(;this._buffers.length<=t;){const F=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize);for(let H=0;H<this._itemsPerBuffer;++H)this._items.push(this._itemCreate(F,H*this._itemByteSize));
this._buffers.push(F)}return this._items[this._itemsPtr++]}_reset(){const t=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);for(;this._buffers.length>t;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}static createVec2f64(t=y){return new k(16,h.createView,t)}static createVec3f64(t=y){return new k(24,v.createView,t)}static createVec4f64(t=y){return new k(32,G.createView,t)}static createMat3f64(t=y){return new k(72,e.createView,t)}static createMat4f64(t=
y){return new k(128,c.createView,t)}static createQuatf64(t=y){return new k(32,f.createView,t)}get test(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}const y=4*a.ByteSizeUnit.KILOBYTES;b.VectorStack=k;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3f64":function(){define(["exports"],function(b){function a(){return[1,0,0,0,1,0,0,0,1]}function d(h){return[h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8]]}function e(h,v,G,k,y,t,F,H,K){return[h,
v,G,k,y,t,F,H,K]}function c(h,v){return new Float64Array(h,v,9)}const f=Object.freeze(Object.defineProperty({__proto__:null,clone:d,create:a,createView:c,fromValues:e},Symbol.toStringTag,{value:"Module"}));b.clone=d;b.create=a;b.createView=c;b.fromValues=e;b.mat3f64=f})},"esri/chunks/quatf64":function(){define(["exports"],function(b){function a(){return[0,0,0,1]}function d(v){return[v[0],v[1],v[2],v[3]]}function e(v,G,k,y){return[v,G,k,y]}function c(v,G){return new Float64Array(v,G,4)}const f=a(),
h=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:f,clone:d,create:a,createView:c,fromValues:e},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=f;b.clone=d;b.create=a;b.createView=c;b.fromValues=e;b.quatf64=h})},"esri/geometry/support/plane":function(){define("exports ../../core/mathUtils ../../chunks/vec3 ../../chunks/vec3f64 ../../chunks/vec4 ../../chunks/common ../../chunks/sphere ./vector ./vectorStacks ../../views/3d/support/mathUtils".split(" "),function(b,a,d,e,c,f,h,v,G,k){function y(B=
D){return[B[0],B[1],B[2],B[3]]}function t(B,P){return F(P[0],P[1],P[2],P[3],B)}function F(B,P,E,l,C=y()){C[0]=B;C[1]=P;C[2]=E;C[3]=l;return C}function H(B,P,E){var l=P[0]*P[0]+P[1]*P[1]+P[2]*P[2];l=1E-5<Math.abs(l-1)&&1E-12<l?1/Math.sqrt(l):1;E[0]=P[0]*l;E[1]=P[1]*l;E[2]=P[2]*l;E[3]=-(E[0]*B[0]+E[1]*B[1]+E[2]*B[2]);return E}function K(B,P,E,l=y()){var C=E[0]-P[0],Q=E[1]-P[1],I=E[2]-P[2];E=B[0]-P[0];const N=B[1]-P[1],R=B[2]-P[2];P=Q*R-I*N;I=I*E-C*R;C=C*N-Q*E;Q=P*P+I*I+C*C;Q=1E-5<Math.abs(Q-1)&&1E-12<
Q?1/Math.sqrt(Q):1;l[0]=P*Q;l[1]=I*Q;l[2]=C*Q;l[3]=-(l[0]*B[0]+l[1]*B[1]+l[2]*B[2]);return l}function q(B,P,E,l=0,C=Math.floor(1/3*E),Q=Math.floor(2/3*E)){if(3>E)return!1;P(r,l);let I=C,N=!1;for(;I<E-1&&!N;)P(g,I),I++,N=!d.exactEquals(r,g);if(!N)return!1;I=Math.max(I,Q);for(N=!1;I<E&&!N;)P(p,I),I++,d.subtract(x,r,g),d.normalize(x,x),d.subtract(m,g,p),d.normalize(m,m),N=!d.exactEquals(r,p)&&!d.exactEquals(g,p)&&.99619469809>Math.abs(d.dot(x,m));if(!N)return 0===l&&1===C&&2===Q?!1:q(B,P,E,0,1,2);K(r,
g,p,B);return!0}function n(B,P,E){B=d.scale(G.sv3d.get(),B,d.dot(B,P));d.subtract(E,P,B);return E}function A(B,P){return d.dot(B,P)+B[3]}function z(B,P,E,l,C){const Q=d.dot(B,E);if(0===Q)return!1;B=-(d.dot(B,P)+B[3])/Q;l&M.CLAMP&&(B=a.clamp(B,0,1));if(!(l&M.INFINITE_MIN)&&0>B||!(l&M.INFINITE_MAX)&&1<B)return!1;d.add(C,P,d.scale(C,E,B));return!0}const J=c.exactEquals;c=c.equals;const r=e.create(),g=e.create(),p=e.create(),x=e.create(),m=e.create(),w=(()=>{const B=e.create();return(P,E,l)=>{d.cross(B,
P,E);if(d.squaredLength(B)<f.getEpsilon())return!1;d.normalize(B,B);const [C,Q,I]=B,N=l.origin,R=Math.abs(C),U=Math.abs(Q),Z=Math.abs(I),[O,T,u]=P,[L,Y,X]=E;P=P[3];E=E[3];R>U&&R>Z?(N[1]=(E*u-P*X)/C,N[2]=(P*Y-E*T)/C):U>Z?(N[0]=(P*X-E*u)/Q,N[2]=(E*O-P*L)/Q):(N[0]=(E*T-P*Y)/I,N[1]=(P*L-E*O)/I);d.copy(l.direction,B);return!0}})(),D=[0,0,1,0];var M;(function(B){B[B.NONE=0]="NONE";B[B.CLAMP=1]="CLAMP";B[B.INFINITE_MIN=4]="INFINITE_MIN";B[B.INFINITE_MAX=8]="INFINITE_MAX"})(M||(M={}));const S=M.INFINITE_MIN|
M.INFINITE_MAX,V=M.INFINITE_MAX;b.clip=function(B,P){const E=d.dot(B,P.ray.direction);B=-A(B,P.ray.origin);if(0>B&&0<=E)return!1;if(-1E-6<E&&1E-6>E)return 0<B;if((0>B||0>E)&&!(0>B&&0>E))return!0;B/=E;0<E?B<P.c1&&(P.c1=B):B>P.c0&&(P.c0=B);return P.c0<=P.c1};b.clipInfinite=function(B,P){const E=d.dot(B,P.ray.direction);B=-A(B,P.ray.origin);if(-1E-6<E&&1E-6>E)return 0<B;B/=E;0<E?B<P.c1&&(P.c1=B):B>P.c0&&(P.c0=B);return P.c0<=P.c1};b.copy=t;b.create=y;b.distance=function(B,P){return Math.abs(A(B,P))};
b.equals=c;b.exactEquals=J;b.fromArray=function(B,P,E=!0){const l=P.length/3;return q(B,(C,Q)=>d.set(C,P[3*Q],P[3*Q+1],P[3*Q+2]),E?l-1:l)};b.fromManyPoints=q;b.fromNormalAndOffset=function(B,P,E){d.copy(E,B);E[3]=P;return E};b.fromPoints=K;b.fromPositionAndNormal=H;b.fromValues=F;b.fromVectorsAndPoint=function(B,P,E,l){d.cross(p,P,B);return H(E,p,l)};b.intersectLine=function(B,P,E,l){E=d.subtract(G.sv3d.get(),E,P);return z(B,P,E,S,l)};b.intersectLineSegment=function(B,P,E){return z(B,P.origin,P.vector,
M.NONE,E)};b.intersectLineSegmentClamp=function(B,P,E){return z(B,P.origin,P.vector,M.CLAMP,E)};b.intersectPlanes=w;b.intersectRay=function(B,P,E){return null!=P?z(B,P.origin,P.direction,V,E):!1};b.isPointInside=function(B,P){return 0<=A(B,P)};b.isPointOutside=function(B,P){return 0>A(B,P)};b.isSphereFullyInside=function(B,P){return 0<=A(B,h.getCenter(P))-P[3]};b.isSphereFullyOutside=function(B,P){return 0>A(B,h.getCenter(P))+P[3]};b.isVertical=function(B){return Math.abs(B[2])<f.getEpsilon()};b.negate=
function(B,P){P[0]=-B[0];P[1]=-B[1];P[2]=-B[2];P[3]=-B[3];return P};b.normal=function(B){return B};b.projectPoint=function(B,P,E){const l=d.scale(G.sv3d.get(),B,-B[3]);P=d.subtract(G.sv3d.get(),P,l);B=n(B,P,G.sv3d.get());d.add(E,B,l);return E};b.projectPointLocal=function(B,P,E,l){var C=G.sv3d.get(),Q=G.sv3d.get();k.tangentFrame(B,C,Q);P=d.subtract(G.sv3d.get(),E,P);C=v.projectPointSignedLength(C,P);Q=v.projectPointSignedLength(Q,P);B=v.projectPointSignedLength(B,P);return d.set(l,C,Q,B)};b.projectVector=
n;b.setOffsetFromPoint=function(B,P,E){P!==B&&t(B,P);B[3]=-d.dot(B,E);return B};b.signedDistance=A;b.up=D;b.wrap=function(B=D[0],P=D[1],E=D[2],l=D[3]){return F(B,P,E,l,G.sv4d.get())};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ./mat4 ./vec3 ./vec3f64 ./vec4 ./vec4f64 ./common ../geometry/support/Axis ../geometry/support/ray ../geometry/support/vector ../geometry/support/vectorStacks".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H){function K(){return G.create()}function q(aa,ca=K()){return v.copy(ca,aa)}function n(aa,ca){return G.fromValues(aa[0],aa[1],aa[2],ca)}function A(aa){return aa}function z(aa){aa[0]=aa[1]=aa[2]=aa[3]=0}function J(aa,ca){aa[0]=aa[1]=aa[2]=0;aa[3]=ca;return aa}function r(aa){return aa[3]}function g(aa){return aa}function p(aa,ca,W,ba){return G.fromValues(aa,ca,W,ba)}function x(aa,ca,W){aa!==W&&f.copy(W,aa);W[3]=aa[3]+ca;return W}function m(aa,ca,W){d.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported");
return aa===W?W:q(aa,W)}function w(aa,ca,W){if(null==ca||!M(aa,ca,T))return!1;let {t0:ba,t1:da}=T;if(0>ba||da<ba&&0<da)ba=da;if(0>ba)return!1;if(W){const {origin:ea,direction:fa}=ca;W[0]=ea[0]+fa[0]*ba;W[1]=ea[1]+fa[1]*ba;W[2]=ea[2]+fa[2]*ba}return!0}function D(aa,ca,W){ca=t.fromPoints(ca,W);if(!M(aa,ca,T))return[];const {origin:ba,direction:da}=ca,{t0:ea,t1:fa}=T;ca=ja=>{const ha=h.create();f.scaleAndAdd(ha,ba,da,ja);return E(aa,ha,ha)};return Math.abs(ea-fa)<k.getEpsilon()?[ca(ea)]:[ca(ea),ca(fa)]}
function M(aa,ca,W){const {origin:ba,direction:da}=ca,ea=u;ea[0]=ba[0]-aa[0];ea[1]=ba[1]-aa[1];ea[2]=ba[2]-aa[2];ca=da[0]*da[0]+da[1]*da[1]+da[2]*da[2];if(0===ca)return!1;const fa=2*(da[0]*ea[0]+da[1]*ea[1]+da[2]*ea[2]);aa=fa*fa-4*ca*(ea[0]*ea[0]+ea[1]*ea[1]+ea[2]*ea[2]-aa[3]*aa[3]);if(0>aa)return!1;aa=Math.sqrt(aa);W.t0=(-fa-aa)/(2*ca);W.t1=(-fa+aa)/(2*ca);return!0}function S(aa,ca){return w(aa,ca,null)}function V(aa,ca,W){if(w(aa,ca,W))return W;aa=B(aa,ca,H.sv3d.get());f.add(W,ca.origin,f.scale(H.sv3d.get(),
ca.direction,f.distance(ca.origin,aa)/f.length(ca.direction)));return W}function B(aa,ca,W){const ba=H.sv3d.get(),da=H.sm4d.get();f.cross(ba,ca.origin,ca.direction);const ea=aa[3];f.cross(W,ba,ca.origin);f.scale(W,W,1/f.length(W)*ea);aa=C(aa,ca.origin);ca=F.angle(ca.origin,W);c.fromRotation(da,ca+aa,ba);f.transformMat4(W,W,da);return W}function P(aa,ca,W){if(w(aa,ca,W))return W;t.closestPoint(ca,aa,W);return E(aa,W,W)}function E(aa,ca,W){ca=f.subtract(H.sv3d.get(),ca,aa);ca=f.scale(H.sv3d.get(),ca,
aa[3]/f.length(ca));return f.add(W,ca,aa)}function l(aa,ca){ca=f.subtract(H.sv3d.get(),ca,aa);ca=f.squaredLength(ca);return Math.sqrt(Math.abs(ca-aa[3]*aa[3]))}function C(aa,ca){ca=f.subtract(H.sv3d.get(),ca,aa);ca=f.length(ca);aa=aa[3];return e.acosClamped(aa/(aa+Math.abs(aa-ca)))}function Q(aa,ca,W,ba){aa=f.subtract(L,ca,aa);switch(W){case y.Axis.X:return W=e.cartesianToSpherical(aa,L)[2],f.set(ba,-Math.sin(W),Math.cos(W),0);case y.Axis.Y:return aa=e.cartesianToSpherical(aa,L),W=aa[1],aa=aa[2],
ca=Math.sin(W),f.set(ba,-ca*Math.cos(aa),-ca*Math.sin(aa),Math.cos(W));case y.Axis.Z:return f.normalize(ba,aa)}}function I(aa,ca){ca=f.subtract(Y,ca,aa);return f.length(ca)-aa[3]}function N(aa,ca,W,ba){const da=I(aa,ca);aa=Q(aa,ca,y.Axis.Z,Y);W=f.scale(Y,aa,W-da);return f.add(ba,ca,W)}function R(aa,ca){ca=f.squaredDistance(aa,ca);aa=aa[3];return ca<=aa*aa}function U(aa,ca,W=K()){const ba=f.distance(aa,ca),da=aa[3],ea=ca[3];if(ba+ea<da)return v.copy(W,aa),W;if(ba+da<ea)return v.copy(W,ca),W;f.lerp(W,
aa,ca,(ba+ea-da)/(2*ba));W[3]=(ba+da+ea)/2;return W}a=K();const Z=v.equals,O=v.equals,T={t0:0,t1:0},u=h.create(),L=h.create(),Y=h.create(),X=K(),ia=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:a,altitudeAt:I,angleToSilhouette:C,axisAt:Q,clear:z,closestPoint:P,closestPointOnSilhouette:B,containsPoint:R,copy:q,create:K,distanceToSilhouette:l,elevate:x,equals:O,exactEquals:Z,fromCenterAndRadius:n,fromRadius:J,fromValues:p,getCenter:g,getRadius:r,intersectLine:D,intersectRay:w,intersectRayClosestSilhouette:V,
intersectsRay:S,projectPoint:E,setAltitudeAt:N,setExtent:m,tmpSphere:X,union:U,wrap:A},Symbol.toStringTag,{value:"Module"}));b.NullSphere=a;b.altitudeAt=I;b.angleToSilhouette=C;b.axisAt=Q;b.clear=z;b.closestPoint=P;b.closestPointOnSilhouette=B;b.containsPoint=R;b.copy=q;b.create=K;b.distanceToSilhouette=l;b.elevate=x;b.equals=O;b.exactEquals=Z;b.fromCenterAndRadius=n;b.fromRadius=J;b.fromValues=p;b.getCenter=g;b.getRadius=r;b.intersectLine=D;b.intersectRay=w;b.intersectRayClosestSilhouette=V;b.intersectsRay=
S;b.projectPoint=E;b.setAltitudeAt=N;b.setExtent=m;b.sphere=ia;b.tmpSphere=X;b.union=U;b.wrap=A})},"esri/geometry/support/vector":function(){define(["exports","../../core/mathUtils","../../chunks/vec3","../../chunks/vec3f64"],function(b,a,d,e){const c=e.create(),f=e.create();b.angle=function(h,v){h=d.dot(h,v)/(d.length(h)*d.length(v));return-a.acosClamped(h)};b.angleAroundAxis=function(h,v,G){d.normalize(c,h);d.normalize(f,v);h=d.dot(c,f);h=a.acosClamped(h);v=d.cross(c,c,f);return 0>d.dot(v,G)?2*
Math.PI-h:h};b.projectPoint=function(h,v,G){v=d.dot(h,v)/d.dot(h,h);return d.scale(G,h,v)};b.projectPointSignedLength=function(h,v){return d.dot(h,v)/d.length(h)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/mathUtils":function(){define(["exports","../../../core/mathUtils","../../../chunks/vec3","../../../chunks/vec3f64"],function(b,a,d,e){const c=e.create(),f=e.create(),h=e.create(),v=e.create(),G=e.create();b.angle=function(k,y,t){k=d.normalize(v,k);y=d.normalize(G,
y);const F=a.acosClamped(d.dot(k,y));return t&&(k=d.cross(h,k,y),0>d.dot(k,t))?-F:F};b.bilerp=function(k,y,t,F,H,K){k+=(y-k)*H;return k+(t+(F-t)*H-k)*K};b.cosCapped=function(k,y){return k>y?Math.cos(y):Math.cos(k)};b.fovx2fovy=function(k,y,t){return 2*Math.atan(t*Math.tan(.5*k)/y)};b.fovy2fovx=function(k,y,t){return 2*Math.atan(y*Math.tan(.5*k)/t)};b.makeOrthonormal=function(k,y,t){t=t||k;const F=d.dot(k,y);d.set(t,k[0]-F*y[0],k[1]-F*y[1],k[2]-F*y[2]);d.normalize(t,t)};b.makePiecewiseLinearFunction=
function(k){const y=k.length;return t=>{if(t<=k[0][0])return k[0][1];if(t>=k[y-1][0])return k[y-1][1];let F=1;for(;t>k[F][0];)F++;const H=k[F][0];t=(H-t)/(H-k[F-1][0]);return t*k[F-1][1]+(1-t)*k[F][1]}};b.maxScale=function(k){return Math.sqrt(Math.max(k[0]*k[0]+k[4]*k[4]+k[8]*k[8],k[1]*k[1]+k[5]*k[5]+k[9]*k[9],k[2]*k[2]+k[6]*k[6]+k[10]*k[10]))};b.planeFromPoints=function(k,y,t,F){d.subtract(c,y,k);d.subtract(f,t,k);d.cross(F,c,f);d.normalize(F,F);F[3]=-d.dot(k,F)};b.scaleFromMatrix=function(k,y){d.set(k,
Math.sqrt(y[0]*y[0]+y[4]*y[4]+y[8]*y[8]),Math.sqrt(y[1]*y[1]+y[5]*y[5]+y[9]*y[9]),Math.sqrt(y[2]*y[2]+y[6]*y[6]+y[10]*y[10]));return k};b.slerp=function(k,y,t,F=e.create()){const H=d.length(k);var K=d.length(y),q=d.dot(k,y)/(H*K);if(.9999999999999999>q){q=Math.acos(q);const n=((1-t)*H+t*K)/Math.sin(q);K=n/K*Math.sin(t*q);d.scale(v,k,n/H*Math.sin((1-t)*q));d.scale(G,y,K);return d.add(F,v,G)}return d.lerp(F,k,y,t)};b.slerpTangent=function(k,y,t,F=e.create(),H=e.create()){const K=d.length(k),q=d.length(y);
var n=d.dot(k,y)/(K*q);if(.9999999999999999>n){n=Math.acos(n);const A=Math.sin(n),z=Math.sin(t*n),J=Math.sin((1-t)*n),r=(1-t)*K+t*q,g=r/A,p=g/q*z;d.scale(v,k,g/K*J);d.scale(G,y,p);d.add(F,v,G);d.scale(v,k,1/K*(-Math.cos((1-t)*n)*n*r+J*(-K+q)));d.scale(G,y,1/q*(Math.cos(t*n)*n*r+z*(-K+q)));d.add(H,v,G);d.scale(H,H,1/A);return H}d.lerp(F,k,y,t);d.subtract(H,y,k);d.normalize(H,H);return H};b.tangentFrame=function(k,y,t){Math.abs(k[0])>Math.abs(k[1])?d.set(y,0,1,0):d.set(y,1,0,0);d.cross(t,k,y);d.normalize(y,
y);d.cross(y,t,k);d.normalize(t,t)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/fov":function(){define(["exports"],function(b){b.fovd2fovx=function(a,d,e){return 2*Math.atan(d*Math.tan(.5*a)/Math.sqrt(d*d+e*e))};b.fovd2fovy=function(a,d,e){return 2*Math.atan(e*Math.tan(.5*a)/Math.sqrt(d*d+e*e))};b.fovx2fovd=function(a,d,e){return 2*Math.atan(Math.sqrt(d*d+e*e)*Math.tan(.5*a)/d)};b.fovy2fovd=function(a,d,e){return 2*Math.atan(Math.sqrt(d*d+e*e)*Math.tan(.5*
a)/e)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/ShaderOutput":function(){define(["exports"],function(b){b.ShaderOutput=void 0;var a=b.ShaderOutput||(b.ShaderOutput={});a[a.Color=0]="Color";a[a.Depth=1]="Depth";a[a.Normal=2]="Normal";a[a.Shadow=3]="Shadow";a[a.ShadowHighlight=4]="ShadowHighlight";a[a.ShadowExcludeHighlight=5]="ShadowExcludeHighlight";a[a.Highlight=6]="Highlight";a[a.Alpha=7]="Alpha";a[a.ObjectAndLayerIdColor=8]=
"ObjectAndLayerIdColor";a[a.CompositeColor=9]="CompositeColor";a[a.COUNT=10]="COUNT";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/effects/RenderPlugin":function(){define(["exports","../../../../core/Accessor","../core/shaderLibrary/ShaderOutput"],function(b,a,d){const e={required:[]},c={required:[d.ShaderOutput.Depth]},f={required:[d.ShaderOutput.CompositeColor]},h={required:[d.ShaderOutput.Highlight]};d={required:[d.ShaderOutput.Depth,d.ShaderOutput.Normal]};
class v extends a{consumes(){return e}get usedMemory(){return 0}get isDecoration(){return!1}get running(){return!1}}class G extends v{}class k extends v{}class y extends v{}class t extends v{}class F extends v{}b.ASyncPreparesRenderPlugin=F;b.AsyncRenderPlugin=t;b.ConsumesCompositeColor=f;b.ConsumesDepth=c;b.ConsumesDepthNormal=d;b.ConsumesHighlight=h;b.ConsumesNone=e;b.SyncPrepareRenderPlugin=k;b.SyncPreparesRenderPlugin=y;b.SyncRenderPlugin=G;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/lib/RenderSlot":function(){define(["exports"],function(b){b.RenderSlot=void 0;var a=b.RenderSlot||(b.RenderSlot={});a[a.INTEGRATED_MESH=0]="INTEGRATED_MESH";a[a.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN";a[a.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL";a[a.TRANSPARENT_MATERIAL=3]="TRANSPARENT_MATERIAL";a[a.TRANSPARENT_TERRAIN=4]="TRANSPARENT_TERRAIN";a[a.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=5]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL";a[a.OCCLUDED_TERRAIN=6]="OCCLUDED_TERRAIN";
a[a.OCCLUDER_MATERIAL=7]="OCCLUDER_MATERIAL";a[a.TRANSPARENT_OCCLUDER_MATERIAL=8]="TRANSPARENT_OCCLUDER_MATERIAL";a[a.OCCLUSION_PIXELS=9]="OCCLUSION_PIXELS";a[a.ANTIALIASING=10]="ANTIALIASING";a[a.COMPOSITE=11]="COMPOSITE";a[a.BLIT=12]="BLIT";a[a.SSAO=13]="SSAO";a[a.HIGHLIGHT=14]="HIGHLIGHT";a[a.SHADOW_HIGHLIGHT=15]="SHADOW_HIGHLIGHT";a[a.ENVIRONMENT_OPAQUE=16]="ENVIRONMENT_OPAQUE";a[a.ENVIRONMENT_TRANSPARENT=17]="ENVIRONMENT_TRANSPARENT";a[a.LASERLINES=18]="LASERLINES";a[a.LASERLINES_CONTRAST_CONTROL=
19]="LASERLINES_CONTRAST_CONTROL";a[a.HUD_MATERIAL=20]="HUD_MATERIAL";a[a.LABEL_MATERIAL=21]="LABEL_MATERIAL";a[a.LINE_CALLOUTS=22]="LINE_CALLOUTS";a[a.LINE_CALLOUTS_HUD_DEPTH=23]="LINE_CALLOUTS_HUD_DEPTH";a[a.DRAPED_MATERIAL=24]="DRAPED_MATERIAL";a[a.DRAPED_WATER=25]="DRAPED_WATER";a[a.VOXEL=26]="VOXEL";a[a.MAX_SLOTS=27]="MAX_SLOTS";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/GraphicsLayer":function(){define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/accessorSupport/ensureType ../core/arrayUtils ../core/has ../core/accessorSupport/decorators/subclass ../core/support/OwningCollection ./Layer ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection ../symbols/support/ElevationInfo".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t){d=class extends G.BlendLayer(k.ScaleRangeLayer(v)){constructor(F){super(F);this.elevationInfo=null;this.graphics=new y.GraphicsCollection;this.screenSizePerspectiveEnabled=!0;this.type="graphics";this.internal=!1}destroy(){this.removeAll();this.graphics.destroy()}add(F){this.graphics.add(F);return this}addMany(F){this.graphics.addMany(F);return this}removeAll(){this.graphics.removeAll();return this}remove(F){this.graphics.remove(F)}removeMany(F){this.graphics.removeMany(F)}on(F,
H){return super.on(F,H)}graphicChanged(F){this.emit("graphic-update",F)}};b.__decorate([a.property({type:t})],d.prototype,"elevationInfo",void 0);b.__decorate([a.property(h.owningCollectionProperty(y.GraphicsCollection,"graphics"))],d.prototype,"graphics",void 0);b.__decorate([a.property({type:["show","hide"]})],d.prototype,"listMode",void 0);b.__decorate([a.property()],d.prototype,"screenSizePerspectiveEnabled",void 0);b.__decorate([a.property({readOnly:!0})],d.prototype,"type",void 0);b.__decorate([a.property({constructOnly:!0})],
d.prototype,"internal",void 0);return d=b.__decorate([f.subclass("esri.layers.GraphicsLayer")],d)})},"fx3d/views/3d/effects/Effect":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/declare esri/geometry/support/webMercatorUtils esri/geometry/Extent esri/core/libs/gl-matrix-2/vec3f64 esri/core/libs/gl-matrix-2/vec2f64 esri/core/libs/gl-matrix-2/vec2 esri/views/3d/webgl-engine/lib/GridLocalOriginFactory esri/geometry/projection ../webgl-engine-extensions/GLVerTexture ../support/fx3dUtils".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t){var F,H,K,q,n,A=h.vec2f64;v=v.vec2;f=f.vec3f64;var z=(f.create(),f.create()),J={};d=d(null,{declaredClass:"esri.views.3d.effects.Effect",effectName:"Effect",constructor:function(r){this._view=r.view;this._layerView=r.layerView;this._renderCoordsHelper=r.view.renderCoordsHelper;this._renderSpatialReference=r.view.renderSpatialReference;this._layer=r.layer;this._wgs84SpatialReference=this._layerView._fx3dSpatialReference;this._stateStack=[];this._currentVizPage=0;this._preVizId=
-1;this._repeatCount=0;this._hasSentReady=this._isReachedRepeatLimit=!1;this._vizFieldDefault="default";this._vizFields=r.layer.vizFields;this._vizFieldMinMaxs={};this._vizFieldMinMaxs[this._vizFieldDefault]={min:0,max:0,maxFeature:null};a.forEach(this._vizFields,function(g){this._vizFieldMinMaxs[g]={min:null,max:null,maxFeature:null}}.bind(this));this._eventHandlers=[];this._vizFieldVerTextureSize=A.create();this._vizFieldVerTextures={};this._allLoaded=this._needsAllLoaded=!1;this._material=this._shaderSnippets=
this._gl=null;this._addedGraphicsCount=this._toAddGraphicsIndex=0;this._addedGraphics=[];this._resetState();this._resetTime();this._pause=!1;this._eventHandlers.push(this._layer.watch("pauseTag",function(g,p,x){this.ready&&(this._pause=g,g?g&&(this._pausedTime=this.time):this._lastTime=performance.now())}.bind(this)));this._spin=!1;this._eventHandlers.push(this._layer.watch("spinTag",function(g,p,x){return g&&"local"==this._view.viewingMode?(console.warn("Spinning operation is not supported in local scene."),
void(this._layer.spinTag=!1)):(this._interactionHandlers||(this._interactionHandlers=[],this._stopPropagation=function(m){m["native"].preventDefault();m.stopPropagation()}),1==g?(this._interactionHandlers.push(this._view.on("mouse-wheel",this._stopPropagation)),this._interactionHandlers.push(this._view.on("click",this._stopPropagation)),this._interactionHandlers.push(this._view.on("double-click",this._stopPropagation)),this._interactionHandlers.push(this._view.on("hold",this._stopPropagation)),this._interactionHandlers.push(this._view.on("drag",
this._stopPropagation)),this._interactionHandlers.push(this._view.on("key-down",this._stopPropagation)),this._interactionHandlers.push(this._view.on("key-up",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-down",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-up",this._stopPropagation)),this._interactionHandlers.push(this._view.on("pointer-move",this._stopPropagation))):this._interactionHandlers instanceof Array&&(this._interactionHandlers.forEach(function(m){m&&
(m.remove(),m=null)}),this._interactionHandlers=[]),void(this._spin=g))}.bind(this)));this._addLayerWatchHandler("visible");this.renderingInfo={visible:!0,repeat:5,transparency:100,animationInterval:5};this.renderMaxCountter=this.renderCountter=this.orderId=0},_addLayerWatchHandler:function(r){b.isString(r)&&this._eventHandlers.push(this._layer.watch(r,function(g,p,x){this.renderingInfo[x]=g;"visible"===r.toLowerCase()&&this.ready&&(g?this._lastTime=performance.now():g||(this._pausedTime=this.time))}.bind(this)))},
_resetState:function(){this._pause=this.ready=!1;this._shapeDirty=this._vacDirty=!0;this._isAddingGeometry=!1;this._colorBarDirty=this._colourMapDirty=this._renderingInfoDirty=!0;this._hasSentReady=this._firstAnimatedTo=this._isReachedRepeatLimit=this._shadersReady=!1},_resetTime:function(){this._pausedTime=this.time=this._lastTime=0},_pushState:function(r){for(var g=0;g<this._stateStack.length;g++)if(this._stateStack[g][0]==r[0])return;this._stateStack.push(r)},_restoreState:function(r){for(var g=
0;g<this._stateStack.length;g++)"function"==typeof r[this._stateStack[g][0]]&&r[this._stateStack[g][0]].apply(r,this._stateStack[g][1]instanceof Array?this._stateStack[g][1]:[this._stateStack[g][1]]);this._stateStack=[]},destroy:function(){a.forEach(this._eventHandlers,function(g){"function"==typeof g.remove&&g.remove()||"function"==typeof g.destroy&&g.destroy()});this._eventHandlers=[];this._interactionHandlers instanceof Array&&(a.forEach(this._interactionHandlers,function(g){"function"==typeof g.remove&&
g.remove()||"function"==typeof g.destroy&&g.destroy();g=null}),this._interactionHandlers=[]);this._resetState();this._destroy("_material");var r=Object.getOwnPropertyNames(this._vizFieldVerTextures);a.forEach(r,function(g){this._vizFieldVerTextures[g]instanceof y&&this._vizFieldVerTextures[g].dispose()}.bind(this))},_dispose:function(r){this[r]&&(this[r].dispose(),delete this[r]);this[r]=null},_destroy:function(r){this[r]&&(this[r].destroy(),delete this[r]);this[r]=null},initEffect:function(){this._effectConfig=
t.effectConfig(this.effectName);this._initRenderingInfo(this._effectConfig);var r=this._layer._get("renderingInfo");if(this._layer&&r){var g=Object.getOwnPropertyNames(r),p=Object.getOwnPropertyNames(this.renderingInfo),x=this;a.forEach(g,function(m){p?a.some(p,function(w){if(m.toLowerCase()===w.toLowerCase())return"shapetype"===m.toLowerCase()?x.renderingInfo[w]=r[m].toLowerCase():x.renderingInfo[w]=r[m],!0}):x.renderingInfo[m]=r[m]})}this._renderingInfoChange(this.renderingInfo);this._updateDefaultLabelHeight();
this._eventHandlers.push(this._layer.on("fx3d-add-graphics",function(m){this._needsAllLoaded||this._addGraphicsHandler(m)}.bind(this)));this._eventHandlers.push(this._layer.on("all-features-loaded",function(m){this._needsAllLoaded?(this._addGraphicsHandler(m),this._allLoaded=!0):this._shapeDirty=!0;this._layer.emit("effect-ok-test")}.bind(this)));this._eventHandlers.push(this._layer.on("fx3d-active-viz-field",b.hitch(this,this._activeVizFieldHandler)));this._eventHandlers.push(this._layer.watch("renderingInfo",
this._renderingInfoChange.bind(this)))},_toWGS84Extent:function(r){var g={xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax};return r.spatialReference&&(J.x=r.xmin,J.y=r.ymin,J.z=0,J.spatialReference=r.spatialReference,k.projectPointToVector(J,z,this._wgs84SpatialReference),g.xmin=z[0],g.ymin=z[1],J.x=r.xmax,J.y=r.ymax,k.projectPointToVector(J,z,this._wgs84SpatialReference),g.xmax=z[0],g.ymax=z[1]),g},_calculateExtentCenter:function(r){var g=r.length;if(g){var p,x,m;if("point"==this._layer.geometryType){var w=
p=r[0].geometry.longitude;var D=x=r[0].geometry.latitude;for(m=1;m<g;m++){var M=r[m];null!=M.geometry&&(M.geometry.longitude<w&&(w=M.geometry.longitude),M.geometry.longitude>p&&(p=M.geometry.longitude),M.geometry.latitude<D&&(D=M.geometry.latitude),M.geometry.latitude>x&&(x=M.geometry.latitude))}}else if("polyline"==this._layer.geometryType||"polygon"==this._layer.geometryType){var S=r[0].geometry.extent;w=S.xmin;p=S.xmax;D=S.ymin;x=S.ymax;for(m=1;m<g;m++)M=r[m],null!=M.geometry&&null!=M.geometry.extent&&
(S=M.geometry.extent,S.xmin<w&&(w=S.xmin),S.xmax>p&&(p=S.xmax),S.ymin<D&&(D=S.ymin),S.ymax>x&&(x=S.ymax))}return new c(w,D,p,x,this._wgs84SpatialReference)}return null},_addGraphicsHandler:function(r){b.isArray(r.graphics)&&0<r.graphics.length&&(this._toAddGraphicsIndex=this._addedGraphicsCount,this._addedGraphicsCount+=r.graphics.length,this._needsAllLoaded?this._addedGraphics=r.graphics:this._addedGraphics=this._addedGraphics.concat(r.graphics),this._isAddingGeometry=!0,this._shapeDirty=!0)},_activeVizFieldHandler:function(r){"number"==
typeof r.currentVizPage&&((0>this._currentVizPage||this._currentVizPage>=this._vizFields.length)&&(this._currentVizPage=0),this.ready=!1,this._hasSentReady=!1,this._restoreRenderingInfo(),b.isObject(r.newRenderingInfo)&&b.mixin(this.renderingInfo,r.newRenderingInfo),this._shapeDirty=!1,this._colorBarDirty=!1,this._colourMapDirty=!1,this._renderingInfoChange(this.renderingInfo),this._updateDefaultLabelHeight(),this.update(),this._resetAnimation(),this._currentVizPage=r.currentVizPage,this._updateVizFieldMinMaxToLayer(),
this._layerView._updateSelectedFeatureLabel(),this._emitSyncEvent())},_resetAnimation:function(){this._repeatCount=0;this._preVizId=-1;this._isReachedRepeatLimit=!1;this._resetTime();this._layer.startAnimation()},_resetAddGeometries:function(){this._addedGraphics=[];this._isAddingGeometry=!1},_allGraphics:function(){return this._layerView.getLoadedGraphics()},_renderingInfoChange:function(r,g,p){r!==g&&r&&b.isObject(r)&&this._doRenderingInfoChange(r)},_doRenderingInfoChange:function(r){this._renderingInfoDirty=
!0;for(var g in r)r.hasOwnProperty(g)&&this.renderingInfo.hasOwnProperty(g)&&("visible"===g.toLowerCase()?(this._layer&&(this._layer[g]=r[g]),this.renderingInfo[g]=r[g]):"repeat"!==g.toLowerCase()&&"animationinterval"!==g.toLowerCase()||(this._resetAnimation(),this._clampScope(r,g),this.renderingInfo[g]=r[g]))},_initRenderingInfo:function(r){this._scopes={};r&&b.isObject(r)&&b.isArray(r.renderingInfo)&&a.forEach(r.renderingInfo,function(g){"shapetype"===g.name.toLowerCase()?this.renderingInfo[g.name]=
g.defaultValue.toLowerCase():this.renderingInfo[g.name]=g.defaultValue;b.isArray(g.scope)&&(this._scopes[g.name]=g.scope)}.bind(this))},_restoreRenderingInfo:function(){this.renderingInfo={visible:!0,repeat:5,transparency:100,animationInterval:5};this._initRenderingInfo(this._effectConfig);var r=this._layer._get("renderingInfo");if(this._layer&&r){var g=Object.getOwnPropertyNames(r),p=Object.getOwnPropertyNames(this.renderingInfo),x=this;a.forEach(g,function(m){p?a.some(p,function(w){if(m.toLowerCase()===
w.toLowerCase())return"shapetype"===m.toLowerCase()?x.renderingInfo[w]=r[m].toLowerCase():x.renderingInfo[w]=r[m],!0}):x.renderingInfo[m]=r[m]})}this._updateDefaultLabelHeight()},_clampScope:function(r,g){var p=this._scopes[g];b.isArray(p)&&"number"==typeof r[g]&&"number"==typeof p[0]&&"number"==typeof p[1]&&(r[g]<p[0]?r[g]=p[0]:r[g]>p[1]&&(r[g]=p[1]),0>r[g]&&(r[g]=0))},_updateRenderingInfo:function(){var r=!0;(!this._needsAllLoaded||this._needsAllLoaded&&this._allLoaded)&&0<this._allGraphics().length&&
(this._colorBarDirty?(r=this._initColorBar(),r&&(this._colorBarDirty=!1)):r=!0,this._colourMapDirty&&r?(r=this._initColourMap(),r&&(this._colourMapDirty=!1)):r=!0,r=!(!this._renderingInfoDirty||!r),this._renderingInfoDirty=!r)},_updateRenderingGeometry:function(){var r=!0;(!this._needsAllLoaded||this._needsAllLoaded&&this._allLoaded)&&0<this._allGraphics().length&&(r=this._initRenderContext(),r?(r=this._initVizFieldVertextures(),r&&this._layer.emit("can-locating-now"),this._shapeDirty=!r):(console.error("this._initRenderContext() FALSE"),
this._shapeDirty=!0),!0===this._shapeDirty&&(this._isAddingGeometry=!1))},_emitSyncEvent:function(){this._layer&&0<this._repeatCount&&(0>=this.renderingInfo.repeat||0<this.renderingInfo.repeat&&this._repeatCount<=this.renderingInfo.repeat)&&this._layer.emit("sync-viz-timer",{vizPage:this._currentVizPage,repeat:this._repeatCount})},_calculateRepeatCount:function(){n=Math.floor(this.time/this.renderingInfo.animationInterval);this._preVizId!==n&&(this._repeatCount++,this._preVizId=n,this._emitSyncEvent())},
_updateVizPage:function(){0<this.renderingInfo.repeat?this._repeatCount<=this.renderingInfo.repeat?this._calculateRepeatCount():this._isReachedRepeatLimit||(this._isReachedRepeatLimit=!0,this._layer.pauseAnimation(),this._layer.emit("reached-repeat-limit")):0>this.renderingInfo.repeat?(this._calculateRepeatCount(),this._isReachedRepeatLimit&&(this._isReachedRepeatLimit=!1)):this._isReachedRepeatLimit||(this._isReachedRepeatLimit=!0)},setupEffect:function(r){this._gl=r.gl;this._shaderSnippets=r.shaderSnippets;
this._vaoExt=r.vaoExt;this._shadersReady=this._loadShaders();this._vizFieldVerTextures[this._vizFieldDefault]=new y(this._gl);a.forEach(this._vizFields,function(g){this._vizFieldVerTextures[g]=new y(this._gl)}.bind(this))},update:function(){var r=!1;return this.renderingInfo.visible&&this._shadersReady?(this._renderingInfoDirty&&(this._updateRenderingInfo(),r=!0),this._shapeDirty&&(this._updateRenderingGeometry(),r=!0),this._renderingInfoDirty||this._shapeDirty||!this._shadersReady?this.ready=!1:
this.ready=!0,this._updateSelfTime(),this._updateVizPage(),this._spin&&this._doSpin(),r):r},render:function(r,g){r.time=this.time;r.reachedRepeatLimit=this._isReachedRepeatLimit},_doSpin:function(){F=this._view.camera.position;H=e.webMercatorToGeographic(F);K=H.x-1;-180>=K&&(K=179);q=F.z;8E6>q&&(q=8E6);this._view.goTo({position:[K,0,q],tilt:0,heading:0})},_bindPramsReady:function(){return 0<=this._currentVizPage&&this._currentVizPage<Object.getOwnPropertyNames(this._vizFieldMinMaxs).length&&this._currentVizPage<
Object.getOwnPropertyNames(this._vizFieldVerTextures).length},_updateSelfTime:function(){this.ready&&!this._pause&&(0!==this._lastTime?this.time=this._pausedTime+.001*(performance.now()-this._lastTime):(this._lastTime=performance.now(),this.time=0))},_loadShaders:function(){return!1},_initVertexLayout:function(){return!0},_initRenderContext:function(){return!0},_initVizFieldVertextures:function(){var r=this._allGraphics();if(0<r.length){console.log("_initVizFieldVertextures \x3d\x3d\x3e graphics.length \x3d\x3d\x3e "+
r.length);var g=this._gl.getParameter(3379),p=r.length,x=t.nextHighestPowerOfTwo(p);x>g&&(x=g,console.warn("Too many graphics, and extra features will be discarded."));var m=Math.ceil(p/x);m=t.nextHighestPowerOfTwo(m);m>g&&(m=g,console.warn("Too many graphics, and extra features will be discarded."));this._vizFieldVerTextures[this._vizFieldDefault].initTexture(x,m,new Float32Array(x*m*4));var w,D,M,S;return a.forEach(this._vizFields,function(V){var B=new Float32Array(x*m*4);this._vizFieldVerTextures[V].initTexture(x,
m,B);(D=r[0].attributes[V])||(D=0);(!D||"number"!=typeof D||0>D)&&(D=0);M=S=D;for(var P=r[0],E=0;E<r.length;E++)w=r[E].attributes,D=w[V],(!D||"number"!=typeof D||0>D)&&(D=0),B[4*E]=D,S<D&&(S=D,P=r[E]),M>D&&(M=D);console.log("set his._vizFieldVerTextures "+V);this._vizFieldVerTextures[V].updateTexture(B);this._vizFieldMinMaxs[V].min=M;this._vizFieldMinMaxs[V].max=S;this._vizFieldMinMaxs[V].maxFeature=P;this._updateVizFieldMinMaxToLayer()}.bind(this)),v.set(this._vizFieldVerTextureSize,x,m),!0}return!1},
syncVizFieldVertextures:function(){return 0<this._allGraphics().length&&(this._vizFieldVerTextures[this._vizFieldDefault].syncData(),a.forEach(this._vizFields,function(r){console.log("set his._vizFieldVerTextures "+r);this._vizFieldVerTextures[r].syncData()}.bind(this)),!0)},_updateVizFieldMinMaxToLayer:function(){this._layer._currentVizPage=this._currentVizPage;this._layer._currentVizFieldMinMax=this._vizFieldMinMaxs[this._vizFields[this._currentVizPage]]},_initColourMap:function(){return!0},_initColorBar:function(){return!0},
_updateDefaultLabelHeight:function(){}});return d.createLocalOriginFactory=function(){return new G.GridLocalOriginFactory},d})},"esri/core/libs/gl-matrix-2/vec2f64":function(){define(["exports","../../../chunks/vec2f64"],function(b,a){b.vec2f64=a.vec2f64;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/vec2":function(){define(["exports","../../../chunks/vec2"],function(b,a){b.vec2=a.vec2;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/GridLocalOriginFactory":function(){define("exports ../../../../core/uid ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/projection/projectBuffer ./Attribute ./ContentObjectType ./Geometry ./LocalOriginFactory ./Object3D ./testUtils ./VertexAttribute ./WebGLLayer ../materials/RibbonLineMaterial".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K){class q{constructor(A){this._originSR=A;this._rootOriginId="root/"+a.generateUID();this._origins=new Map;this._objects=new Map;this._gridSize=5E5}getOrigin(A){var z=this._origins.get(this._rootOriginId);if(null==z){z=t.gridLocalOriginFactory.rootOrigin;if(null!=z)return this._origins.set(this._rootOriginId,k.fromValues(z[0],z[1],z[2],this._rootOriginId)),this.getOrigin(A);A=k.fromValues(A[0]+Math.random()-.5,A[1]+Math.random()-.5,A[2]+Math.random()-.5,this._rootOriginId);
this._origins.set(this._rootOriginId,A);return A}var J=this._gridSize;const r=Math.round(A[0]/J),g=Math.round(A[1]/J),p=Math.round(A[2]/J),x=`${r}/${g}/${p}`;let m=this._origins.get(x);const w=.5*J;d.subtract(n,A,z.vec3);n[0]=Math.abs(n[0]);n[1]=Math.abs(n[1]);n[2]=Math.abs(n[2]);if(n[0]<w&&n[1]<w&&n[2]<w)return m&&(J=Math.max(...n),d.subtract(n,A,m.vec3),n[0]=Math.abs(n[0]),n[1]=Math.abs(n[1]),n[2]=Math.abs(n[2]),Math.max(...n)<J)?m:z;m||(m=k.fromValues(r*J,g*J,p*J,x),this._origins.set(x,m));return m}_drawOriginBox(A,
z=c.fromValues(1,1,0,1)){const J=window.view,r=J._stage;var g=z.toString();if(!this._objects.has(g)){this._material=new K.RibbonLineMaterial({width:2,color:z});r.add(this._material);z=new H.WebGLLayer(r,{pickable:!1});var p=new y.Object3D({castShadow:!1});r.add(p);z.add(p);this._objects.set(g,p)}g=this._objects.get(g);z=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0];p=z.length;const x=Array(3*p),m=[],w=.5*this._gridSize;for(let D=0;D<p;D++)x[3*D]=A[0]+(z[D]&1?w:-w),x[3*D+1]=A[1]+(z[D]&2?w:-w),x[3*D+2]=A[2]+
(z[D]&4?w:-w),0<D&&m.push(D-1,D);f.projectBuffer(x,this._originSR,0,x,J.renderSpatialReference,0,p);A=new G.Geometry(this._material,[[F.VertexAttribute.POSITION,new h.Attribute(x,m,3,!0)]],null,v.ContentObjectType.Line);r.add(A);g.addGeometry(A)}get test(){const A=this;return{set gridSize(z){A._gridSize=z}}}}const n=e.create();b.GridLocalOriginFactory=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Attribute":function(){define(["exports"],function(b){class a{constructor(e,
c,f=c){this.data=e;this.size=c;this.stride=f}}class d extends a{constructor(e,c,f,h=!1,v=f){super(e,f,v);this.indices=c;this.exclusive=h}}b.Attribute=d;b.Vertices=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/ContentObjectType":function(){define(["exports"],function(b){b.ContentObjectType=void 0;var a=b.ContentObjectType||(b.ContentObjectType={});a[a.Layer=0]="Layer";a[a.Object=1]="Object";a[a.Mesh=2]="Mesh";a[a.Line=3]="Line";a[a.Point=4]="Point";
a[a.Material=5]="Material";a[a.Texture=6]="Texture";a[a.COUNT=7]="COUNT";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Geometry":function(){define("exports ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../geometry/support/Indices ./AttributeArray ./basicInterfaces ./BoundingInfo ./ContentObject ./ContentObjectType ./geometryDataUtils ./Object3DStateID ./Util ./VertexAttribute ../materials/renderers/utils".split(" "),function(b,a,d,e,
c,f,h,v,G,k,y,t,F,H){class K extends v.ContentObject{constructor(q,n,A=null,z=G.ContentObjectType.Mesh,J=null,r=-1){super();this.material=q;this.mapPositions=A;this.type=z;this.objectAndLayerIdColor=J;this.edgeIndicesLength=r;this.visible=!0;this._attributes=new Map;this._boundingInfo=null;for(const [g,p]of n)this._attributes.set(g,{...p,indices:e.compactIndices(p.indices)}),g===F.VertexAttribute.POSITION&&(this.edgeIndicesLength=0>this.edgeIndicesLength?this._attributes.get(g).indices.length:this.edgeIndicesLength)}instantiate(q=
{}){const n=new K(q.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);this._attributes.forEach((A,z)=>{A.exclusive=!1;n._attributes.set(z,A)});n._boundingInfo=this._boundingInfo;n.transformation=q.transformation||this.transformation;return n}get attributes(){return this._attributes}getMutableAttribute(q){let n=this._attributes.get(q);n&&!n.exclusive&&(n={...n,exclusive:!0,data:c.cloneAttributeData(n.data)},this._attributes.set(q,n));return n}setAttributeData(q,
n){const A=this._attributes.get(q);A&&this._attributes.set(q,{...A,exclusive:!0,data:n})}get indexCount(){return this._attributes.values().next().value.indices?.length??0}get faceCount(){return this.indexCount/3}get boundingInfo(){null==this._boundingInfo&&(this._boundingInfo=this._calculateBoundingInfo());return this._boundingInfo}computeAttachmentOrigin(q){return(this.type===G.ContentObjectType.Mesh?this._computeAttachmentOriginTriangles(q):this.type===G.ContentObjectType.Line?this._computeAttachmentOriginLines(q):
this._computeAttachmentOriginPoints(q))?(null!=this._transformation&&d.transformMat4(q,q,this._transformation),!0):!1}_computeAttachmentOriginTriangles(q){const n=this.attributes.get(F.VertexAttribute.POSITION);return k.computeAttachmentOriginTriangles(n,q)}_computeAttachmentOriginLines(q){const n=this.attributes.get(F.VertexAttribute.POSITION);var A=k.computeAttachmentOriginLines;var z=this.material.parameters;z="isClosed"in z&&z.isClosed?2<n.indices.length:!1;return A.call(k,n,z,q)}_computeAttachmentOriginPoints(q){const n=
this.attributes.get(F.VertexAttribute.POSITION);return k.computeAttachmentOriginPoints(n,q)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const q=this.attributes.get(F.VertexAttribute.POSITION);if(!q||0===q.indices.length)return null;const n=this.type===G.ContentObjectType.Mesh?3:1;t.assert(0===q.indices.length%n,"Indexing error: "+q.indices.length+" not divisible by "+n);const A=e.getContinuousIndexArray(q.indices.length/n);return new h.BoundingInfo(A,n,q)}get transformation(){return this._transformation??
a.IDENTITY}set transformation(q){this._transformation=q&&q!==a.IDENTITY?a.clone(q):null}addHighlight(){const q=new y.Object3DStateID(f.Object3DState.Highlight);this.highlights=H.addObject3DStateID(this.highlights,q);return q}removeHighlight(q){this.highlights=H.removeObject3DStateID(this.highlights,q)}}b.Geometry=K;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/Indices":function(){define(["exports","../../core/typedArrayUtil"],function(b,a){function d(k){let y=
!0;for(const t of k){if(65536<=t)return a.isArray(k)?new Uint32Array(k):k;256<=t&&(y=!1)}return y?new Uint8Array(k):new Uint16Array(k)}function e(k){if(1===k)return h;if(k<a.nativeArrayMaxSize)return Array.from(new Uint16Array(v.buffer,0,k));if(k<v.length)return new Uint16Array(v.buffer,0,k);if(k>f.length){f=new Uint32Array(Math.max(2*f.length,k));for(let y=0;y<f.length;y++)f[y]=y}return new Uint32Array(f.buffer,0,k)}function c(k){if(1===k)return h;if(k<a.nativeArrayMaxSize)return Array(k).fill(0);
k>G.length&&(G=new Uint8Array(Math.max(2*G.length,k)));return new Uint8Array(G.buffer,0,k)}let f=(()=>{const k=new Uint32Array(131072);for(let y=0;y<k.length;++y)k[y]=y;return k})();const h=[0],v=(()=>{const k=new Uint16Array(65536);for(let y=0;y<k.length;++y)k[y]=y;return k})();let G=new Uint8Array(65536);b.compactIndices=function(k){if(a.isArray(k)){if(k.length<a.nativeArrayMaxSize)return k}else if(k.length<a.nativeArrayMaxSize)return Array.from(k);let y=!0,t=!0;k.some((F,H)=>{y=y&&0===F;t=t&&F===
H;return!y&&!t});return y?c(k.length):t?e(k.length):a.isArray(k)||k.BYTES_PER_ELEMENT!==Uint16Array.BYTES_PER_ELEMENT?d(k):k};b.getContinuousIndexArray=e;b.getZeroIndexArray=c;b.newIndexArray=function(k){return k<=a.nativeArrayMaxSize?Array(k):65536>=k?new Uint16Array(k):new Uint32Array(k)};b.newIntArray=function(k){return k<=a.nativeArrayMaxSize?Array(k):new Uint32Array(k)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/AttributeArray":function(){define(["exports",
"../../../../core/typedArrayUtil"],function(b,a){b.cloneAttributeData=function(d){if(d.length<a.nativeArrayMaxSize)return Array.from(d);if(a.isArray(d))return Float64Array.from(d);if(!("BYTES_PER_ELEMENT"in d))return Array.from(d);switch(d.BYTES_PER_ELEMENT){case 1:return Uint8Array.from(d);case 2:return a.isUint16Array(d)?Uint16Array.from(d):Int16Array.from(d);case 4:return Float32Array.from(d);default:case 8:return Float64Array.from(d)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/lib/basicInterfaces":function(){define(["exports"],function(b){b.CullFaceOptions=void 0;(function(a){a[a.None=0]="None";a[a.Front=1]="Front";a[a.Back=2]="Back";a[a.COUNT=3]="COUNT"})(b.CullFaceOptions||(b.CullFaceOptions={}));b.DepthTestFunction=void 0;(function(a){a[a.Less=0]="Less";a[a.Lequal=1]="Lequal";a[a.COUNT=2]="COUNT"})(b.DepthTestFunction||(b.DepthTestFunction={}));b.RenderRequestType=void 0;(function(a){a[a.BACKGROUND=0]="BACKGROUND";a[a.UPDATE=1]="UPDATE"})(b.RenderRequestType||
(b.RenderRequestType={}));b.ResourceState=void 0;(function(a){a[a.NOT_LOADED=0]="NOT_LOADED";a[a.LOADING=1]="LOADING";a[a.LOADED=2]="LOADED"})(b.ResourceState||(b.ResourceState={}));b.StencilBits=void 0;(function(a){a[a.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded";a[a.OutlineVisualElementMask=2]="OutlineVisualElementMask"})(b.StencilBits||(b.StencilBits={}));b.Object3DState=void 0;(function(a){a[a.Highlight=0]="Highlight";a[a.MaskOccludee=1]="MaskOccludee";a[a.COUNT=2]="COUNT"})(b.Object3DState||
(b.Object3DState={}));b.AlphaDiscardMode=void 0;(function(a){a[a.Blend=0]="Blend";a[a.Opaque=1]="Opaque";a[a.Mask=2]="Mask";a[a.MaskBlend=3]="MaskBlend";a[a.COUNT=4]="COUNT"})(b.AlphaDiscardMode||(b.AlphaDiscardMode={}));b.Decorations=void 0;(function(a){a[a.OFF=0]="OFF";a[a.ON=1]="ON"})(b.Decorations||(b.Decorations={}));b.TextureEncodingMimeType=void 0;(function(a){a.DDS_ENCODING="image/vnd-ms.dds";a.KTX2_ENCODING="image/ktx2";a.BASIS_ENCODING="image/x.basis"})(b.TextureEncodingMimeType||(b.TextureEncodingMimeType=
{}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define(["exports","../../../../core/PooledArray","../../../../chunks/vec3","../../../../chunks/vec3f64","./Util"],function(b,a,d,e,c){class f{constructor(v,G,k){this.primitiveIndices=v;this._numIndexPerPrimitive=G;this.position=k;this._children=void 0;c.assert(1<=v.length);c.assert(3===k.size||4===k.size);const {data:y,size:t,indices:F}=k;c.assert(0===F.length%this._numIndexPerPrimitive);
c.assert(F.length>=v.length*this._numIndexPerPrimitive);var H=v.length;G=t*F[this._numIndexPerPrimitive*v[0]];h.clear();h.push(G);k=e.fromValues(y[G],y[G+1],y[G+2]);var K=e.clone(k);for(var q=0;q<H;++q){var n=this._numIndexPerPrimitive*v[q];for(var A=0;A<this._numIndexPerPrimitive;++A){G=t*F[n+A];h.push(G);let z=y[G];k[0]=Math.min(z,k[0]);K[0]=Math.max(z,K[0]);z=y[G+1];k[1]=Math.min(z,k[1]);K[1]=Math.max(z,K[1]);z=y[G+2];k[2]=Math.min(z,k[2]);K[2]=Math.max(z,K[2])}}this.bbMin=k;this.bbMax=K;v=d.lerp(e.create(),
this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(K[0]-k[0],K[1]-k[1]),K[2]-k[2]);k=this.radius*this.radius;for(K=0;K<h.length;++K)G=h.at(K),H=y[G]-v[0],q=y[G+1]-v[1],G=y[G+2]-v[2],n=H*H+q*q+G*G,n<=k||(n=Math.sqrt(n),A=.5*(n-this.radius),this.radius+=A,k=this.radius*this.radius,n=A/n,v[0]+=H*n,v[1]+=q*n,v[2]+=G*n);this.center=v;h.clear()}getChildren(){if(this._children||1>=d.squaredDistance(this.bbMin,this.bbMax))return this._children;var v=d.lerp(e.create(),this.bbMin,this.bbMax,.5),G=this.primitiveIndices.length;
const k=new Uint8Array(G),y=Array(8);for(var t=0;8>t;++t)y[t]=0;const {data:F,size:H,indices:K}=this.position;for(t=0;t<G;++t){var q=0;const A=this._numIndexPerPrimitive*this.primitiveIndices[t];var n=H*K[A];let z=F[n],J=F[n+1],r=F[n+2];for(let g=1;g<this._numIndexPerPrimitive;++g){n=H*K[A+g];const p=F[n],x=F[n+1];n=F[n+2];p<z&&(z=p);x<J&&(J=x);n<r&&(r=n)}z<v[0]&&(q|=1);J<v[1]&&(q|=2);r<v[2]&&(q|=4);k[t]=q;++y[q]}v=0;for(t=0;8>t;++t)0<y[t]&&++v;if(!(2>v)){v=Array(8);for(t=0;8>t;++t)v[t]=0<y[t]?new Uint32Array(y[t]):
void 0;for(t=0;8>t;++t)y[t]=0;for(t=0;t<G;++t)q=k[t],v[q][y[q]++]=this.primitiveIndices[t];this._children=[];for(G=0;8>G;++G)void 0!==v[G]&&this._children.push(new f(v[G],this._numIndexPerPrimitive,this.position));return this._children}}static prune(){h.prune()}}const h=new a({deallocator:null});b.BoundingInfo=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports","../../../../core/uid"],function(b,a){class d{constructor(){this.id=
a.generateUID()}}b.ContentObject=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["exports","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../geometry/support/triangle"],function(b,a,d,e){const c=d.create(),f=d.create(),h=d.create(),v=d.create();b.computeAttachmentOriginLines=function(G,k,y){if(!G)return!1;a.set(y,0,0,0);a.set(v,0,0,0);let t=0,F=0;const {size:H,data:K,indices:q}=G;G=q.length-1;
k=G+(k?2:0);for(let A=0;A<k;A+=2){var n=q[A<G?A:G]*H;const z=q[A<G?A+1:0]*H;c[0]=K[n];c[1]=K[n+1];c[2]=K[n+2];f[0]=K[z];f[1]=K[z+1];f[2]=K[z+2];a.scale(c,a.add(c,c,f),.5);n=a.dist(c,f);0<n?(a.add(y,y,a.scale(c,c,n)),t+=n):0===t&&(a.add(v,v,c),F++)}return 0!==t?(a.scale(y,y,1/t),!0):0!==F?(a.scale(y,v,1/F),!0):!1};b.computeAttachmentOriginPoints=function(G,k){if(!G)return!1;const {size:y,data:t,indices:F}=G;a.set(k,0,0,0);G=-1;let H=0;for(let K=0;K<F.length;K++){const q=F[K]*y;G!==q&&(k[0]+=t[q],k[1]+=
t[q+1],k[2]+=t[q+2],H++);G=q}1<H&&a.scale(k,k,1/H);return 0<H};b.computeAttachmentOriginTriangles=function(G,k){if(!G)return!1;const {size:y,data:t,indices:F}=G;a.set(k,0,0,0);a.set(v,0,0,0);let H=G=0;for(let q=0;q<F.length-2;q+=3){var K=F[q]*y;const n=F[q+1]*y,A=F[q+2]*y;a.set(c,t[K],t[K+1],t[K+2]);a.set(f,t[n],t[n+1],t[n+2]);a.set(h,t[A],t[A+1],t[A+2]);(K=e.areaPoints3d(c,f,h))?(a.add(c,c,f),a.add(c,c,h),a.scale(c,c,1/3*K),a.add(k,k,c),G+=K):(a.add(v,v,c),a.add(v,v,f),a.add(v,v,h),H+=3)}return 0===
H&&0===G?!1:0!==G?(a.scale(k,k,1/G),!0):0!==H?(a.scale(k,v,1/H),!0):!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/triangle":function(){define("exports ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./lineSegment ./vectorStacks".split(" "),function(b,a,d,e,c,f){function h(H){return H?{p0:e.clone(H.p0),p1:e.clone(H.p1),p2:e.clone(H.p2)}:{p0:e.create(),p1:e.create(),p2:e.create()}}function v(H,K,q,n=h()){d.copy(n.p0,H);d.copy(n.p1,K);d.copy(n.p2,
q);return n}function G(H,K,q){return.5*Math.abs((K[0]-H[0])*(q[1]-H[1])-(K[1]-H[1])*(q[0]-H[0]))}const k=new a.ObjectStack(c.create),y=new a.ObjectStack(()=>h()),t=e.create(),F=e.create();b.area2d=function(H){return G(H.p0,H.p1,H.p2)};b.areaPoints2d=G;b.areaPoints3d=function(H,K,q){d.subtract(t,K,H);d.subtract(F,q,H);return d.length(d.cross(t,t,F))/2};b.copy=function(H,K=h()){return v(H.p0,H.p1,H.p2,K)};b.create=h;b.distance2=function(H,K){var q=H.p0,n=H.p1;H=H.p2;const A=d.subtract(f.sv3d.get(),
n,q),z=d.subtract(f.sv3d.get(),H,n),J=d.subtract(f.sv3d.get(),q,H),r=d.subtract(f.sv3d.get(),K,q);var g=d.subtract(f.sv3d.get(),K,n),p=d.subtract(f.sv3d.get(),K,H);const x=d.cross(A,A,J),m=d.dot(d.cross(f.sv3d.get(),A,x),r);g=d.dot(d.cross(f.sv3d.get(),z,x),g);p=d.dot(d.cross(f.sv3d.get(),J,x),p);if(0<m&&0<g&&0<p)return K=d.dot(x,r),K*K/d.dot(x,x);q=c.distance2(c.fromValues(q,A,k.get()),K);n=c.distance2(c.fromValues(n,z,k.get()),K);K=c.distance2(c.fromValues(H,J,k.get()),K);return Math.min(q,n,K)};
b.fromValues=v;b.intersectRay=function(H,K,q){const {direction:n,origin:A}=K,{p0:z,p1:J,p2:r}=H;var g=J[0]-z[0],p=J[1]-z[1],x=J[2]-z[2];H=r[0]-z[0];K=r[1]-z[1];const m=r[2]-z[2];var w=n[1]*m-K*n[2],D=n[2]*H-m*n[0];const M=n[0]*K-H*n[1];var S=g*w+p*D+x*M;if(-1E-5<S&&1E-5>S)return!1;S=1/S;const V=A[0]-z[0],B=A[1]-z[1],P=A[2]-z[2];w=S*(V*w+B*D+P*M);if(0>w||1<w)return!1;D=B*x-p*P;x=P*g-x*V;g=V*p-g*B;p=S*(n[0]*D+n[1]*x+n[2]*g);if(0>p||1<w+p)return!1;q&&(d.scale(q,n,S*(H*D+K*x+m*g)),d.add(q,A,q));return!0};
b.wrap=function(H,K,q){const n=y.get();n.p0=H;n.p1=K;n.p2=q;return n};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/lineSegment":function(){define("exports ../../core/mathUtils ../../core/ObjectStack ../../chunks/vec3 ../../chunks/vec3f64 ./vectorStacks".split(" "),function(b,a,d,e,c,f){function h(K){return K?{origin:c.clone(K.origin),vector:c.clone(K.vector)}:{origin:c.create(),vector:c.create()}}function v(K,q){const n=H.get();n.origin=K;n.vector=q;return n}
function G(K,q,n=h()){e.copy(n.origin,K);e.copy(n.vector,q);return n}function k(K,q){q=e.subtract(f.sv3d.get(),q,K.origin);var n=e.dot(K.vector,q);const A=e.dot(K.vector,K.vector);n=a.clamp(n/A,0,1);K=e.subtract(f.sv3d.get(),e.scale(f.sv3d.get(),K.vector,n),q);return e.dot(K,K)}function y(K,q,n,A,z){const {vector:J,origin:r}=K;q=e.subtract(f.sv3d.get(),q,r);q=e.dot(J,q)/e.squaredLength(J);e.scale(z,J,a.clamp(q,n,A));return e.add(z,z,K.origin)}function t(K,q,n,A){const z=K.origin;var J=e.add(f.sv3d.get(),
z,K.vector);K=q.origin;var r=e.add(f.sv3d.get(),K,q.vector),g=f.sv3d.get();q=f.sv3d.get();g[0]=z[0]-K[0];g[1]=z[1]-K[1];g[2]=z[2]-K[2];q[0]=r[0]-K[0];q[1]=r[1]-K[1];q[2]=r[2]-K[2];if(1E-6>Math.abs(q[0])&&1E-6>Math.abs(q[1])&&1E-6>Math.abs(q[2]))return!1;r=f.sv3d.get();r[0]=J[0]-z[0];r[1]=J[1]-z[1];r[2]=J[2]-z[2];if(1E-6>Math.abs(r[0])&&1E-6>Math.abs(r[1])&&1E-6>Math.abs(r[2]))return!1;J=g[0]*q[0]+g[1]*q[1]+g[2]*q[2];var p=q[0]*r[0]+q[1]*r[1]+q[2]*r[2];const x=q[0]*q[0]+q[1]*q[1]+q[2]*q[2],m=(r[0]*
r[0]+r[1]*r[1]+r[2]*r[2])*x-p*p;if(1E-6>Math.abs(m))return!1;g=(J*p-(g[0]*r[0]+g[1]*r[1]+g[2]*r[2])*x)/m;J=(J+p*g)/x;n&&(g=a.clamp(g,0,1),J=a.clamp(J,0,1));n=f.sv3d.get();p=f.sv3d.get();n[0]=z[0]+g*r[0];n[1]=z[1]+g*r[1];n[2]=z[2]+g*r[2];p[0]=K[0]+J*q[0];p[1]=K[1]+J*q[1];p[2]=K[2]+J*q[2];A.tA=g;A.tB=J;A.pA=n;A.pB=p;A.distance2=e.squaredDistance(n,p);return!0}const F={tA:0,tB:0,pA:c.create(),pB:c.create(),distance2:0},H=new d.ObjectStack(()=>h());b.closestLineSegmentDistance2=function(K,q){return t(K,
q,!0,F)?F.distance2:null};b.closestLineSegmentPoint=function(K,q,n){return t(K,q,!0,F)?(e.copy(n,F.pA),!0):!1};b.closestRayDistance2=function(K,q){if(t(K,v(q.origin,q.direction),!1,F)){const {tA:n,pB:A,distance2:z}=F;if(0<=n&&1>=n)return z;if(0>n)return e.squaredDistance(K.origin,A);if(1<n)return e.squaredDistance(e.add(f.sv3d.get(),K.origin,K.vector),A)}return null};b.copy=function(K,q=h()){return G(K.origin,K.vector,q)};b.create=h;b.distance=function(K,q){return Math.sqrt(k(K,q))};b.distance2=k;
b.fromPoints=function(K,q,n=h()){e.copy(n.origin,K);e.subtract(n.vector,q,K);return n};b.fromValues=G;b.pointAt=function(K,q,n){return e.add(n,K.origin,e.scale(n,K.vector,q))};b.projectPoint=function(K,q,n){return y(K,q,0,1,n)};b.projectPointClamp=y;b.wrap=v;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports","../../../../core/uid"],function(b,a){class d{constructor(e){this.channel=e;this.id=a.generateUID()}}
b.Object3DStateID=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/VertexAttribute":function(){define(["exports"],function(b){b.VertexAttribute=void 0;(function(a){a.POSITION="position";a.NORMAL="normal";a.NORMALCOMPRESSED="normalCompressed";a.UV0="uv0";a.AUXPOS1="auxpos1";a.AUXPOS2="auxpos2";a.COLOR="color";a.SYMBOLCOLOR="symbolColor";a.SIZE="size";a.TANGENT="tangent";a.OFFSET="offset";a.PERSPECTIVEDIVIDE="perspectiveDivide";a.SUBDIVISIONFACTOR="subdivisionFactor";
a.COLORFEATUREATTRIBUTE="colorFeatureAttribute";a.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute";a.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute";a.DISTANCETOSTART="distanceToStart";a.UVMAPSPACE="uvMapSpace";a.BOUNDINGRECT="boundingRect";a.UVREGION="uvRegion";a.PROFILERIGHT="profileRight";a.PROFILEUP="profileUp";a.PROFILEVERTEXANDNORMAL="profileVertexAndNormal";a.FEATUREVALUE="featureValue";a.INSTANCEMODELORIGINHI="instanceModelOriginHi";a.INSTANCEMODELORIGINLO="instanceModelOriginLo";a.INSTANCEMODEL=
"instanceModel";a.INSTANCEMODELNORMAL="instanceModelNormal";a.INSTANCECOLOR="instanceColor";a.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute";a.LOCALTRANSFORM="localTransform";a.GLOBALTRANSFORM="globalTransform";a.BOUNDINGSPHERE="boundingSphere";a.MODELORIGIN="modelOrigin";a.MODELSCALEFACTORS="modelScaleFactors";a.FEATUREATTRIBUTE="featureAttribute";a.STATE="state";a.LODLEVEL="lodLevel";a.POSITION0="position0";a.POSITION1="position1";a.NORMALA="normalA";a.NORMALB="normalB";a.COMPONENTINDEX="componentIndex";
a.VARIANTOFFSET="variantOffset";a.VARIANTSTROKE="variantStroke";a.VARIANTEXTENSION="variantExtension";a.SIDENESS="sideness";a.START="start";a.END="end";a.UP="up";a.EXTRUDE="extrude";a.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor";a.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"})(b.VertexAttribute||(b.VertexAttribute={}));b.affectsGeometry=function(a){return a===b.VertexAttribute.POSITION};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define(["exports",
"../../../../../chunks/vec3f64","../../../../webgl/doublePrecisionUtils"],function(b,a,d){const e=a.create(),c=new Float32Array(6);b.addObject3DStateID=function(f,h){null==f&&(f=[]);f.push(h);return f};b.encodeDoubleVec3=function(f,h,v,G,k){e[0]=f.get(h,0);e[1]=f.get(h,1);e[2]=f.get(h,2);d.encodeDoubleArray(e,c,3);v.set(k,0,c[0]);G.set(k,0,c[1]);v.set(k,1,c[2]);G.set(k,1,c[3]);v.set(k,2,c[4]);G.set(k,2,c[5])};b.removeObject3DStateID=function(f,h){if(null==f)return null;f=f.filter(v=>v!==h);return 0===
f.length?null:f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/doublePrecisionUtils":function(){define(["exports"],function(b){const a=new Float32Array(2);b.decodeDoubleArray=function(d,e,c){for(let f=0;f<c;++f)e[f]=d[2*f]+d[2*f+1]};b.encodeDoubleArray=function(d,e,c){for(let f=0;f<c;++f)e[2*f]=d[f],e[2*f+1]=d[f]-e[2*f]};b.encodeDoubleHi=function(d,e){const c=d.length;for(let f=0;f<c;++f)a[0]=d[f],e[f]=a[0];return e};b.encodeDoubleLo=function(d,e){const c=d.length;
for(let f=0;f<c;++f)a[0]=d[f],a[1]=d[f]-a[0],e[f]=a[1];return e};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/LocalOriginFactory":function(){define(["exports","../../../../chunks/vec3f64"],function(b,a){class d{constructor(e,c){this.vec3=e;this.id=c}}b.LocalOrigin=d;b.fromValues=function(e,c,f,h){return new d(a.fromValues(e,c,f),h)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("exports ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/sphere ../../support/mathUtils ./basicInterfaces ./ContentObject ./ContentObjectType ./Object3DStateID ./Util ./VertexAttribute ../materials/renderers/utils".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H){class K extends G.ContentObject{get geometries(){return this._geometries}get transformation(){return this._transformation??d.IDENTITY}set transformation(p){this._transformation=a.copy(this._transformation??d.create(),p);this._invalidateBoundingVolume();this._emit("transformationChanged",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(p){this._shaderTransformation=p?a.copy(this._shaderTransformation??d.create(),p):null;
this._invalidateBoundingVolume();this._emit("shaderTransformationChanged",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}constructor(p={}){super();this.type=k.ContentObjectType.Object;this._parentLayer=this._shaderTransformation=null;this._visible=!0;this.castShadow=p.castShadow??!0;this.usesVerticalDistanceToGround=p.usesVerticalDistanceToGround??!1;this.graphicUid=p.graphicUid;this.layerUid=p.layerUid;p.isElevationSource&&(this.lastValidElevationBB=new q);
this._geometries=p.geometries?Array.from(p.geometries):[]}dispose(){this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(p){t.assert(null==this._parentLayer||null==p,"Object3D can only be added to a single Layer");this._parentLayer=p}addGeometry(p){p.visible=this._visible;this._geometries.push(p);this._emit("geometryAdded",{object:this,geometry:p});this._invalidateBoundingVolume()}removeGeometry(p){if(p=this._geometries.splice(p,1)[0])this._emit("geometryRemoved",{object:this,
geometry:p}),this._invalidateBoundingVolume()}removeAllGeometries(){for(;0<this._geometries.length;)this.removeGeometry(0)}geometryVertexAttributeUpdated(p,x,m=!1){this._emit("attributesChanged",{object:this,geometry:p,attribute:x,sync:m});F.affectsGeometry(x)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(p){if(this._visible!==p){this._visible=p;for(const x of this._geometries)x.visible=this._visible;this._emit("visibilityChanged",this)}}maskOccludee(){const p=new y.Object3DStateID(v.Object3DState.MaskOccludee);
for(const x of this._geometries)x.occludees=H.addObject3DStateID(x.occludees,p);this._emit("occlusionChanged",this);return p}removeOcclude(p){for(const x of this._geometries)x.occludees=H.removeObject3DStateID(x.occludees,p);this._emit("occlusionChanged",this)}highlight(){const p=new y.Object3DStateID(v.Object3DState.Highlight);for(const x of this._geometries)x.highlights=H.addObject3DStateID(x.highlights,p);this._emit("highlightChanged",this);return p}removeHighlight(p){for(const x of this._geometries)x.highlights=
H.removeObject3DStateID(x.highlights,p);this._emit("highlightChanged",this)}getCombinedStaticTransformation(p,x){return a.multiply(x,this.transformation,p.transformation)}getCombinedShaderTransformation(p,x=d.create()){return a.multiply(x,this.effectiveTransformation,p.transformation)}get boundingVolumeWorldSpace(){this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new n,this._validateBoundingVolume(this._bvWorldSpace,g.WorldSpace));return this._bvWorldSpace}get boundingVolumeObjectSpace(){this._bvObjectSpace||
(this._bvObjectSpace=this._bvObjectSpace||new n,this._validateBoundingVolume(this._bvObjectSpace,g.ObjectSpace));return this._bvObjectSpace}_validateBoundingVolume(p,x){x=x===g.ObjectSpace;for(var m of this._geometries){var w=m.boundingInfo;if(w){var D=p,M=x?m.transformation:this.getCombinedShaderTransformation(m),S=w.bbMin;w=w.bbMax;if(a.hasIdentityRotation(M))for(M=e.set(A,M[12],M[13],M[14]),e.add(z,S,M),e.add(J,w,M),S=0;3>S;++S)D.min[S]=Math.min(D.min[S],z[S]),D.max[S]=Math.max(D.max[S],J[S]);
else if(e.transformMat4(z,S,M),e.exactEquals(S,w))for(S=0;3>S;++S)D.min[S]=Math.min(D.min[S],z[S]),D.max[S]=Math.max(D.max[S],z[S]);else{e.transformMat4(J,w,M);for(var V=0;3>V;++V)D.min[V]=Math.min(D.min[V],z[V],J[V]),D.max[V]=Math.max(D.max[V],z[V],J[V]);for(V=0;3>V;++V){e.copy(z,S);e.copy(J,w);z[V]=w[V];J[V]=S[V];e.transformMat4(z,z,M);e.transformMat4(J,J,M);for(let B=0;3>B;++B)D.min[B]=Math.min(D.min[B],z[B],J[B]),D.max[B]=Math.max(D.max[B],z[B],J[B])}}}}e.lerp(p.bounds,p.min,p.max,.5);for(const B of this._geometries)m=
B.boundingInfo,null!=m&&(S=x?B.transformation:this.getCombinedShaderTransformation(B),D=h.maxScale(S),e.transformMat4(r,m.center,S),S=e.distance(r,p.bounds),p.bounds[3]=Math.max(p.bounds[3],S+m.radius*D))}_invalidateBoundingVolume(){const p=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0;this._parentLayer&&p&&this._parentLayer.notifyObjectBBChanged(this,p)}_emit(p,x){this._parentLayer&&this._parentLayer.events.emit(p,x)}get test(){const p=this;return{hasGeometry:x=>p._geometries.includes(x),
getGeometryIndex:x=>p._geometries.indexOf(x)}}}class q{constructor(){this.min=c.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.max=c.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class n extends q{constructor(){super(...arguments);this.bounds=f.create()}}const A=c.create(),z=c.create(),J=c.create(),r=c.create();var g;(function(p){p[p.WorldSpace=0]="WorldSpace";p[p.ObjectSpace=
1]="ObjectSpace"})(g||(g={}));b.Object3D=K;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/testUtils":function(){define(["exports"],function(b){b.gridLocalOriginFactory={rootOrigin:null};b.textTextureAtlas={stableRendering:!1};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/WebGLLayer":function(){define("exports ../../../../core/Evented ../../../../core/Handles ../../../../core/maybe ../../../../core/PooledArray ./ContentObject ./ContentObjectType ./DirtyEvents ./Octree ./UpdatePolicy".split(" "),
function(b,a,d,e,c,f,h,v,G,k){class y extends f.ContentObject{get objects(){return this._objects}constructor(t,F,H=""){super();this.stage=t;this.apiLayerUid=H;this.type=h.ContentObjectType.Layer;this.events=new a;this.pickable=this.visible=!0;this.sliceable=!1;this._objects=new c;this._objectsAdded=new c;this._handles=new d;this.apiLayerUid=H;this.visible=F?.visible??!0;this.pickable=F?.pickable??!0;this.updatePolicy=F?.updatePolicy??k.UpdatePolicy.ASYNC;this._disableOctree=F?.disableOctree??!1;t.add(this);
for(const K of v.DirtyEventNames)this._handles.add(this.events.on(K,q=>t.handleEvent(K,q)))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.remove(this),this.invalidateSpatialQueryAccelerator())}add(t){this._objects.push(t);t.parentLayer=this;this.events.emit("layerObjectAdded",{layer:this,object:t});null!=this._octree&&this._objectsAdded.push(t)}remove(t){this._objects.removeUnordered(t)&&(t.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:t}),null!=this._octree&&
(this._objectsAdded.removeUnordered(t)||this._octree.remove([t])))}addMany(t){this._objects.pushArray(t);for(const F of t)F.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:t});null!=this._octree&&this._objectsAdded.pushArray(t)}removeMany(t){const F=[];this._objects.removeUnorderedMany(t,t.length,F);if(0!==F.length){for(const H of F)H.parentLayer=null;this.events.emit("layerObjectsRemoved",{layer:this,objects:F});if(null!=this._octree){for(t=0;t<F.length;)this._objectsAdded.removeUnordered(F[t])?
(F[t]=F[F.length-1],--F.length):++t;this._octree.remove(F)}}}sync(){this.updatePolicy!==k.UpdatePolicy.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(t,F){null==this._octree||this._objectsAdded.includes(t)||this._octree.update(t,F)}getSpatialQueryAccelerator(){null==this._octree&&50<this._objects.length&&!this._disableOctree?(this._octree=new G(t=>t.boundingVolumeWorldSpace.bounds),this._octree.add(this._objects.data,this._objects.length)):null!=this._octree&&0<this._objectsAdded.length&&
(this._octree.add(this._objectsAdded.data,this._objectsAdded.length),this._objectsAdded.clear());return this._octree}invalidateSpatialQueryAccelerator(){this._octree=e.destroyMaybe(this._octree);this._objectsAdded.clear()}}b.WebGLLayer=y;b.isWebGLLayer=function(t){return null!=t&&t.type===h.ContentObjectType.Layer};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/DirtyEvents":function(){define(["exports"],function(b){b.DirtyEventNames="layerObjectAdded layerObjectRemoved layerObjectsAdded layerObjectsRemoved transformationChanged shaderTransformationChanged visibilityChanged occlusionChanged highlightChanged geometryAdded geometryRemoved attributesChanged".split(" ");
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../geometry/support/frustum ../../../../geometry/support/ray ../../../../chunks/sphere ./Util".split(" "),function(b,a,d,e,c,f,h,v){function G(E,l,C){C[0]=E[0]+l;C[1]=E[1]+l;C[2]=E[2]+l}function k(E,l,C,Q){if(1===l)E=C(E[0]),h.copy(E,Q);else{p[0]=Infinity;p[1]=
Infinity;p[2]=Infinity;x[0]=-Infinity;x[1]=-Infinity;x[2]=-Infinity;for(let U=0;U<l;U++){var I=C(E[U]);if(H(I[3])){var N=p,R=I;N[0]=Math.min(N[0],R[0]-R[3]);N[1]=Math.min(N[1],R[1]-R[3]);N[2]=Math.min(N[2],R[2]-R[3]);N=x;N[0]=Math.max(N[0],I[0]+I[3]);N[1]=Math.max(N[1],I[1]+I[3]);N[2]=Math.max(N[2],I[2]+I[3])}}d.lerp(Q,p,x,.5);Q[3]=Math.max(x[0]-p[0],x[1]-p[1],x[2]-p[2])/2}}function y(E,l,C){if(!B.length)for(var Q=0;8>Q;++Q)B.push({index:0,distance:0});for(Q=0;8>Q;++Q){const I=n[Q];B.data[Q].index=
Q;B.data[Q].distance=F(E,l,I)}B.sort((I,N)=>I.distance-N.distance);for(E=0;8>E;++E)C[E]=B.data[E].index}function t(E,l){let C=Infinity,Q;for(let I=0;8>I;++I){const N=F(E,l,A[I]);N<C&&(C=N,Q=A[I])}return Q}function F(E,l,C){return l*(E[0]*C[0]+E[1]*C[1]+E[2]*C[2])}function H(E){return!isNaN(E)&&-Infinity!==E&&Infinity!==E&&0<E}class K{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(E,
l){this.objectToBoundingSphere=E;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._root=new q;this._objectCount=0;l&&(void 0!==l.maximumObjectsPerNode&&(this._maximumObjectsPerNode=l.maximumObjectsPerNode),void 0!==l.maximumDepth&&(this._maximumDepth=l.maximumDepth))}destroy(){this._degenerateObjects.clear();q.clearPool();J[0]=null;m.prune();B.prune()}add(E,l=E.length){this._objectCount+=l;this._grow(E,l);const C=q.acquire();for(let Q=0;Q<l;Q++){const I=E[Q];
this._isDegenerate(I)?this._degenerateObjects.add(I):(C.init(this._root),this._add(I,C))}q.release(C)}remove(E,l=null){this._objectCount-=E.length;const C=q.acquire();for(const Q of E)E=null!=l?l:h.copy(this.objectToBoundingSphere(Q),w),H(E[3])?(C.init(this._root),this._remove(Q,E,C)):this._degenerateObjects.delete(Q);q.release(C);this._shrink()}update(E,l){if(H(l[3])||!this._isDegenerate(E))J[0]=E,E=J,this.remove(E,l),this.add(E)}forEachAlongRay(E,l,C){const Q=f.wrap(E,l);this._forEachNode(this._root,
I=>{if(!this._intersectsNode(Q,I))return!1;I=I.node;I.terminals.forAll(N=>{this._intersectsObject(Q,N)&&C(N)});null!==I.residents&&I.residents.forAll(N=>{this._intersectsObject(Q,N)&&C(N)});return!0})}forEachAlongRayWithVerticalOffset(E,l,C,Q){const I=f.wrap(E,l);this._forEachNode(this._root,N=>{if(!this._intersectsNodeWithOffset(I,N,Q))return!1;N=N.node;N.terminals.forAll(R=>{this._intersectsObjectWithOffset(I,R,Q)&&C(R)});null!==N.residents&&N.residents.forAll(R=>{this._intersectsObjectWithOffset(I,
R,Q)&&C(R)});return!0})}forEach(E){this._forEachNode(this._root,l=>{l=l.node;l.terminals.forAll(E);null!==l.residents&&l.residents.forAll(E);return!0});this._degenerateObjects.forEach(E)}forEachDegenerateObject(E){this._degenerateObjects.forEach(E)}findClosest(E,l,C,Q=()=>!0,I=Infinity){let N=Infinity,R=Infinity,U=null;const Z=t(E,l),O=T=>{--I;if(Q(T)){var u=this.objectToBoundingSphere(T);if(c.intersectsSphere(C,u)){var L=F(E,l,h.getCenter(u)),Y=L-u[3];u=L+u[3];Y<N&&(N=Y,R=u,U=T)}}};this._forEachNodeDepthOrdered(this._root,
T=>{if(0>=I||!c.intersectsSphere(C,T.bounds))return!1;d.scale(g,Z,T.halfSize);d.add(g,g,T.bounds);if(F(E,l,g)>R)return!1;T=T.node;T.terminals.forAll(u=>O(u));null!==T.residents&&T.residents.forAll(u=>O(u));return!0},E,l);return U}forEachInDepthRange(E,l,C,Q,I,N,R){let U=-Infinity,Z=Infinity;const O={setRange:X=>{C===K.DepthOrder.FRONT_TO_BACK?(U=Math.max(U,X.near),Z=Math.min(Z,X.far)):(U=Math.max(U,-X.far),Z=Math.min(Z,-X.near))}};O.setRange(Q);const T=F(l,C,E),u=t(l,C),L=t(l,-C),Y=X=>{if(R(X)){var ia=
this.objectToBoundingSphere(X),aa=h.getCenter(ia);aa=F(l,C,aa)-T;var ca=aa+ia[3];aa-ia[3]>Z||ca<U||!c.intersectsSphere(N,ia)||I(X,O)}};this._forEachNodeDepthOrdered(this._root,X=>{if(!c.intersectsSphere(N,X.bounds))return!1;d.scale(g,u,X.halfSize);d.add(g,g,X.bounds);if(F(l,C,g)-T>Z)return!1;d.scale(g,L,X.halfSize);d.add(g,g,X.bounds);if(F(l,C,g)-T<U)return!1;X=X.node;X.terminals.forAll(ia=>Y(ia));null!==X.residents&&X.residents.forAll(ia=>Y(ia));return!0},l,C)}forEachNode(E){this._forEachNode(this._root,
l=>E(l.node,l.bounds,l.halfSize,l.depth))}forEachNeighbor(E,l){const C=h.getRadius(l),Q=h.getCenter(l),I=U=>{const Z=this.objectToBoundingSphere(U);var O=h.getRadius(Z);O=C+O;return 0>=d.squaredDistance(h.getCenter(Z),Q)-O*O?E(U):!0};let N=!0;const R=U=>{N&&(N=I(U))};this._forEachNode(this._root,U=>{var Z=h.getRadius(U.bounds);Z=C+Z;if(0<d.squaredDistance(h.getCenter(U.bounds),Q)-Z*Z)return!1;U=U.node;U.terminals.forAll(R);N&&null!==U.residents&&U.residents.forAll(R);return N});N&&this.forEachDegenerateObject(R)}_intersectsNode(E,
l){G(l.bounds,2*-l.halfSize,p);G(l.bounds,2*l.halfSize,x);return v.rayBoxTest(E.origin,E.direction,p,x)}_intersectsNodeWithOffset(E,l,C){G(l.bounds,2*-l.halfSize,p);G(l.bounds,2*l.halfSize,x);C.applyToMinMax(p,x);return v.rayBoxTest(E.origin,E.direction,p,x)}_intersectsObject(E,l){l=this.objectToBoundingSphere(l);return 0<l[3]?h.intersectsRay(l,E):!0}_intersectsObjectWithOffset(E,l,C){l=this.objectToBoundingSphere(l);return 0<l[3]?h.intersectsRay(C.applyToBoundingSphere(l),E):!0}_forEachNode(E,l){E=
q.acquire().init(E);const C=[E];for(;0!==C.length;){E=C.pop();if(l(E)&&!E.isLeaf())for(let Q=0;Q<E.node.children.length;Q++)E.node.children[Q]&&C.push(q.acquire().init(E).advance(Q));q.release(E)}}_forEachNodeDepthOrdered(E,l,C,Q=K.DepthOrder.FRONT_TO_BACK){E=q.acquire().init(E);const I=[E];for(y(C,Q,P);0!==I.length;){E=I.pop();if(l(E)&&!E.isLeaf())for(C=7;0<=C;--C)Q=P[C],E.node.children[Q]&&I.push(q.acquire().init(E).advance(Q));q.release(E)}}_remove(E,l,C){m.clear();l=C.advanceTo(l,(Q,I)=>{m.push(Q.node);
m.push(I)})?C.node.terminals:C.node.residents;l.removeUnordered(E);if(0===l.length)for(E=m.length-2;0<=E&&this._purge(m.data[E],m.data[E+1]);E-=2);}_nodeIsEmpty(E){if(0!==E.terminals.length)return!1;if(null!==E.residents)return 0===E.residents.length;for(let l=0;l<E.children.length;l++)if(E.children[l])return!1;return!0}_purge(E,l){0<=l&&(E.children[l]=null);return this._nodeIsEmpty(E)?(null===E.residents&&(E.residents=new a({shrink:!0})),!0):!1}_add(E,l){l.advanceTo(this.objectToBoundingSphere(E))?
l.node.terminals.push(E):(l.node.residents.push(E),l.node.residents.length>this._maximumObjectsPerNode&&l.depth<this._maximumDepth&&this._split(l))}_split(E){const l=E.node.residents;E.node.residents=null;for(let C=0;C<l.length;C++){const Q=q.acquire().init(E);this._add(l.at(C),Q);q.release(Q)}}_grow(E,l){0!==l&&(k(E,l,C=>this.objectToBoundingSphere(C),D),H(D[3])&&!this._fitsInsideTree(D)&&(this._nodeIsEmpty(this._root.node)?(h.copy(D,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],
this._root.updateBoundsRadiusFromHalfSize()):(E=this._rootBoundsForRootAsSubNode(D),this._placingRootViolatesMaxDepth(E)?this._rebuildTree(D,E):this._growRootAsSubNode(E),q.release(E))))}_rebuildTree(E,l){d.copy(M,l.bounds);M[3]=l.halfSize;k([E,M],2,C=>C,S);E=q.acquire().init(this._root);this._root.initFrom(null,S,S[3]);this._root.increaseHalfSize(1.25);this._forEachNode(E,C=>{this.add(C.node.terminals.data,C.node.terminals.length);null!==C.node.residents&&this.add(C.node.residents.data,C.node.residents.length);
return!0});q.release(E)}_placingRootViolatesMaxDepth(E){const l=Math.log(E.halfSize/this._root.halfSize)*Math.LOG2E;let C=0;this._forEachNode(this._root,Q=>{C=Math.max(C,Q.depth);return C+l<=this._maximumDepth});return C+l>this._maximumDepth}_rootBoundsForRootAsSubNode(E){var l=E[3],C=-Infinity;const Q=this._root.bounds,I=this._root.halfSize;for(var N=0;3>N;N++){var R=Math.max(0,Math.ceil((Q[N]-I-(E[N]-l))/(2*I)));const U=Math.max(0,Math.ceil((E[N]+l-(Q[N]+I))/(2*I)))+1;C=Math.max(C,2**Math.ceil(Math.log(R+
U)*Math.LOG2E));V[N].min=R;V[N].max=U}for(E=0;3>E;E++)l=V[E].min,N=V[E].max,R=(C-(l+N))/2,l+=Math.ceil(R),N+=Math.floor(R),r[E]=Q[E]-I-l*I*2+(N+l)*I;C*=I;r[3]=C*z;return q.acquire().initFrom(null,r,C,0)}_growRootAsSubNode(E){const l=this._root.node;d.copy(D,this._root.bounds);D[3]=this._root.halfSize;this._root.init(E);E.advanceTo(D,null,!0);E.node.children=l.children;E.node.residents=l.residents;E.node.terminals=l.terminals}_shrink(){for(;;){const E=this._findShrinkIndex();if(-1===E)break;this._root.advance(E);
this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let E=null;const l=this._root.node.children;let C=0,Q=0;for(;Q<l.length&&null==E;)C=Q++,E=l[C];for(;Q<l.length;)if(l[Q++])return-1;return C}_isDegenerate(E){E=this.objectToBoundingSphere(E)[3];return!H(E)}_fitsInsideTree(E){const l=this._root.bounds,C=this._root.halfSize;return E[3]<=C&&E[0]>=l[0]-C&&E[0]<=l[0]+C&&E[1]>=l[1]-C&&E[1]<=l[1]+C&&E[2]>=l[2]-C&&E[2]<=l[2]+C}toJSON(){const {maximumDepth:E,
maximumObjectsPerNode:l,_objectCount:C}=this,Q=this._nodeToJSON(this._root.node);return{maximumDepth:E,maximumObjectsPerNode:l,objectCount:C,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:Q}}}_nodeToJSON(E){const l=E.children.map(Q=>Q?this._nodeToJSON(Q):null),C=E.residents?.map(Q=>this.objectToBoundingSphere(Q));E=E.terminals?.map(Q=>this.objectToBoundingSphere(Q));return{children:l,residents:C,terminals:E}}static fromJSON(E){const l=new K(C=>C,{maximumDepth:E.maximumDepth,
maximumObjectsPerNode:E.maximumObjectsPerNode});l._objectCount=E.objectCount;l._root.initFrom(E.root.node,E.root.bounds,E.root.halfSize,E.root.depth);return l}}class q{constructor(){this.bounds=h.create();this.halfSize=0;this.initFrom(null,null,0,0)}init(E){return this.initFrom(E.node,E.bounds,E.halfSize,E.depth)}initFrom(E,l,C,Q=this.depth){this.node=null!=E?E:q.createEmptyNode();null!=l&&h.copy(l,this.bounds);this.halfSize=C;this.depth=Q;return this}increaseHalfSize(E){this.halfSize*=E;this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=
this.halfSize*z}advance(E){let l=this.node.children[E];l||(l=q.createEmptyNode(),this.node.children[E]=l);this.node=l;this.halfSize/=2;this.depth++;E=n[E];this.bounds[0]+=E[0]*this.halfSize;this.bounds[1]+=E[1]*this.halfSize;this.bounds[2]+=E[2]*this.halfSize;this.updateBoundsRadiusFromHalfSize();return this}advanceTo(E,l,C=!1){for(;;){if(this.isTerminalFor(E))return l&&l(this,-1),!0;if(this.isLeaf()){if(!C)return l&&l(this,-1),!1;this.node.residents=null}const Q=this._childIndex(E);l&&l(this,Q);
this.advance(Q)}}isLeaf(){return null!=this.node.residents}isTerminalFor(E){return E[3]>this.halfSize/2}_childIndex(E){const l=this.bounds;return(l[0]<E[0]?1:0)+(l[1]<E[1]?2:0)+(l[2]<E[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new a({shrink:!0}),residents:new a({shrink:!0})}}static acquire(){return q._pool.acquire()}static release(E){q._pool.release(E)}static clearPool(){q._pool.prune()}}q._pool=new b(q);(function(E){E=E.DepthOrder||(E.DepthOrder=
{});E[E.FRONT_TO_BACK=1]="FRONT_TO_BACK";E[E.BACK_TO_FRONT=-1]="BACK_TO_FRONT"})(K||(K={}));const n=[e.fromValues(-1,-1,-1),e.fromValues(1,-1,-1),e.fromValues(-1,1,-1),e.fromValues(1,1,-1),e.fromValues(-1,-1,1),e.fromValues(1,-1,1),e.fromValues(-1,1,1),e.fromValues(1,1,1)],A=[e.fromValues(-1,-1,-1),e.fromValues(-1,-1,1),e.fromValues(-1,1,-1),e.fromValues(-1,1,1),e.fromValues(1,-1,-1),e.fromValues(1,-1,1),e.fromValues(1,1,-1),e.fromValues(1,1,1)],z=Math.sqrt(3),J=[null],r=h.create(),g=e.create(),p=
e.create(),x=e.create(),m=new a,w=h.create(),D=h.create(),M=h.create(),S=h.create(),V=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],B=new a,P=[0,0,0,0,0,0,0,0];return K})},"esri/views/3d/webgl-engine/lib/UpdatePolicy":function(){define(["exports"],function(b){b.UpdatePolicy=void 0;var a=b.UpdatePolicy||(b.UpdatePolicy={});a[a.ASYNC=0]="ASYNC";a[a.SYNC=1]="SYNC";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("exports ../../../../core/has ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../chunks/vec2 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../chunks/vec4f64 ../../../../geometry/support/frustum ../../../../geometry/support/lineSegment ../../../../geometry/support/plane ../../support/buffer/InterleavedLayout ../core/shaderLibrary/ShaderOutput ../lib/GLMaterial ../lib/Material ../lib/RenderSlot ../lib/Util ../lib/VertexAttribute ./VisualVariablePassParameters ../shaders/LineMarkerTechniqueConfiguration ../../../../chunks/RibbonLine.glsl ../shaders/RibbonLineTechnique ../shaders/RibbonLineTechniqueConfiguration".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K,q,n,A,z,J,r,g,p,x){function m(W,ba,da,ea,fa){for(let ja=0;ja<fa;ja++)da[ea++]=W[ba++];return ea}var w;(function(W){W[W.LEFT_JOIN_START=-2]="LEFT_JOIN_START";W[W.LEFT_JOIN_END=-1]="LEFT_JOIN_END";W[W.LEFT_CAP_START=-4]="LEFT_CAP_START";W[W.LEFT_CAP_END=-5]="LEFT_CAP_END";W[W.RIGHT_JOIN_START=2]="RIGHT_JOIN_START";W[W.RIGHT_JOIN_END=1]="RIGHT_JOIN_END";W[W.RIGHT_CAP_START=4]="RIGHT_CAP_START";W[W.RIGHT_CAP_END=5]="RIGHT_CAP_END"})(w||(w={}));class D extends q.Material{constructor(W){super(W,
new S);this._configuration=new x.RibbonLineTechniqueConfiguration;this._vertexAttributeLocations=p.vertexAttributeLocations}getConfiguration(W,ba){this._configuration.output=W;this._configuration.draped=ba.slot===n.RenderSlot.DRAPED_MATERIAL;W=null!=this.parameters.stipplePattern&&W!==H.ShaderOutput.Highlight;this._configuration.stippleEnabled=W;this._configuration.stippleOffColorEnabled=W&&null!=this.parameters.stippleOffColor;this._configuration.stipplePreferContinuous=W&&this.parameters.stipplePreferContinuous;
this._configuration.hasSlicePlane=this.parameters.hasSlicePlane;this._configuration.hasOccludees=this.parameters.hasOccludees;this._configuration.roundJoins="round"===this.parameters.join;this._configuration.capType=this.parameters.cap;W=this._configuration;if(null!=this.parameters.markerParameters){var da=this.parameters.markerParameters;da=da.anchor===r.LineMarkerAnchor.Tip&&da.hideOnShortSegments&&"begin-end"===da.placement&&da.worldSpace}else da=!1;W.applyMarkerOffset=da;this._configuration.hasPolygonOffset=
this.parameters.hasPolygonOffset;this._configuration.writeDepth=this.parameters.writeDepth;this._configuration.vvSize=!!this.parameters.vvSize;this._configuration.vvColor=!!this.parameters.vvColor;this._configuration.vvOpacity=!!this.parameters.vvOpacity;this._configuration.innerColorEnabled=0<this.parameters.innerWidth&&null!=this.parameters.innerColor;this._configuration.falloffEnabled=0<this.parameters.falloff;this._configuration.occluder=this.parameters.renderOccluded===q.RenderOccludedFlag.OccludeAndTransparentStencil;
this._configuration.transparencyPassType=ba.transparencyPassType;this._configuration.multipassEnabled=ba.multipassEnabled;this._configuration.cullAboveGround=ba.multipassTerrain.cullAboveGround;this._configuration.wireframe=this.parameters.wireframe;return this._configuration}intersectDraped(W,ba,da,ea,fa,ja){if(da.options.selectionMode){ba=W.attributes.get(z.VertexAttribute.POSITION).data;da=W.attributes.get(z.VertexAttribute.SIZE);var ha=this.parameters.width;this.parameters.vvSize?(da=W.attributes.get(z.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0],
ha*=e.clamp(this.parameters.vvSize.offset[0]+da*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])):da&&(ha*=da.data[0]);da=ea[0];ea=ea[1];W=(ha/2+4)*W.screenToWorldRatio;ha=Number.MAX_VALUE;var ka=0;for(let ua=0;ua<ba.length-5;ua+=3){var la=ba[ua],ra=ba[ua+1],na=da-la,qa=ea-ra;la=ba[ua+3]-la;ra=ba[ua+4]-ra;const Aa=e.clamp((la*na+ra*qa)/(la*la+ra*ra),0,1);na=la*Aa-na;qa=ra*Aa-qa;qa=na*na+qa*qa;qa<ha&&(ha=qa,ka=ua/3)}ha<W*W&&fa(ja.dist,ja.normal,
ka,!1)}}intersect(W,ba,da,ea,fa,ja){if(da.options.selectionMode&&W.visible)if(A.isTranslationMatrix(ba)){var ha=W.attributes;ea=ha.get(z.VertexAttribute.POSITION).data;W=this.parameters.width;this.parameters.vvSize?(fa=ha.get(z.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0],W*=e.clamp(this.parameters.vvSize.offset[0]+fa*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])):ha.has(z.VertexAttribute.SIZE)&&(W*=ha.get(z.VertexAttribute.SIZE).data[0]);var ka=
da.camera,la=C;f.copy(la,da.point);fa=W*ka.pixelRatio/2+4*ka.pixelRatio;h.set(L[0],la[0]-fa,la[1]+fa,0);h.set(L[1],la[0]+fa,la[1]+fa,0);h.set(L[2],la[0]+fa,la[1]-fa,0);h.set(L[3],la[0]-fa,la[1]-fa,0);for(W=0;4>W;W++)if(!ka.unprojectFromRenderScreen(L[W],Y[W]))return;t.fromPoints(ka.eye,Y[0],Y[1],X);t.fromPoints(ka.eye,Y[1],Y[2],ia);t.fromPoints(ka.eye,Y[2],Y[3],aa);t.fromPoints(ka.eye,Y[3],Y[0],ca);var ra=Number.MAX_VALUE;W=0;ha=this.parameters.isClosed&&2<ha.get(z.VertexAttribute.POSITION).indices.length?
ea.length-2:ea.length-5;for(let qa=0;qa<ha;qa+=3){B[0]=ea[qa]+ba[12];B[1]=ea[qa+1]+ba[13];B[2]=ea[qa+2]+ba[14];var na=(qa+3)%ea.length;P[0]=ea[na]+ba[12];P[1]=ea[na+1]+ba[13];P[2]=ea[na+2]+ba[14];if(!(0>t.signedDistance(X,B)&&0>t.signedDistance(X,P)||0>t.signedDistance(ia,B)&&0>t.signedDistance(ia,P)||0>t.signedDistance(aa,B)&&0>t.signedDistance(aa,P)||0>t.signedDistance(ca,B)&&0>t.signedDistance(ca,P))){ka.projectToRenderScreen(B,Q);ka.projectToRenderScreen(P,I);if(0>Q[2]&&0<I[2])h.subtract(E,B,
P),na=ka.frustum,na=-t.signedDistance(na[k.PlaneIndex.NEAR],B)/h.dot(E,t.normal(na[k.PlaneIndex.NEAR])),h.scale(E,E,na),h.add(B,B,E),ka.projectToRenderScreen(B,Q);else if(0<Q[2]&&0>I[2])h.subtract(E,P,B),na=ka.frustum,na=-t.signedDistance(na[k.PlaneIndex.NEAR],P)/h.dot(E,t.normal(na[k.PlaneIndex.NEAR])),h.scale(E,E,na),h.add(P,P,E),ka.projectToRenderScreen(P,I);else if(0>Q[2]&&0>I[2])continue;Q[2]=0;I[2]=0;na=y.distance2(y.fromPoints(Q,I,U),la);na<ra&&(ra=na,h.copy(N,B),h.copy(R,P),W=qa/3)}}ba=da.rayBegin;
da=da.rayEnd;ra<fa*fa&&(ea=Number.MAX_VALUE,y.closestLineSegmentPoint(y.fromPoints(N,R,U),y.fromPoints(ba,da,Z),l)&&(h.subtract(l,l,ba),ea=h.length(l),h.scale(l,l,1/ea),ea/=h.distance(ba,da)),ja(ea,l,W,!1))}else d.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial").error("intersection assumes a translation-only matrix")}get _layout(){const W=F.newLayout().vec3f(z.VertexAttribute.POSITION).f32(z.VertexAttribute.SUBDIVISIONFACTOR).vec2f(z.VertexAttribute.UV0).vec3f(z.VertexAttribute.AUXPOS1).vec3f(z.VertexAttribute.AUXPOS2);
this.parameters.vvSize?W.f32(z.VertexAttribute.SIZEFEATUREATTRIBUTE):W.f32(z.VertexAttribute.SIZE);this.parameters.vvColor?W.f32(z.VertexAttribute.COLORFEATUREATTRIBUTE):W.vec4f(z.VertexAttribute.COLOR);this.parameters.vvOpacity&&W.f32(z.VertexAttribute.OPACITYFEATUREATTRIBUTE);a("enable-feature:objectAndLayerId-rendering")&&W.vec4u8(z.VertexAttribute.OBJECTANDLAYERIDCOLOR);return W}createBufferWriter(){return new V(this._layout,this.parameters)}produces(W,ba){return ba===H.ShaderOutput.Color||ba===
H.ShaderOutput.Alpha||ba===H.ShaderOutput.Highlight||ba===H.ShaderOutput.Depth||ba===H.ShaderOutput.ObjectAndLayerIdColor?W===n.RenderSlot.DRAPED_MATERIAL?!0:this.parameters.renderOccluded===q.RenderOccludedFlag.OccludeAndTransparentStencil?W===n.RenderSlot.OPAQUE_MATERIAL||W===n.RenderSlot.OCCLUDER_MATERIAL||W===n.RenderSlot.TRANSPARENT_OCCLUDER_MATERIAL:ba===H.ShaderOutput.Color||ba===H.ShaderOutput.Alpha?W===(this.parameters.writeDepth?n.RenderSlot.TRANSPARENT_MATERIAL:n.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL):
W===n.RenderSlot.OPAQUE_MATERIAL:!1}createGLMaterial(W){return new M(W)}validateParameters(W){"miter"!==W.join&&(W.miterLimit=0);null!=W.markerParameters&&(W.markerScale=W.markerParameters.width/W.width)}}class M extends K{constructor(){super(...arguments);this._stipplePattern=null}dispose(){super.dispose();this._stippleTextureRepository.release(this._stipplePattern);this._stipplePattern=null}_updateOccludeeState(W){W.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:W.hasOccludees})}beginSlot(W){this._output!==
H.ShaderOutput.Color&&this._output!==H.ShaderOutput.Alpha||this._updateOccludeeState(W);const ba=this._material.parameters.stipplePattern;this._stipplePattern!==ba&&(this._material.setParameters({stippleTexture:this._stippleTextureRepository.swap(ba,this._stipplePattern)}),this._stipplePattern=ba);return this.ensureTechnique(p.RibbonLineTechnique,W)}}class S extends J.VisualVariablePassParameters{constructor(){super(...arguments);this.width=0;this.color=G.ONES;this.join="miter";this.cap=x.CapType.BUTT;
this.miterLimit=5;this.writeDepth=!0;this.hasPolygonOffset=!1;this.stippleTexture=null;this.stipplePreferContinuous=!0;this.markerParameters=null;this.markerScale=1;this.isClosed=this.vvFastUpdate=this.hasSlicePlane=!1;this.innerWidth=this.falloff=0;this.wireframe=this.hasOccludees=!1}}class V{constructor(W,ba){this.vertexBufferLayout=W;this._parameters=ba;this.numJoinSubdivisions=0;W=ba.stipplePattern?1:0;switch(this._parameters.join){case "miter":case "bevel":this.numJoinSubdivisions=W;break;case "round":this.numJoinSubdivisions=
g.ribbonlineNumRoundJoinSubdivisions+W}}_isClosed(W){return this._parameters.isClosed?2<W.attributes.get(z.VertexAttribute.POSITION).indices.length:!1}allocate(W){return this.vertexBufferLayout.createBuffer(W)}elementCount(W){var ba=W.attributes.get(z.VertexAttribute.POSITION).indices.length/2+1;W=this._isClosed(W);ba=(W?2:4)+((W?ba:ba-1)-(W?0:1))*(2*this.numJoinSubdivisions+4);ba+=2;this._parameters.wireframe&&(ba=2+4*(ba-2));return ba}write(W,ba,da,ea,fa){ba=O;const ja=T,ha=u,ka=da.attributes.get(z.VertexAttribute.POSITION);
var la=ka.indices;const ra=ka.data.length/3,na=da.attributes.get(z.VertexAttribute.DISTANCETOSTART)?.data;la&&la.length!==2*(ra-1)&&console.warn("RibbonLineMaterial does not support indices");let qa=1,ua=0;const Aa=this.vertexBufferLayout.fields.has(z.VertexAttribute.SIZEFEATUREATTRIBUTE);Aa?ua=da.attributes.get(z.VertexAttribute.SIZEFEATUREATTRIBUTE).data[0]:da.attributes.has(z.VertexAttribute.SIZE)&&(qa=da.attributes.get(z.VertexAttribute.SIZE).data[0]);let ya=[1,1,1,1],Fa=0;const Ga=this.vertexBufferLayout.fields.has(z.VertexAttribute.COLORFEATUREATTRIBUTE);
Ga?Fa=da.attributes.get(z.VertexAttribute.COLORFEATUREATTRIBUTE).data[0]:da.attributes.has(z.VertexAttribute.COLOR)&&(ya=da.attributes.get(z.VertexAttribute.COLOR).data);const Ba=a("enable-feature:objectAndLayerId-rendering")?da.objectAndLayerIdColor:null;let Ha=0;const Ia=this.vertexBufferLayout.fields.has(z.VertexAttribute.OPACITYFEATUREATTRIBUTE);Ia&&(Ha=da.attributes.get(z.VertexAttribute.OPACITYFEATUREATTRIBUTE).data[0]);const oa=new Float32Array(ea.buffer),Da=a("enable-feature:objectAndLayerId-rendering")?
new Uint8Array(ea.buffer):null;la=this.vertexBufferLayout.stride/4;let ma=fa*la;fa=ma;let sa=0;const Ea=na?(pa,va,wa)=>sa=na[wa]:(pa,va,wa)=>sa+=h.distance(pa,va),Ja=a("enable-feature:objectAndLayerId-rendering"),ta=(pa,va,wa,Ka,La,Ma,Na)=>{oa[ma++]=va[0];oa[ma++]=va[1];oa[ma++]=va[2];oa[ma++]=Ka;oa[ma++]=Na;oa[ma++]=La;oa[ma++]=pa[0];oa[ma++]=pa[1];oa[ma++]=pa[2];oa[ma++]=wa[0];oa[ma++]=wa[1];oa[ma++]=wa[2];oa[ma++]=Aa?ua:qa;Ga?oa[ma++]=Fa:(pa=Math.min(4*Ma,ya.length-4),oa[ma++]=ya[pa],oa[ma++]=
ya[pa+1],oa[ma++]=ya[pa+2],oa[ma++]=ya[pa+3]);Ia&&(oa[ma++]=Ha);Ja&&(null!=Ba&&(Da[4*ma]=Ba[0],Da[4*ma+1]=Ba[1],Da[4*ma+2]=Ba[2],Da[4*ma+3]=Ba[3]),ma++)};ma+=la;h.set(ja,ka.data[0],ka.data[1],ka.data[2]);W&&h.transformMat4(ja,ja,W);if(da=this._isClosed(da)){var xa=ka.data.length-3;h.set(ba,ka.data[xa],ka.data[xa+1],ka.data[xa+2]);W&&h.transformMat4(ba,ba,W)}else h.set(ha,ka.data[3],ka.data[4],ka.data[5]),W&&h.transformMat4(ha,ha,W),ta(ja,ja,ha,1,w.LEFT_CAP_START,0,0),ta(ja,ja,ha,1,w.RIGHT_CAP_START,
0,0),h.copy(ba,ja),h.copy(ja,ha);xa=da?0:1;const Ca=da?ra:ra-1;for(let pa=xa;pa<Ca;pa++){var za=(pa+1)%ra*3;h.set(ha,ka.data[za],ka.data[za+1],ka.data[za+2]);W&&h.transformMat4(ha,ha,W);Ea(ba,ja,pa);ta(ba,ja,ha,0,w.LEFT_JOIN_END,pa,sa);ta(ba,ja,ha,0,w.RIGHT_JOIN_END,pa,sa);za=this.numJoinSubdivisions;for(let va=0;va<za;++va){const wa=(va+1)/(za+1);ta(ba,ja,ha,wa,w.LEFT_JOIN_END,pa,sa);ta(ba,ja,ha,wa,w.RIGHT_JOIN_END,pa,sa)}ta(ba,ja,ha,1,w.LEFT_JOIN_START,pa,sa);ta(ba,ja,ha,1,w.RIGHT_JOIN_START,pa,
sa);h.copy(ba,ja);h.copy(ja,ha)}da?(h.set(ha,ka.data[3],ka.data[4],ka.data[5]),W&&h.transformMat4(ha,ha,W),sa=Ea(ba,ja,Ca),ta(ba,ja,ha,0,w.LEFT_JOIN_END,xa,sa),ta(ba,ja,ha,0,w.RIGHT_JOIN_END,xa,sa)):(sa=Ea(ba,ja,Ca),ta(ba,ja,ja,0,w.LEFT_CAP_END,Ca,sa),ta(ba,ja,ja,0,w.RIGHT_CAP_END,Ca,sa));m(oa,fa+la,oa,fa,la);ma=m(oa,ma-la,oa,ma,la);this._parameters.wireframe&&this._addWireframeVertices(ea,fa,ma,la)}_addWireframeVertices(W,ba,da,ea){const fa=new Float32Array(W.buffer,da*Float32Array.BYTES_PER_ELEMENT);
W=new Float32Array(W.buffer,ba*Float32Array.BYTES_PER_ELEMENT,da-ba);ba=0;for(da=0;da<W.length-1;da+=2*ea)ba=m(W,da,fa,ba,ea),ba=m(W,da+2*ea,fa,ba,ea),ba=m(W,da+1*ea,fa,ba,ea),ba=m(W,da+2*ea,fa,ba,ea),ba=m(W,da+1*ea,fa,ba,ea),ba=m(W,da+3*ea,fa,ba,ea)}}const B=v.create(),P=v.create(),E=v.create(),l=v.create(),C=v.create(),Q=c.createRenderScreenPointArray3(),I=c.createRenderScreenPointArray3(),N=v.create(),R=v.create(),U=y.create(),Z=y.create(),O=v.create(),T=v.create(),u=v.create(),L=[c.createRenderScreenPointArray3(),
c.createRenderScreenPointArray3(),c.createRenderScreenPointArray3(),c.createRenderScreenPointArray3()],Y=[v.create(),v.create(),v.create(),v.create()],X=t.create(),ia=t.create(),aa=t.create(),ca=t.create();b.Parameters=S;b.RibbonLineMaterial=D;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../geometry/support/buffer/BufferView","../../../../geometry/support/buffer/types","../../webgl-engine/lib/Util"],
function(b,a,d,e){class c{constructor(k,y){this.layout=k;this.buffer="number"===typeof y?new ArrayBuffer(y*k.stride):y;for(const t of k.fields.keys())y=k.fields.get(t),this[t]=new y.constructor(this.buffer,y.offset,this.stride)}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(k,y){return(k=this[k])&&k.elementCount===y.ElementCount&&k.elementType===y.ElementType?k:null}slice(k,y){return new c(this.layout,
this.buffer.slice(k*this.stride,y*this.stride))}copyFrom(k,y=0,t=0,F=k.count){const H=this.stride;0===H%4?(k=new Uint32Array(k.buffer,y*H,F*H/4),(new Uint32Array(this.buffer,t*H,F*H/4)).set(k)):(k=new Uint8Array(k.buffer,y*H,F*H),(new Uint8Array(this.buffer,t*H,F*H)).set(k));return this}get usedMemory(){return this.byteLength}dispose(){}}class f{constructor(k=null){this._lastAligned=this._stride=0;this._fields=new Map;k&&(this._stride=k.stride,k.fields.forEach(y=>this._fields.set(y[0],{...y[1],constructor:G.get(y[1].constructor)})))}vec2f(k,
y){this._appendField(k,a.BufferViewVec2f,y);return this}vec2f64(k,y){this._appendField(k,a.BufferViewVec2f64,y);return this}vec3f(k,y){this._appendField(k,a.BufferViewVec3f,y);return this}vec3f64(k,y){this._appendField(k,a.BufferViewVec3f64,y);return this}vec4f(k,y){this._appendField(k,a.BufferViewVec4f,y);return this}vec4f64(k,y){this._appendField(k,a.BufferViewVec4f64,y);return this}mat3f(k,y){this._appendField(k,a.BufferViewMat3f,y);return this}mat3f64(k,y){this._appendField(k,a.BufferViewMat3f64,
y);return this}mat4f(k,y){this._appendField(k,a.BufferViewMat4f,y);return this}mat4f64(k,y){this._appendField(k,a.BufferViewMat4f64,y);return this}vec4u8(k,y){this._appendField(k,a.BufferViewVec4u8,y);return this}f32(k,y){this._appendField(k,a.BufferViewFloat,y);return this}f64(k,y){this._appendField(k,a.BufferViewFloat64,y);return this}u8(k,y){this._appendField(k,a.BufferViewUint8,y);return this}u16(k,y){this._appendField(k,a.BufferViewUint16,y);return this}i8(k,y){this._appendField(k,a.BufferViewInt8,
y);return this}vec2i8(k,y){this._appendField(k,a.BufferViewVec2i8,y);return this}vec2i16(k,y){this._appendField(k,a.BufferViewVec2i16,y);return this}vec2u8(k,y){this._appendField(k,a.BufferViewVec2u8,y);return this}vec4u16(k,y){this._appendField(k,a.BufferViewVec4u16,y);return this}u32(k,y){this._appendField(k,a.BufferViewUint32,y);return this}_appendField(k,y,t){if(this._fields.has(k))e.assert(!1,`${k} already added to vertex buffer layout`);else{var F=y.ElementCount*d.elementTypeSize(y.ElementType),
H=this._stride;this._stride+=F;this._fields.set(k,{size:F,constructor:y,offset:H,optional:t})}}createBuffer(k){return new c(this,k)}createView(k){return new c(this,k)}clone(){const k=new f;k._stride=this._stride;k._fields=new Map;this._fields.forEach((y,t)=>k._fields.set(t,y));k.BufferType=this.BufferType;return k}get stride(){if(this._lastAligned!==this._fields.size){let k=1;this._fields.forEach(y=>k=Math.max(k,d.elementTypeSize(y.constructor.ElementType)));this._stride=Math.floor((this._stride+
k-1)/k)*k;this._lastAligned=this._fields.size}return this._stride}get fields(){return this._fields}}class h{constructor(k){this.fields=[];k.fields.forEach((y,t)=>{var F=y.constructor;this.fields.push([t,{...y,constructor:`${F.ElementType}_${F.ElementCount}`}])});this.stride=k.stride}}const v=[a.BufferViewFloat,a.BufferViewVec2f,a.BufferViewVec3f,a.BufferViewVec4f,a.BufferViewMat3f,a.BufferViewMat4f,a.BufferViewFloat64,a.BufferViewVec2f64,a.BufferViewVec3f64,a.BufferViewVec4f64,a.BufferViewMat3f64,
a.BufferViewMat4f64,a.BufferViewUint8,a.BufferViewVec2u8,a.BufferViewVec3u8,a.BufferViewVec4u8,a.BufferViewUint16,a.BufferViewVec2u16,a.BufferViewVec3u16,a.BufferViewVec4u16,a.BufferViewUint32,a.BufferViewVec2u32,a.BufferViewVec3u32,a.BufferViewVec4u32,a.BufferViewInt8,a.BufferViewVec2i8,a.BufferViewVec3i8,a.BufferViewVec4i8,a.BufferViewInt16,a.BufferViewVec2i16,a.BufferViewVec3i16,a.BufferViewVec4i16,a.BufferViewInt32,a.BufferViewVec2i32,a.BufferViewVec3i32,a.BufferViewVec4i32],G=new Map;v.forEach(k=>
G.set(`${k.ElementType}_${k.ElementCount}`,k));b.InterleavedBuffer=c;b.InterleavedLayout=f;b.PackedLayout=h;b.newLayout=function(){return new f};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/BufferView":function(){define("exports ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(b,a,d,e,c,f,h){class v extends e.BufferViewScalarImpl{constructor(u,L=0,Y,X){super(Float32Array,u,
L,Y,X);this.elementType="f32"}static fromTypedArray(u,L){return new v(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}v.ElementType="f32";class G extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Float32Array,u,L,Y,X);this.elementType="f32"}slice(u,L){return this.sliceBuffer(G,u,L)}static fromTypedArray(u,L){return new G(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}G.ElementType="f32";class k extends f.BufferViewVec3Impl{constructor(u,L=0,Y,X){super(Float32Array,u,L,Y,X);this.elementType=
"f32"}slice(u,L){return this.sliceBuffer(k,u,L)}static fromTypedArray(u,L){return new k(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}k.ElementType="f32";class y extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Float32Array,u,L,Y,X);this.elementType="f32"}slice(u,L){return this.sliceBuffer(y,u,L)}static fromTypedArray(u,L){return new y(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}y.ElementType="f32";class t extends a.BufferViewMat3Impl{constructor(u,L=0,Y,X){super(Float32Array,
u,L,Y,X);this.elementType="f32"}slice(u,L){return this.sliceBuffer(t,u,L)}static fromTypedArray(u,L){return new t(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}t.ElementType="f32";class F extends a.BufferViewMat3Impl{constructor(u,L=0,Y,X){super(Float64Array,u,L,Y,X);this.elementType="f64"}slice(u,L){return this.sliceBuffer(F,u,L)}static fromTypedArray(u,L){return new F(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}F.ElementType="f64";class H extends d.BufferViewMat4Impl{constructor(u,
L=0,Y,X){super(Float32Array,u,L,Y,X);this.elementType="f32"}slice(u,L){return this.sliceBuffer(H,u,L)}static fromTypedArray(u,L){return new H(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}H.ElementType="f32";class K extends d.BufferViewMat4Impl{constructor(u,L=0,Y,X){super(Float64Array,u,L,Y,X);this.elementType="f64"}slice(u,L){return this.sliceBuffer(K,u,L)}static fromTypedArray(u,L){return new K(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}K.ElementType="f64";class q extends e.BufferViewScalarImpl{constructor(u,
L=0,Y,X){super(Float64Array,u,L,Y,X);this.elementType="f64"}slice(u,L){return this.sliceBuffer(q,u,L)}static fromTypedArray(u,L){return new q(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}q.ElementType="f64";class n extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Float64Array,u,L,Y,X);this.elementType="f64"}slice(u,L){return this.sliceBuffer(n,u,L)}static fromTypedArray(u,L){return new n(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}n.ElementType="f64";class A extends f.BufferViewVec3Impl{constructor(u,
L=0,Y,X){super(Float64Array,u,L,Y,X);this.elementType="f64"}slice(u,L){return this.sliceBuffer(A,u,L)}static fromTypedArray(u,L){return new A(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}A.ElementType="f64";class z extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Float64Array,u,L,Y,X);this.elementType="f64"}slice(u,L){return this.sliceBuffer(z,u,L)}static fromTypedArray(u,L){return new z(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}z.ElementType="f64";class J extends e.BufferViewScalarImpl{constructor(u,
L=0,Y,X){super(Uint8Array,u,L,Y,X);this.elementType="u8"}slice(u,L){return this.sliceBuffer(J,u,L)}static fromTypedArray(u,L){return new J(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}J.ElementType="u8";class r extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Uint8Array,u,L,Y,X);this.elementType="u8"}slice(u,L){return this.sliceBuffer(r,u,L)}static fromTypedArray(u,L){return new r(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}r.ElementType="u8";class g extends f.BufferViewVec3Impl{constructor(u,
L=0,Y,X){super(Uint8Array,u,L,Y,X);this.elementType="u8"}slice(u,L){return this.sliceBuffer(g,u,L)}static fromTypedArray(u,L){return new g(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}g.ElementType="u8";class p extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Uint8Array,u,L,Y,X);this.elementType="u8"}slice(u,L){return this.sliceBuffer(p,u,L)}static fromTypedArray(u,L){return new p(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}p.ElementType="u8";class x extends e.BufferViewScalarImpl{constructor(u,
L=0,Y,X){super(Uint16Array,u,L,Y,X);this.elementType="u16"}slice(u,L){return this.sliceBuffer(x,u,L)}static fromTypedArray(u,L){return new x(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}x.ElementType="u16";class m extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Uint16Array,u,L,Y,X);this.elementType="u16"}slice(u,L){return this.sliceBuffer(m,u,L)}static fromTypedArray(u,L){return new m(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}m.ElementType="u16";class w extends f.BufferViewVec3Impl{constructor(u,
L=0,Y,X){super(Uint16Array,u,L,Y,X);this.elementType="u16"}slice(u,L){return this.sliceBuffer(w,u,L)}static fromTypedArray(u,L){return new w(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}w.ElementType="u16";class D extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Uint16Array,u,L,Y,X);this.elementType="u16"}slice(u,L){return this.sliceBuffer(D,u,L)}static fromTypedArray(u,L){return new D(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}D.ElementType="u16";class M extends e.BufferViewScalarImpl{constructor(u,
L=0,Y,X){super(Uint32Array,u,L,Y,X);this.elementType="u32"}slice(u,L){return this.sliceBuffer(M,u,L)}static fromTypedArray(u,L){return new M(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}M.ElementType="u32";class S extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Uint32Array,u,L,Y,X);this.elementType="u32"}slice(u,L){return this.sliceBuffer(S,u,L)}static fromTypedArray(u,L){return new S(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}S.ElementType="u32";class V extends f.BufferViewVec3Impl{constructor(u,
L=0,Y,X){super(Uint32Array,u,L,Y,X);this.elementType="u32"}slice(u,L){return this.sliceBuffer(V,u,L)}static fromTypedArray(u,L){return new V(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}V.ElementType="u32";class B extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Uint32Array,u,L,Y,X);this.elementType="u32"}slice(u,L){return this.sliceBuffer(B,u,L)}static fromTypedArray(u,L){return new B(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}B.ElementType="u32";class P extends e.BufferViewScalarImpl{constructor(u,
L=0,Y,X){super(Int8Array,u,L,Y,X);this.elementType="i8"}slice(u,L){return this.sliceBuffer(P,u,L)}static fromTypedArray(u,L){return new P(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}P.ElementType="i8";class E extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Int8Array,u,L,Y,X);this.elementType="i8"}slice(u,L){return this.sliceBuffer(E,u,L)}static fromTypedArray(u,L){return new E(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}E.ElementType="i8";class l extends f.BufferViewVec3Impl{constructor(u,
L=0,Y,X){super(Int8Array,u,L,Y,X);this.elementType="i8"}slice(u,L){return this.sliceBuffer(l,u,L)}static fromTypedArray(u,L){return new l(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}l.ElementType="i8";class C extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Int8Array,u,L,Y,X);this.elementType="i8"}slice(u,L){return this.sliceBuffer(C,u,L)}static fromTypedArray(u,L){return new C(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}C.ElementType="i8";class Q extends e.BufferViewScalarImpl{constructor(u,
L=0,Y,X){super(Int16Array,u,L,Y,X);this.elementType="i16"}slice(u,L){return this.sliceBuffer(Q,u,L)}static fromTypedArray(u,L){return new Q(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}Q.ElementType="i16";class I extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Int16Array,u,L,Y,X);this.elementType="i16"}slice(u,L){return this.sliceBuffer(I,u,L)}static fromTypedArray(u,L){return new I(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}I.ElementType="i16";class N extends f.BufferViewVec3Impl{constructor(u,
L=0,Y,X){super(Int16Array,u,L,Y,X);this.elementType="i16"}slice(u,L){return this.sliceBuffer(N,u,L)}static fromTypedArray(u,L){return new N(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}N.ElementType="i16";class R extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Int16Array,u,L,Y,X);this.elementType="i16"}slice(u,L){return this.sliceBuffer(R,u,L)}static fromTypedArray(u,L){return new R(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}R.ElementType="i16";class U extends e.BufferViewScalarImpl{constructor(u,
L=0,Y,X){super(Int32Array,u,L,Y,X);this.elementType="i32"}slice(u,L){return this.sliceBuffer(U,u,L)}static fromTypedArray(u,L){return new U(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}U.ElementType="i32";class Z extends c.BufferViewVec2Impl{constructor(u,L=0,Y,X){super(Int32Array,u,L,Y,X);this.elementType="i32"}slice(u,L){return this.sliceBuffer(Z,u,L)}static fromTypedArray(u,L){return new Z(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}Z.ElementType="i32";class O extends f.BufferViewVec3Impl{constructor(u,
L=0,Y,X){super(Int32Array,u,L,Y,X);this.elementType="i32"}slice(u,L){return this.sliceBuffer(O,u,L)}static fromTypedArray(u,L){return new O(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}O.ElementType="i32";class T extends h.BufferViewVec4Impl{constructor(u,L=0,Y,X){super(Int32Array,u,L,Y,X);this.elementType="i32"}slice(u,L){return this.sliceBuffer(T,u,L)}static fromTypedArray(u,L){return new T(u.buffer,u.byteOffset,L,u.byteOffset+u.byteLength)}}T.ElementType="i32";b.BufferViewFloat=v;b.BufferViewFloat64=
q;b.BufferViewInt16=Q;b.BufferViewInt32=U;b.BufferViewInt8=P;b.BufferViewMat3f=t;b.BufferViewMat3f64=F;b.BufferViewMat4f=H;b.BufferViewMat4f64=K;b.BufferViewUint16=x;b.BufferViewUint32=M;b.BufferViewUint8=J;b.BufferViewVec2f=G;b.BufferViewVec2f64=n;b.BufferViewVec2i16=I;b.BufferViewVec2i32=Z;b.BufferViewVec2i8=E;b.BufferViewVec2u16=m;b.BufferViewVec2u32=S;b.BufferViewVec2u8=r;b.BufferViewVec3f=k;b.BufferViewVec3f64=A;b.BufferViewVec3i16=N;b.BufferViewVec3i32=O;b.BufferViewVec3i8=l;b.BufferViewVec3u16=
w;b.BufferViewVec3u32=V;b.BufferViewVec3u8=g;b.BufferViewVec4f=y;b.BufferViewVec4f64=z;b.BufferViewVec4i16=R;b.BufferViewVec4i32=T;b.BufferViewVec4i8=C;b.BufferViewVec4u16=D;b.BufferViewVec4u32=B;b.BufferViewVec4u8=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat3":function(){define(["exports"],function(b){class a{constructor(d,e,c=0,f,h){this.TypedArrayConstructor=d;this.elementCount=9;d=this.TypedArrayConstructor;void 0===f&&(f=9*d.BYTES_PER_ELEMENT);
const v=0===e.byteLength?0:c;this.typedBuffer=null==h?new d(e,v):new d(e,v,(h-c)/d.BYTES_PER_ELEMENT);this.typedBufferStride=f/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(d,e,c=this.count-e){e=this.typedBuffer.byteOffset+e*this.stride;return new d(this.buffer,e,this.stride,e+c*this.stride)}getMat(d,e){d*=this.typedBufferStride;for(let c=0;9>c;c++)e[c]=this.typedBuffer[d++];
return e}setMat(d,e){d*=this.typedBufferStride;for(let c=0;9>c;c++)this.typedBuffer[d++]=e[c]}get(d,e){return this.typedBuffer[d*this.typedBufferStride+e]}set(d,e,c){this.typedBuffer[d*this.typedBufferStride+e]=c}copyFrom(d,e,c){const f=this.typedBuffer,h=e.typedBuffer;d*=this.typedBufferStride;e=c*e.typedBufferStride;for(c=0;9>c;++c)f[d++]=h[e++]}get buffer(){return this.typedBuffer.buffer}}a.ElementCount=9;b.BufferViewMat3Impl=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Mat4":function(){define(["exports"],
function(b){class a{constructor(d,e,c=0,f,h){this.TypedArrayConstructor=d;this.elementCount=16;d=this.TypedArrayConstructor;void 0===f&&(f=16*d.BYTES_PER_ELEMENT);const v=0===e.byteLength?0:c;this.typedBuffer=null==h?new d(e,v):new d(e,v,(h-c)/d.BYTES_PER_ELEMENT);this.typedBufferStride=f/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(d,e,c=this.count-e){e=this.typedBuffer.byteOffset+
e*this.stride;return new d(this.buffer,e,this.stride,e+c*this.stride)}getMat(d,e){d*=this.typedBufferStride;for(let c=0;16>c;c++)e[c]=this.typedBuffer[d++];return e}setMat(d,e){d*=this.typedBufferStride;for(let c=0;16>c;c++)this.typedBuffer[d++]=e[c]}get(d,e){return this.typedBuffer[d*this.typedBufferStride+e]}set(d,e,c){this.typedBuffer[d*this.typedBufferStride+e]=c}copyFrom(d,e,c){const f=this.typedBuffer,h=e.typedBuffer;d*=this.typedBufferStride;e=c*e.typedBufferStride;for(c=0;16>c;++c)f[d++]=
h[e++]}get buffer(){return this.typedBuffer.buffer}}a.ElementCount=16;b.BufferViewMat4Impl=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Scalar":function(){define(["exports"],function(b){class a{constructor(d,e,c=0,f,h){this.TypedArrayConstructor=d;this.elementCount=1;d=this.TypedArrayConstructor;void 0===f&&(f=d.BYTES_PER_ELEMENT);const v=0===e.byteLength?0:c;this.typedBuffer=null==h?new d(e,v):new d(e,v,(h-c)/d.BYTES_PER_ELEMENT);this.stride=
f;this.typedBufferStride=f/d.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride)}sliceBuffer(d,e,c=this.count-e){e=this.typedBuffer.byteOffset+e*this.stride;return new d(this.buffer,e,this.stride,e+c*this.stride)}get(d){return this.typedBuffer[d*this.typedBufferStride]}set(d,e){this.typedBuffer[d*this.typedBufferStride]=e}get buffer(){return this.typedBuffer.buffer}}a.ElementCount=1;b.BufferViewScalarImpl=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/geometry/support/buffer/internals/Vec2":function(){define(["exports","../../../../chunks/vec2"],function(b,a){class d{constructor(e,c,f=0,h,v){this.TypedArrayConstructor=e;this.elementCount=2;e=this.TypedArrayConstructor;void 0===h&&(h=2*e.BYTES_PER_ELEMENT);const G=0===c.byteLength?0:f;this.typedBuffer=null==v?new e(c,G):new e(c,G,(v-f)/e.BYTES_PER_ELEMENT);this.typedBufferStride=h/e.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*
this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,c,f=this.count-c){c=this.typedBuffer.byteOffset+c*this.stride;return new e(this.buffer,c,this.stride,c+f*this.stride)}getVec(e,c){e*=this.typedBufferStride;return a.set(c,this.typedBuffer[e],this.typedBuffer[e+1])}setVec(e,c){e*=this.typedBufferStride;this.typedBuffer[e++]=c[0];this.typedBuffer[e]=c[1]}get(e,c){return this.typedBuffer[e*this.typedBufferStride+c]}set(e,c,f){this.typedBuffer[e*this.typedBufferStride+c]=f}setValues(e,c,f){e*=
this.typedBufferStride;this.typedBuffer[e++]=c;this.typedBuffer[e]=f}copyFrom(e,c,f){const h=this.typedBuffer,v=c.typedBuffer;e*=this.typedBufferStride;c=f*c.typedBufferStride;h[e++]=v[c++];h[e]=v[c]}get buffer(){return this.typedBuffer.buffer}}d.ElementCount=2;b.BufferViewVec2Impl=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec3":function(){define(["exports","../../../../chunks/vec3"],function(b,a){class d{constructor(e,c,f=0,h,v){this.TypedArrayConstructor=
e;this.elementCount=3;e=this.TypedArrayConstructor;void 0===h&&(h=3*e.BYTES_PER_ELEMENT);const G=0===c.byteLength?0:f;this.typedBuffer=null==v?new e(c,G):new e(c,G,(v-f)/e.BYTES_PER_ELEMENT);this.typedBufferStride=h/e.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,c,f=this.count-c){c=this.typedBuffer.byteOffset+c*this.stride;return new e(this.buffer,c,this.stride,c+
f*this.stride)}getVec(e,c){e*=this.typedBufferStride;return a.set(c,this.typedBuffer[e],this.typedBuffer[e+1],this.typedBuffer[e+2])}setVec(e,c){e*=this.typedBufferStride;this.typedBuffer[e++]=c[0];this.typedBuffer[e++]=c[1];this.typedBuffer[e]=c[2]}get(e,c){return this.typedBuffer[e*this.typedBufferStride+c]}set(e,c,f){this.typedBuffer[e*this.typedBufferStride+c]=f}setValues(e,c,f,h){e*=this.typedBufferStride;this.typedBuffer[e++]=c;this.typedBuffer[e++]=f;this.typedBuffer[e]=h}copyFrom(e,c,f){const h=
this.typedBuffer,v=c.typedBuffer;e*=this.typedBufferStride;c=f*c.typedBufferStride;h[e++]=v[c++];h[e++]=v[c++];h[e]=v[c]}get buffer(){return this.typedBuffer.buffer}}d.ElementCount=3;b.BufferViewVec3Impl=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/internals/Vec4":function(){define(["exports","../../../../chunks/vec4"],function(b,a){class d{constructor(e,c,f=0,h,v){this.TypedArrayConstructor=e;this.start=f;this.elementCount=4;e=this.TypedArrayConstructor;
void 0===h&&(h=4*e.BYTES_PER_ELEMENT);const G=0===c.byteLength?0:f;this.typedBuffer=null==v?new e(c,G):new e(c,G,(v-f)/e.BYTES_PER_ELEMENT);this.typedBufferStride=h/e.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}sliceBuffer(e,c,f=this.count-c){c=this.typedBuffer.byteOffset+c*this.stride;return new e(this.buffer,c,this.stride,c+f*this.stride)}getVec(e,c){e*=this.typedBufferStride;
return a.set(c,this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e++],this.typedBuffer[e])}setVec(e,c){e*=this.typedBufferStride;this.typedBuffer[e++]=c[0];this.typedBuffer[e++]=c[1];this.typedBuffer[e++]=c[2];this.typedBuffer[e]=c[3]}get(e,c){return this.typedBuffer[e*this.typedBufferStride+c]}set(e,c,f){this.typedBuffer[e*this.typedBufferStride+c]=f}setValues(e,c,f,h,v){e*=this.typedBufferStride;this.typedBuffer[e++]=c;this.typedBuffer[e++]=f;this.typedBuffer[e++]=h;this.typedBuffer[e]=
v}copyFrom(e,c,f){const h=this.typedBuffer,v=c.typedBuffer;e*=this.typedBufferStride;c=f*c.typedBufferStride;h[e++]=v[c++];h[e++]=v[c++];h[e++]=v[c++];h[e]=v[c]}get buffer(){return this.typedBuffer.buffer}}d.ElementCount=4;b.BufferViewVec4Impl=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/buffer/types":function(){define(["exports"],function(b){b.elementTypeSize=function(a){switch(a){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;
case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};b.isInteger=function(a){switch(a){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};b.isSigned=function(a){switch(a){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};b.maximumValue=function(a){switch(a){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;
case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["./basicInterfaces"],function(b){class a{constructor(d){this._material=d.material;this._techniqueRepository=d.techniqueRep;this._output=d.output}dispose(){this._techniqueRepository.release(this._technique)}get technique(){return this._technique}get _stippleTextureRepository(){return this._techniqueRepository.constructionContext.stippleTextureRepository}get _markerTextureRepository(){return this._techniqueRepository.constructionContext.markerTextureRepository}ensureTechnique(d,
e){return this._technique=this._techniqueRepository.releaseAndAcquire(d,this._material.getConfiguration(this._output,e),this._technique)}ensureResources(d){return b.ResourceState.LOADED}}return a})},"esri/views/3d/webgl-engine/lib/Material":function(){define("exports ../../../../chunks/vec3f64 ../core/shaderModules/interfaces ./AnimationTimer ./basicInterfaces ./ContentObject ./ContentObjectType ./DefaultVertexAttributeLocations ../materials/internal/MaterialUtil".split(" "),function(b,a,d,e,c,f,
h,v,G){class k extends f.ContentObject{constructor(F,H){super();this.type=h.ContentObjectType.Material;this.supportsEdges=!1;this._visible=!0;this._renderPriority=0;this._vertexAttributeLocations=v.Default3D;this._pp0=a.fromValues(0,0,1);this._pp1=a.fromValues(0,0,0);this._parameters=G.copyParameters(F,H);this.validateParameters(this._parameters)}get parameters(){return this._parameters}update(F){return!1}setParameters(F,H=!0){G.updateParameters(this._parameters,F)&&(this.validateParameters(this._parameters),
H&&this.parametersChanged())}validateParameters(F){}get visible(){return this._visible}set visible(F){F!==this._visible&&(this._visible=F,this.parametersChanged())}shouldRender(F){return this.isVisible()&&this.isVisibleForOutput(F.output)&&(!this.parameters.isDecoration||F.bindParameters.decorations===c.Decorations.ON)&&0!==(this.parameters.renderOccluded&F.renderOccludedMask)}isVisibleForOutput(F){return!0}get renderPriority(){return this._renderPriority}set renderPriority(F){F!==this._renderPriority&&
(this._renderPriority=F,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){this.repository?.materialChanged(this)}intersectDraped(F,H,K,q,n,A){this._pp0[0]=this._pp1[0]=q[0];this._pp0[1]=this._pp1[1]=q[1];return this.intersect(F,H,K,this._pp0,this._pp1,n)}}class y extends e.Parameters{constructor(F,H,K){super(H,K);this.camera=F}}b.RenderOccludedFlag=void 0;(function(F){F[F.None=0]="None";F[F.Occlude=1]=
"Occlude";F[F.Transparent=2]="Transparent";F[F.OccludeAndTransparent=4]="OccludeAndTransparent";F[F.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil";F[F.Opaque=16]="Opaque"})(b.RenderOccludedFlag||(b.RenderOccludedFlag={}));class t extends d.NoParameters{constructor(){super(...arguments);this.renderOccluded=b.RenderOccludedFlag.Occlude;this.isDecoration=!1}}b.Material=k;b.MaterialParameters=t;b.UpdateParameters=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],
function(b){function a(c,...f){let h="";for(let v=0;v<f.length;v++)h+=c[v]+f[v];return h+=c[c.length-1]}class d{}const e=d;(function(c){c.int=function(f){return Math.round(f).toString()};c.float=function(f){return f.toPrecision(8)}})(a||(a={}));b.NoParameters=e;b.glsl=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/AnimationTimer":function(){define(["exports","../../../../core/time"],function(b,a){class d{constructor(){this.enabled=!0;this._time=a.Milliseconds(0)}get time(){return this._time}advance({deltaTime:c,
fixedTime:f}){if(null!=f){if(this._time===f)return!1;this._time=f;return!0}this._time=a.Milliseconds(this._time+c);return 0!==c}}class e{constructor(c,f){this.deltaTime=c;this.fixedTime=f}}b.AnimationTimer=d;b.Parameters=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["exports","./VertexAttribute"],function(b,a){a=new Map([[a.VertexAttribute.POSITION,0],[a.VertexAttribute.NORMAL,1],[a.VertexAttribute.NORMALCOMPRESSED,
1],[a.VertexAttribute.UV0,2],[a.VertexAttribute.COLOR,3],[a.VertexAttribute.COLORFEATUREATTRIBUTE,3],[a.VertexAttribute.SIZE,4],[a.VertexAttribute.TANGENT,4],[a.VertexAttribute.AUXPOS1,5],[a.VertexAttribute.SYMBOLCOLOR,5],[a.VertexAttribute.AUXPOS2,6],[a.VertexAttribute.FEATUREATTRIBUTE,6],[a.VertexAttribute.INSTANCEFEATUREATTRIBUTE,6],[a.VertexAttribute.INSTANCECOLOR,7],[a.VertexAttribute.OBJECTANDLAYERIDCOLOR,7],[a.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR,7],[a.VertexAttribute.INSTANCEMODEL,
8],[a.VertexAttribute.INSTANCEMODELNORMAL,12],[a.VertexAttribute.INSTANCEMODELORIGINHI,11],[a.VertexAttribute.INSTANCEMODELORIGINLO,15]]);b.Default3D=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("exports ../../../../../core/arrayUtils ../../../../../core/mathUtils ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../../../../../geometry/support/aaBoundingBox ../../lib/ContentObjectType ../../lib/screenSizePerspectiveUtils ../../lib/Util ../../lib/VertexAttribute".split(" "),
function(b,a,d,e,c,f,h,v,G,k){function y(x,m,w,D,M,S){if(null!=x){var V=H(m,w,J);f.setMin(z,x.bbMin);f.setMax(z,x.bbMax);null!=M&&M.applyToAabb(z);if(K(z,m,V,D)){const {primitiveIndices:B,position:P}=x;V=B?B.length:P.indices.length/3;if(1E3<V&&(x=x.getChildren(),void 0!==x)){for(const E of x)y(E,m,w,D,M,S);return}t(m,w,0,V,P.indices,P,B,M,S)}}}function t(x,m,w,D,M,S,V,B,P){if(V){const {data:W,stride:ba}=S;S=x[0];var E=x[1];x=x[2];var l=m[0]-S,C=m[1]-E;for(m=m[2]-x;w<D;++w){var Q=V[w],I=3*Q,N=ba*M[I++],
R=W[N++],U=W[N++],Z=W[N];N=ba*M[I++];var O=W[N++],T=W[N++],u=W[N];N=ba*M[I];I=W[N++];var L=W[N++];N=W[N];null!=B&&([R,U,Z]=B.applyToVertex(R,U,Z,w),[O,T,u]=B.applyToVertex(O,T,u,w),[I,L,N]=B.applyToVertex(I,L,N,w));O-=R;T-=U;u-=Z;I-=R;L-=U;N-=Z;var Y=C*N-L*m,X=m*I-N*l;const da=l*L-I*C;var ia=O*Y+T*X+u*da;if(!(Math.abs(ia)<=Number.EPSILON)){R=S-R;U=E-U;Z=x-Z;Y=R*Y+U*X+Z*da;if(0<ia){if(0>Y||Y>ia)continue}else if(0<Y||Y<ia)continue;X=U*u-T*Z;Z=Z*O-u*R;U=R*T-O*U;R=l*X+C*Z+m*U;if(0<ia){if(0>R||Y+R>ia)continue}else if(0<
R||Y+R<ia)continue;Z=(I*X+L*Z+N*U)/ia;0<=Z&&(O=F(O,T,u,I,L,N,r),P(Z,O,Q,!1))}}}else{var {data:aa,stride:ca}=S;V=x[0];S=x[1];E=x[2];x=m[0]-V;l=m[1]-S;C=m[2]-E;for(let W=w,ba=3*w;W<D;++W)if(I=ca*M[ba++],U=aa[I++],Z=aa[I++],u=aa[I],I=ca*M[ba++],m=aa[I++],w=aa[I++],Q=aa[I],I=ca*M[ba++],O=aa[I++],T=aa[I++],I=aa[I],null!=B&&([U,Z,u]=B.applyToVertex(U,Z,u,W),[m,w,Q]=B.applyToVertex(m,w,Q,W),[O,T,I]=B.applyToVertex(O,T,I,W)),m-=U,w-=Z,Q-=u,O-=U,T-=Z,I-=u,N=l*I-T*C,R=C*O-I*x,ia=x*T-O*l,L=m*N+w*R+Q*ia,!(Math.abs(L)<=
Number.EPSILON)){U=V-U;Z=S-Z;u=E-u;N=U*N+Z*R+u*ia;if(0<L){if(0>N||N>L)continue}else if(0<N||N<L)continue;R=Z*Q-w*u;u=u*m-Q*U;Z=U*w-m*Z;U=x*R+l*u+C*Z;if(0<L){if(0>U||N+U>L)continue}else if(0<U||N+U<L)continue;u=(O*R+T*u+I*Z)/L;0<=u&&(m=F(m,w,Q,O,T,I,r),P(u,m,W,!1))}}}function F(x,m,w,D,M,S,V){e.set(g,x,m,w);e.set(p,D,M,S);e.cross(V,g,p);e.normalize(V,V);return V}function H(x,m,w){return e.set(w,1/(m[0]-x[0]),1/(m[1]-x[1]),1/(m[2]-x[2]))}function K(x,m,w,D){return q(x,m,w,D,Infinity)}function q(x,m,
w,D,M){var S=(x[0]-D-m[0])*w[0],V=(x[3]+D-m[0])*w[0];let B=Math.min(S,V);S=Math.max(S,V);V=(x[1]-D-m[1])*w[1];const P=(x[4]+D-m[1])*w[1];S=Math.min(S,Math.max(V,P));if(0>S)return!1;B=Math.max(B,Math.min(V,P));if(B>S)return!1;V=(x[2]-D-m[2])*w[2];x=(x[5]+D-m[2])*w[2];S=Math.min(S,Math.max(V,x));if(0>S)return!1;B=Math.max(B,Math.min(V,x));return B>S?!1:B<M}function n(x,m){m=m?n(m):{};for(const w in x){let D=x[w];D?.forEach&&(D=A(D));null==D&&w in m||(m[w]=D)}return m}function A(x){const m=[];x.forEach(w=>
m.push(w));return m}const z=f.create(),J=c.create(),r=c.create(),g=c.create(),p=c.create();b.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};b.computeInvDir=H;b.computeNormal=F;b.copyParameters=n;b.intersectAabbInvDir=K;b.intersectAabbInvDirBefore=q;b.intersectTriangleGeometry=function(x,m,w,D,M,S){x.visible&&(x.boundingInfo?(G.assert(x.type===h.ContentObjectType.Mesh),y(x.boundingInfo,w,D,m.tolerance,M,S)):(x=x.attributes.get(k.VertexAttribute.POSITION),m=x.indices,t(w,D,0,m.length/3,m,x,void 0,
M,S)))};b.intersectTriangles=t;b.updateParameters=function(x,m){let w=!1;for(const D in m){const M=m[D];void 0!==M&&(Array.isArray(M)?null===x[D]?(x[D]=M.slice(),w=!0):a.update(x[D],M)&&(w=!0):x[D]!==M&&(w=!0,x[D]=M))}return w};b.verticalOffsetAtDistance=function(x,m,w,D,M){let S=(w.screenLength||0)*x.pixelRatio;null!=M&&(S=v.scale(S,D,m,M));return d.clamp(S*Math.tan(.5*x.fovY)/(.5*x.fullHeight)*m,w.minWorldLength||0,null!=w.maxWorldLength?w.maxWorldLength:Infinity)};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["exports","../../../../core/mathUtils","../../../ViewingMode"],function(b,a,d){function e(k,y,t){t=t.parameters;v.scale=Math.min(t.divisor/(y-t.offset),1);v.factor=Math.abs(k*k*k);return v}function c(k,y){return a.lerp(k*Math.max(y.scale,y.minScaleFactor),k,y.factor)}class f{get minScaleFactor(){return null!=this._fontHeight?Math.min(this._description.minPixelSize/this._fontHeight,1):0}constructor(k,
y,t,F={camera:{distance:0,fovY:0},divisor:0,offset:0},H){this._viewingMode=k;this._description=y;this._ellipsoidRadius=t;this.parameters=F;this._fontHeight=H;this._viewingMode===d.ViewingMode.Local?(this._coverageCompensation=this._surfaceCoverageCompensationLocal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersLocal):(this._coverageCompensation=this._surfaceCoverageCompensationGlobal,this._calculateCurvatureDependentParameters=this._calculateCurvatureDependentParametersGlobal)}update(k){if(this.parameters&&
this.parameters.camera.fovY===k.fovY&&this.parameters.camera.distance===k.distance)return!1;this._calculateParameters(k,this._ellipsoidRadius,this.parameters);return!0}overrideFontHeight(k){return k!==this._fontHeight?new f(this._viewingMode,this._description,this._ellipsoidRadius,this.parameters,k):this}_calculateParameters(k,y,t){const {scaleStart:F,scaleFallOffRange:H}=this._description,{fovY:K,distance:q}=k;var n=this._calculateCurvatureDependentParameters(k,y);y=this._coverageCompensation(k,
y,n);const {tiltAngle:A,scaleFallOffFactor:z}=n,J=Math.sin(A)*q,r=.5*Math.PI-A-K*(.5-F*y);n=J/Math.cos(r);y=(n-J/Math.cos(r+K*H*y)*z)/(1-z);t.camera.fovY=k.fovY;t.camera.distance=k.distance;t.offset=y;t.divisor=n-y;return t}_calculateCurvatureDependentParametersLocal(k,y,t=G){t.tiltAngle=this._description.curvatureDependent.min.tiltAngle;t.scaleFallOffFactor=this._description.curvatureDependent.min.scaleFallOffFactor;return t}_calculateCurvatureDependentParametersGlobal(k,y,t=G){const F=this._description.curvatureDependent;
k=1+k.distance/y;k=Math.sqrt(k*k-1);const [H,K]=[F.min.curvature,F.max.curvature];k=a.clamp((k-H)/(K-H),0,1);const [q,n]=[F.min,F.max];t.tiltAngle=a.lerp(q.tiltAngle,n.tiltAngle,k);t.scaleFallOffFactor=a.lerp(q.scaleFallOffFactor,n.scaleFallOffFactor,k);return t}_surfaceCoverageCompensationLocal(k,y,t){return(k.fovY-t.tiltAngle)/k.fovY}_surfaceCoverageCompensationGlobal(k,y,t){const F=y*y;t=t.tiltAngle+.5*Math.PI;const {fovY:H,distance:K}=k;k=K*K+F-2*Math.cos(t)*K*y;const q=Math.sqrt(k);return(Math.acos(Math.sqrt(k-
F)/q)-Math.asin(y/(q/Math.sin(t)))+.5*H)/H}}const h={curvatureDependent:{min:{curvature:a.deg2rad(10),tiltAngle:a.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:a.deg2rad(70),tiltAngle:a.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},v={scale:0,factor:0,minScaleFactor:0},G={tiltAngle:0,scaleFallOffFactor:0};b.applyPrecomputedScaleFactor=function(k,y,t=[0,0]){y=Math.min(Math.max(y.scale,y.minScaleFactor),1);t[0]=k[0]*y;t[1]=k[1]*y;return t};b.applyScaleFactor=
c;b.getLabelSettings=function(k,y){const {curvatureDependent:t,scaleStart:F,scaleFallOffRange:H}=h;return new f(k,{curvatureDependent:{min:{curvature:t.min.curvature,tiltAngle:t.min.tiltAngle,scaleFallOffFactor:.7},max:{curvature:t.max.curvature,tiltAngle:t.max.tiltAngle,scaleFallOffFactor:.95}},scaleStart:F,scaleFallOffRange:H,minPixelSize:14},y)};b.getSettings=function(k,y){return new f(k,h,y)};b.precomputeScaleFactor=function(k,y,t,F){k=e(k,y,t);k.minScaleFactor=0;k=c(1,k);F.scale=k;F.factor=0;
F.minScaleFactor=t.minScaleFactor};b.scale=function(k,y,t,F){return c(k,e(y,t,F))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/VisualVariablePassParameters":function(){define(["exports","../../layers/support/FastSymbolUpdates","../lib/Material"],function(b,a,d){class e extends a.VisualVariablesParameters{constructor(){super(...arguments);this.renderOccluded=d.RenderOccludedFlag.Occlude;this.isDecoration=!1}}b.VisualVariablePassParameters=e;
b.vvColorNumber=8;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define("exports ../../../../core/has ../../../../core/mathUtils ../../../../chunks/mat3 ../../../../chunks/mat3f64 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec3 ../../../../chunks/vec3f64 ../../../../renderers/support/lengthUtils ../../support/debugFlags ../../webgl-engine/core/shaderModules/interfaces".split(" "),function(b,a,d,
e,c,f,h,v,G,k,y,t){function F(O){return null!==O&&void 0!==O}function H(O){return"number"===typeof O}function K(O){return"string"===typeof O}function q(O,T){O&&O.push(T)}function n(O,T,u,L=h.create()){O=O||0;T=T||0;u=u||0;0!==O&&f.rotateZ(L,L,-O/180*Math.PI);0!==T&&f.rotateX(L,L,T/180*Math.PI);0!==u&&f.rotateY(L,L,u/180*Math.PI);return L}function A(O,T,u,L,Y){const X=O.minSize,ia=O.maxSize;if(O.expression)return q(Y,"Could not convert size info: expression not supported"),!1;if(O.useSymbolValue)return O=
L.symbolSize[u],T.minSize[u]=O,T.maxSize[u]=O,T.offset[u]=T.minSize[u],T.factor[u]=0,T.type[u]=b.FastSizeType.DefinedSize,!0;if(F(O.field)){if(F(O.stops)){if(2===O.stops.length&&H(O.stops[0].size)&&H(O.stops[1].size))return z(O.stops[0].size,O.stops[1].size,O.stops[0].value,O.stops[1].value,T,u),T.type[u]=b.FastSizeType.DefinedSize,!0;q(Y,"Could not convert size info: stops only supported with 2 elements");return!1}if(H(X)&&H(ia)&&F(O.minDataValue)&&F(O.maxDataValue))return z(X,ia,O.minDataValue,
O.maxDataValue,T,u),T.type[u]=b.FastSizeType.DefinedSize,!0;if("unknown"===O.valueUnit)return q(Y,"Could not convert size info: proportional size not supported"),!1;if(null!=k.meterIn[O.valueUnit])return T.minSize[u]=-Infinity,T.maxSize[u]=Infinity,T.offset[u]=0,T.factor[u]=1/k.meterIn[O.valueUnit],T.type[u]=b.FastSizeType.DefinedSize,!0;q(Y,"Could not convert size info: scale-dependent size not supported");return!1}if(!F(O.field)){if(O.stops?.[0]&&H(O.stops[0].size))return T.minSize[u]=O.stops[0].size,
T.maxSize[u]=O.stops[0].size,T.offset[u]=T.minSize[u],T.factor[u]=0,T.type[u]=b.FastSizeType.DefinedSize,!0;if(H(X))return T.minSize[u]=X,T.maxSize[u]=X,T.offset[u]=X,T.factor[u]=0,T.type[u]=b.FastSizeType.DefinedSize,!0}q(Y,"Could not convert size info: unsupported variant of sizeInfo");return!1}function z(O,T,u,L,Y,X){L=0<Math.abs(L-u)?(T-O)/(L-u):0;Y.minSize[X]=0<L?O:T;Y.maxSize[X]=0<L?T:O;Y.offset[X]=O-u*L;Y.factor[X]=L}function J(O,T,u,L){if(O.normalizationField||O.valueRepresentation)return q(L,
"Could not convert size info: unsupported property"),null;var Y=O.field;if(null!=Y&&!K(Y))return q(L,"Could not convert size info: field is not a string"),null;if(!T.size)T.size=new B(O.field);else if(O.field)if(!T.size.field)T.size.field=O.field;else if(O.field!==T.size.field)return q(L,"Could not convert size info: multiple fields in use"),null;switch(O.axis){case "width":return(Y=A(O,T.size,0,u,L))?T:null;case "height":return(Y=A(O,T.size,2,u,L))?T:null;case "depth":return(Y=A(O,T.size,1,u,L))?
T:null;case "width-and-depth":return(Y=A(O,T.size,0,u,L))&&A(O,T.size,1,u,L),Y?T:null;case null:case void 0:case "all":return(Y=(Y=(Y=A(O,T.size,0,u,L))&&A(O,T.size,1,u,L))&&A(O,T.size,2,u,L))?T:null;default:return q(L,`Could not convert size info: unknown axis "${O.axis}""`),null}}function r(O,T,u){for(let L=0;3>L;++L){let Y=T.unitInMeters;O.type[L]===b.FastSizeType.DefinedSize&&(Y*=T.modelSize[L],O.type[L]=b.FastSizeType.DefinedScale);O.minSize[L]/=Y;O.maxSize[L]/=Y;O.offset[L]/=Y;O.factor[L]/=
Y}if(O.type[0]!==b.FastSizeType.Undefined)T=0;else if(O.type[1]!==b.FastSizeType.Undefined)T=1;else if(O.type[2]!==b.FastSizeType.Undefined)T=2;else return q(u,"No size axis contains a valid size or scale"),!1;for(u=0;3>u;++u)O.type[u]===b.FastSizeType.Undefined&&(O.minSize[u]=O.minSize[T],O.maxSize[u]=O.maxSize[T],O.offset[u]=O.offset[T],O.factor[u]=O.factor[T],O.type[u]=O.type[T]);return!0}function g(O,T,u){O[4*T]=u.r/255;O[4*T+1]=u.g/255;O[4*T+2]=u.b/255;O[4*T+3]=u.a}function p(O,T,u){if(O.normalizationField)return q(u,
"Could not convert color info: unsupported property"),null;if(K(O.field))if(O.stops){if(8<O.stops.length)return q(u,"Could not convert color info: too many color stops"),null;T.color=new P(O.field);O=O.stops;for(u=0;8>u;++u){const L=O[Math.min(u,O.length-1)];T.color.values[u]=L.value;g(T.color.colors,u,L.color)}}else return q(u,"Could not convert color info: missing stops or colors"),null;else if(O.stops&&0<=O.stops.length)for(O=O.stops&&0<=O.stops.length&&O.stops[0].color,T.color={field:null,values:[0,
0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},u=0;8>u;u++)T.color.values[u]=Infinity,g(T.color.colors,u,O);else return q(u,"Could not convert color info: no field and no colors/stops"),null;return T}function x(O,T,u){if(O.normalizationField)return q(u,"Could not convert opacity info: unsupported property"),null;if(K(O.field))if(O.stops){if(8<O.stops.length)return q(u,"Could not convert opacity info: too many opacity stops"),null;T.opacity=new E(O.field);
O=O.stops;for(u=0;8>u;++u){const L=O[Math.min(u,O.length-1)];T.opacity.values[u]=L.value;T.opacity.opacityValues[u]=L.opacity}}else return q(u,"Could not convert opacity info: missing stops or opacities"),null;else if(O.stops&&0<=O.stops.length)for(O=O.stops&&0<=O.stops.length?O.stops[0].opacity:0,T.opacity={field:null,values:[0,0,0,0,0,0,0,0],opacityValues:[0,0,0,0,0,0,0,0]},u=0;8>u;u++)T.opacity.values[u]=Infinity,T.opacity.opacityValues[u]=O;else return q(u,"Could not convert opacity info: no field and no opacities/stops"),
null;return T}function m(O,T,u){O=2===u&&"arithmetic"===O.rotationType;T.offset[u]=O?90:0;T.factor[u]=O?-1:1;T.type[u]=1}function w(O,T,u){if(!K(O.field))return q(u,"Could not convert rotation info: field is not a string"),null;if(!T.rotation)T.rotation={field:O.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(O.field)if(!T.rotation.field)T.rotation.field=O.field;else if(O.field!==T.rotation.field)return q(u,"Could not convert rotation info: multiple fields in use"),null;switch(O.axis){case "tilt":return m(O,
T.rotation,0),T;case "roll":return m(O,T.rotation,1),T;case null:case void 0:case "heading":return m(O,T.rotation,2),T;default:return q(u,`Could not convert rotation info: unknown axis "${O.axis}""`),null}}function D(O,T,u){if(!O)return null;const L=O.reduce((Y,X)=>{if(!Y)return Y;if(X.valueExpression)return q(u,"Could not convert visual variables: arcade expressions not supported"),null;switch(X.type){case "size":return T.supports.size?J(X,Y,T,u):Y;case "color":return T.supports.color?p(X,Y,u):Y;
case "opacity":return T.supports.opacity?x(X,Y,u):null;case "rotation":return T.supports.rotation?w(X,Y,u):Y;default:return null}},new C);return 0<O.length&&L&&!L.size&&!L.color&&!L.opacity&&!L.rotation||L?.size&&!r(L.size,T,u)?null:L}function M(O,T,u){if(!!O!==!!T||O&&O.field!==T?.field)return!1;if(O&&"rotation"===u)for(u=0;3>u;u++)if(O.type[u]!==T.type[u]||O.offset[u]!==T.offset[u]||O.factor[u]!==T.factor[u])return!1;return!0}function S(O,T){O=new N(O);O.vvSize&&(O.vvSymbolAnchor=T.anchor,f.identity(Z),
n(T.rotation[2],T.rotation[0],T.rotation[1],Z),O.vvSymbolRotationMatrix=O.vvSymbolRotationMatrix||c.create(),e.fromMat4(O.vvSymbolRotationMatrix,Z));return O}b.FastSizeType=void 0;(function(O){O[O.Undefined=0]="Undefined";O[O.DefinedSize=1]="DefinedSize";O[O.DefinedScale=2]="DefinedScale"})(b.FastSizeType||(b.FastSizeType={}));b.FastRotationType=void 0;(function(O){O[O.Undefined=0]="Undefined";O[O.DefinedAngle=1]="DefinedAngle"})(b.FastRotationType||(b.FastRotationType={}));class V{constructor(O){this.field=
O}}class B extends V{constructor(O){super(O);this.minSize=[0,0,0];this.maxSize=[0,0,0];this.offset=[0,0,0];this.factor=[0,0,0];this.type=[b.FastSizeType.Undefined,b.FastSizeType.Undefined,b.FastSizeType.Undefined]}}class P extends V{constructor(O){super(O);this.colors=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.values=[0,0,0,0,0,0,0,0]}}class E extends V{constructor(O){super(O);this.values=[0,0,0,0,0,0,0,0];this.opacityValues=[0,0,0,0,0,0,0,0]}}class l extends V{constructor(O){super(O);
this.offset=[0,0,0];this.factor=[1,1,1];this.type=[0,0,0]}}class C{}class Q{constructor(O,T=[1,1,1],u=[1,1,1],L=1,Y=[0,0,0],X=[1,1,1],ia=[0,0,0]){this.supports=O;this.modelSize=T;this.symbolSize=u;this.unitInMeters=L;this.anchor=Y;this.scale=X;this.rotation=ia}}class I{constructor(O,T,u){this.visualVariables=O;this.materialParameters=T;this.requiresShaderTransformation=u}}class N extends t.NoParameters{constructor(O){super();this.vvSize=O?.size??null;this.vvColor=O?.color??null;this.vvOpacity=O?.opacity??
null}}const R=h.create(),U=G.create(),Z=h.create();b.ConvertOptions=Q;b.FastColorInfo=P;b.FastOpacityInfo=E;b.FastRotationInfo=l;b.FastSizeInfo=B;b.FastSymbolUpdatesState=I;b.FastVisualVariables=C;b.VisualVariablesParameters=N;b.convertVisualVariables=D;b.evaluateModelTransform=function(O,T,u){if(!O.vvSize)return u;f.copy(R,u);u=O.vvSymbolRotationMatrix;f.set(Z,u[0],u[1],u[2],0,u[3],u[4],u[5],0,u[6],u[7],u[8],0,0,0,0,1);f.multiply(R,R,Z);for(u=0;3>u;++u)U[u]=d.clamp(O.vvSize.offset[u]+T[0]*O.vvSize.factor[u],
O.vvSize.minSize[u],O.vvSize.maxSize[u]);f.scale(R,R,U);f.translate(R,R,O.vvSymbolAnchor);return R};b.evaluateModelTransformScale=function(O,T,u){if(!T.vvSize)return v.set(O,1,1,1),O;for(let L=0;3>L;++L)O[L]=d.clamp(T.vvSize.offset[L]+u[0]*T.vvSize.factor[L],T.vvSize.minSize[L],T.vvSize.maxSize[L]);return O};b.getAttributeValue=function(O,T){O=null==O?0:T.attributes[O];return"number"===typeof O&&isFinite(O)?O:0};b.getMaterialParameters=S;b.initFastSymbolUpdatesState=function(O,T){return!O||y.debugFlags.TESTS_DISABLE_FAST_UPDATES?
null:(O=D(O.visualVariables,T))?new I(O,S(O,T),!!O.size):null};b.updateFastSymbolUpdatesState=function(O,T,u){if(!T||!O)return!1;const L=O.visualVariables;T=D(T.visualVariables,u);if(!(T&&M(L.size,T.size,"size")&&M(L.color,T.color,"color")&&M(L.rotation,T.rotation,"rotation")&&M(L.opacity,T.opacity,"opacity")))return!1;O.visualVariables=T;O.materialParameters=S(T,u);O.requiresShaderTransformation=!!T.size;return!0};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/mat3":function(){define(["exports",
"./common"],function(b,a){function d(l,C){l[0]=C[0];l[1]=C[1];l[2]=C[2];l[3]=C[4];l[4]=C[5];l[5]=C[6];l[6]=C[8];l[7]=C[9];l[8]=C[10];return l}function e(l,C){l[0]=C[0];l[1]=C[1];l[2]=C[2];l[3]=C[3];l[4]=C[4];l[5]=C[5];l[6]=C[6];l[7]=C[7];l[8]=C[8];return l}function c(l,C,Q,I,N,R,U,Z,O,T){l[0]=C;l[1]=Q;l[2]=I;l[3]=N;l[4]=R;l[5]=U;l[6]=Z;l[7]=O;l[8]=T;return l}function f(l){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=1;l[5]=0;l[6]=0;l[7]=0;l[8]=1;return l}function h(l,C){if(l===C){const Q=C[1],I=C[2],N=C[5];l[1]=
C[3];l[2]=C[6];l[3]=Q;l[5]=C[7];l[6]=I;l[7]=N}else l[0]=C[0],l[1]=C[3],l[2]=C[6],l[3]=C[1],l[4]=C[4],l[5]=C[7],l[6]=C[2],l[7]=C[5],l[8]=C[8];return l}function v(l,C){const Q=C[0],I=C[1],N=C[2],R=C[3],U=C[4],Z=C[5],O=C[6],T=C[7];C=C[8];const u=C*U-Z*T,L=-C*R+Z*O,Y=T*R-U*O;let X=Q*u+I*L+N*Y;if(!X)return null;X=1/X;l[0]=u*X;l[1]=(-C*I+N*T)*X;l[2]=(Z*I-N*U)*X;l[3]=L*X;l[4]=(C*Q-N*O)*X;l[5]=(-Z*Q+N*R)*X;l[6]=Y*X;l[7]=(-T*Q+I*O)*X;l[8]=(U*Q-I*R)*X;return l}function G(l,C){const Q=C[0],I=C[1],N=C[2],R=C[3],
U=C[4],Z=C[5],O=C[6],T=C[7];C=C[8];l[0]=U*C-Z*T;l[1]=N*T-I*C;l[2]=I*Z-N*U;l[3]=Z*O-R*C;l[4]=Q*C-N*O;l[5]=N*R-Q*Z;l[6]=R*T-U*O;l[7]=I*O-Q*T;l[8]=Q*U-I*R;return l}function k(l){const C=l[3],Q=l[4],I=l[5],N=l[6],R=l[7],U=l[8];return l[0]*(U*Q-I*R)+l[1]*(-U*C+I*N)+l[2]*(R*C-Q*N)}function y(l,C,Q){const I=C[0],N=C[1],R=C[2],U=C[3],Z=C[4],O=C[5],T=C[6],u=C[7];C=C[8];const L=Q[0],Y=Q[1],X=Q[2],ia=Q[3],aa=Q[4],ca=Q[5],W=Q[6],ba=Q[7];Q=Q[8];l[0]=L*I+Y*U+X*T;l[1]=L*N+Y*Z+X*u;l[2]=L*R+Y*O+X*C;l[3]=ia*I+aa*U+
ca*T;l[4]=ia*N+aa*Z+ca*u;l[5]=ia*R+aa*O+ca*C;l[6]=W*I+ba*U+Q*T;l[7]=W*N+ba*Z+Q*u;l[8]=W*R+ba*O+Q*C;return l}function t(l,C,Q){const I=C[0],N=C[1],R=C[2],U=C[3],Z=C[4],O=C[5],T=C[6],u=C[7];C=C[8];const L=Q[0];Q=Q[1];l[0]=I;l[1]=N;l[2]=R;l[3]=U;l[4]=Z;l[5]=O;l[6]=L*I+Q*U+T;l[7]=L*N+Q*Z+u;l[8]=L*R+Q*O+C;return l}function F(l,C,Q){const I=C[0],N=C[1],R=C[2],U=C[3],Z=C[4],O=C[5],T=C[6],u=C[7];C=C[8];const L=Math.sin(Q);Q=Math.cos(Q);l[0]=Q*I+L*U;l[1]=Q*N+L*Z;l[2]=Q*R+L*O;l[3]=Q*U-L*I;l[4]=Q*Z-L*N;l[5]=
Q*O-L*R;l[6]=T;l[7]=u;l[8]=C;return l}function H(l,C,Q){const I=Q[0],N=Q[1];Q=Q[2];l[0]=I*C[0];l[1]=I*C[1];l[2]=I*C[2];l[3]=N*C[3];l[4]=N*C[4];l[5]=N*C[5];l[6]=Q*C[6];l[7]=Q*C[7];l[8]=Q*C[8];return l}function K(l,C,Q){const I=Q[0];Q=Q[1];l[0]=I*C[0];l[1]=I*C[1];l[2]=I*C[2];l[3]=Q*C[3];l[4]=Q*C[4];l[5]=Q*C[5];return l}function q(l,C){l[0]=1;l[1]=0;l[2]=0;l[3]=0;l[4]=1;l[5]=0;l[6]=C[0];l[7]=C[1];l[8]=1;return l}function n(l,C){const Q=Math.sin(C);C=Math.cos(C);l[0]=C;l[1]=Q;l[2]=0;l[3]=-Q;l[4]=C;l[5]=
0;l[6]=0;l[7]=0;l[8]=1;return l}function A(l,C){l[0]=C[0];l[1]=0;l[2]=0;l[3]=0;l[4]=C[1];l[5]=0;l[6]=0;l[7]=0;l[8]=1;return l}function z(l,C){l[0]=C[0];l[1]=C[1];l[2]=0;l[3]=C[2];l[4]=C[3];l[5]=0;l[6]=C[4];l[7]=C[5];l[8]=1;return l}function J(l,C){var Q=C[0],I=C[1],N=C[2];C=C[3];var R=Q+Q,U=I+I;const Z=N+N;Q*=R;const O=I*R;I*=U;const T=N*R,u=N*U;N*=Z;R*=C;U*=C;C*=Z;l[0]=1-I-N;l[3]=O-C;l[6]=T+U;l[1]=O+C;l[4]=1-Q-N;l[7]=u-R;l[2]=T-U;l[5]=u+R;l[8]=1-Q-I;return l}function r(l,C){const Q=C[0],I=C[1],N=
C[2],R=C[4],U=C[5],Z=C[6],O=C[8],T=C[9];C=C[10];const u=C*U-Z*T,L=-C*R+Z*O,Y=T*R-U*O;var X=Q*u+I*L+N*Y;if(!X)return null;X=1/X;l[0]=u*X;l[1]=(-C*I+N*T)*X;l[2]=(Z*I-N*U)*X;l[3]=L*X;l[4]=(C*Q-N*O)*X;l[5]=(-Z*Q+N*R)*X;l[6]=Y*X;l[7]=(-T*Q+I*O)*X;l[8]=(U*Q-I*R)*X;return l}function g(l,C){const Q=C[0],I=C[1],N=C[2],R=C[3],U=C[4],Z=C[5],O=C[6],T=C[7];var u=C[8],L=C[9],Y=C[10],X=C[11];const ia=C[12],aa=C[13],ca=C[14];C=C[15];const W=Q*Z-I*U,ba=Q*O-N*U,da=Q*T-R*U,ea=I*O-N*Z,fa=I*T-R*Z,ja=N*T-R*O,ha=u*aa-L*
ia,ka=u*ca-Y*ia;u=u*C-X*ia;const la=L*ca-Y*aa;L=L*C-X*aa;Y=Y*C-X*ca;X=W*Y-ba*L+da*la+ea*u-fa*ka+ja*ha;if(!X)return null;X=1/X;l[0]=(Z*Y-O*L+T*la)*X;l[1]=(O*u-U*Y-T*ka)*X;l[2]=(U*L-Z*u+T*ha)*X;l[3]=(N*L-I*Y-R*la)*X;l[4]=(Q*Y-N*u+R*ka)*X;l[5]=(I*u-Q*L-R*ha)*X;l[6]=(aa*ja-ca*fa+C*ea)*X;l[7]=(ca*da-ia*ja-C*ba)*X;l[8]=(ia*fa-aa*da+C*W)*X;return l}function p(l,C,Q){l[0]=2/C;l[1]=0;l[2]=0;l[3]=0;l[4]=-2/Q;l[5]=0;l[6]=-1;l[7]=1;l[8]=1;return l}function x(l){return"mat3("+l[0]+", "+l[1]+", "+l[2]+", "+l[3]+
", "+l[4]+", "+l[5]+", "+l[6]+", "+l[7]+", "+l[8]+")"}function m(l){return Math.sqrt(l[0]**2+l[1]**2+l[2]**2+l[3]**2+l[4]**2+l[5]**2+l[6]**2+l[7]**2+l[8]**2)}function w(l,C,Q){l[0]=C[0]+Q[0];l[1]=C[1]+Q[1];l[2]=C[2]+Q[2];l[3]=C[3]+Q[3];l[4]=C[4]+Q[4];l[5]=C[5]+Q[5];l[6]=C[6]+Q[6];l[7]=C[7]+Q[7];l[8]=C[8]+Q[8];return l}function D(l,C,Q){l[0]=C[0]-Q[0];l[1]=C[1]-Q[1];l[2]=C[2]-Q[2];l[3]=C[3]-Q[3];l[4]=C[4]-Q[4];l[5]=C[5]-Q[5];l[6]=C[6]-Q[6];l[7]=C[7]-Q[7];l[8]=C[8]-Q[8];return l}function M(l,C,Q){l[0]=
C[0]*Q;l[1]=C[1]*Q;l[2]=C[2]*Q;l[3]=C[3]*Q;l[4]=C[4]*Q;l[5]=C[5]*Q;l[6]=C[6]*Q;l[7]=C[7]*Q;l[8]=C[8]*Q;return l}function S(l,C,Q,I){l[0]=C[0]+Q[0]*I;l[1]=C[1]+Q[1]*I;l[2]=C[2]+Q[2]*I;l[3]=C[3]+Q[3]*I;l[4]=C[4]+Q[4]*I;l[5]=C[5]+Q[5]*I;l[6]=C[6]+Q[6]*I;l[7]=C[7]+Q[7]*I;l[8]=C[8]+Q[8]*I;return l}function V(l,C){return l[0]===C[0]&&l[1]===C[1]&&l[2]===C[2]&&l[3]===C[3]&&l[4]===C[4]&&l[5]===C[5]&&l[6]===C[6]&&l[7]===C[7]&&l[8]===C[8]}function B(l,C){const Q=l[0],I=l[1],N=l[2],R=l[3],U=l[4],Z=l[5],O=l[6],
T=l[7];l=l[8];const u=C[0],L=C[1],Y=C[2],X=C[3],ia=C[4],aa=C[5],ca=C[6],W=C[7];C=C[8];const ba=a.getEpsilon();return Math.abs(Q-u)<=ba*Math.max(1,Math.abs(Q),Math.abs(u))&&Math.abs(I-L)<=ba*Math.max(1,Math.abs(I),Math.abs(L))&&Math.abs(N-Y)<=ba*Math.max(1,Math.abs(N),Math.abs(Y))&&Math.abs(R-X)<=ba*Math.max(1,Math.abs(R),Math.abs(X))&&Math.abs(U-ia)<=ba*Math.max(1,Math.abs(U),Math.abs(ia))&&Math.abs(Z-aa)<=ba*Math.max(1,Math.abs(Z),Math.abs(aa))&&Math.abs(O-ca)<=ba*Math.max(1,Math.abs(O),Math.abs(ca))&&
Math.abs(T-W)<=ba*Math.max(1,Math.abs(T),Math.abs(W))&&Math.abs(l-C)<=ba*Math.max(1,Math.abs(l),Math.abs(C))}function P(l){const C=a.getEpsilon(),Q=l[0],I=l[1],N=l[2],R=l[3],U=l[4],Z=l[5],O=l[6],T=l[7];l=l[8];return Math.abs(1-(Q*Q+R*R+O*O))<=C&&Math.abs(1-(I*I+U*U+T*T))<=C&&Math.abs(1-(N*N+Z*Z+l*l))<=C}const E=Object.freeze(Object.defineProperty({__proto__:null,add:w,adjoint:G,copy:e,determinant:k,equals:B,exactEquals:V,frob:m,fromMat2d:z,fromMat4:d,fromQuat:J,fromRotation:n,fromScaling:A,fromTranslation:q,
identity:f,invert:v,isOrthoNormal:P,mul:y,multiply:y,multiplyScalar:M,multiplyScalarAndAdd:S,normalFromMat4:g,normalFromMat4Legacy:r,projection:p,rotate:F,scale:H,scaleByVec2:K,set:c,str:x,sub:D,subtract:D,translate:t,transpose:h},Symbol.toStringTag,{value:"Module"}));b.add=w;b.adjoint=G;b.copy=e;b.determinant=k;b.equals=B;b.exactEquals=V;b.frob=m;b.fromMat2d=z;b.fromMat4=d;b.fromQuat=J;b.fromRotation=n;b.fromScaling=A;b.fromTranslation=q;b.identity=f;b.invert=v;b.isOrthoNormal=P;b.mat3=E;b.mul=y;
b.multiply=y;b.multiplyScalar=M;b.multiplyScalarAndAdd=S;b.normalFromMat4=g;b.normalFromMat4Legacy=r;b.projection=p;b.rotate=F;b.scale=H;b.scaleByVec2=K;b.set=c;b.str=x;b.sub=D;b.subtract=D;b.translate=t;b.transpose=h})},"esri/views/3d/support/debugFlags":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/ensureType ../../../core/arrayUtils ../../../core/has ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,d,e,c,f,h,v){d=class extends d{constructor(){super(...arguments);this.LINE_WIREFRAMES=this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=this.I3S_SHOW_MODIFICATIONS=this.I3S_TREE_SHOW_TILES=this.TERRAIN_TILE_TREE_SHOW_TILES=this.FEATURE_TILE_TREE_SHOW_TILES=this.FEATURE_TILE_FETCH_SHOW_TILES=this.DRAW_MESH_GEOMETRY_NORMALS=this.TESTS_DISABLE_FAST_UPDATES=this.TESTS_DISABLE_OPTIMIZATIONS=this.SHOW_POI=this.OVERLAY_SHOW_CENTER=
this.OVERLAY_DRAW_DEBUG_TEXTURE=this.TEXT_SHOW_BORDER=this.TEXT_SHOW_BASELINE=this.LABELS_SHOW_BORDER=this.DECONFLICTOR_SHOW_GRID=this.DECONFLICTOR_SHOW_INVISIBLE=this.DECONFLICTOR_SHOW_VISIBLE=this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1}};a.__decorate([e.property()],d.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0);a.__decorate([e.property()],d.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0);a.__decorate([e.property()],d.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0);a.__decorate([e.property()],
d.prototype,"DECONFLICTOR_SHOW_GRID",void 0);a.__decorate([e.property()],d.prototype,"LABELS_SHOW_BORDER",void 0);a.__decorate([e.property()],d.prototype,"TEXT_SHOW_BASELINE",void 0);a.__decorate([e.property()],d.prototype,"TEXT_SHOW_BORDER",void 0);a.__decorate([e.property()],d.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0);a.__decorate([e.property()],d.prototype,"OVERLAY_SHOW_CENTER",void 0);a.__decorate([e.property()],d.prototype,"SHOW_POI",void 0);a.__decorate([e.property()],d.prototype,"TESTS_DISABLE_OPTIMIZATIONS",
void 0);a.__decorate([e.property()],d.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0);a.__decorate([e.property()],d.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0);a.__decorate([e.property()],d.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0);a.__decorate([e.property()],d.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0);a.__decorate([e.property()],d.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0);a.__decorate([e.property()],d.prototype,"I3S_TREE_SHOW_TILES",void 0);a.__decorate([e.property()],d.prototype,
"I3S_SHOW_MODIFICATIONS",void 0);a.__decorate([e.property()],d.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0);a.__decorate([e.property()],d.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0);a.__decorate([e.property()],d.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0);a.__decorate([e.property()],d.prototype,"LINE_WIREFRAMES",void 0);d=a.__decorate([v.subclass("esri.views.3d.support.DebugFlags")],d);a=new d;b.debugFlags=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration":function(){define("exports ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/TransparencyPassType ../materials/DefaultTechniqueConfiguration".split(" "),function(b,a,d,e,c,f){b.LineMarkerSpace=void 0;(function(v){v[v.Draped=0]="Draped";v[v.Screen=1]="Screen";v[v.World=2]="World";v[v.COUNT=3]="COUNT"})(b.LineMarkerSpace||(b.LineMarkerSpace={}));b.LineMarkerAnchor=
void 0;(function(v){v[v.Center=0]="Center";v[v.Tip=1]="Tip";v[v.COUNT=2]="COUNT"})(b.LineMarkerAnchor||(b.LineMarkerAnchor={}));class h extends f.DefaultTechniqueConfiguration{constructor(){super(...arguments);this.output=d.ShaderOutput.Color;this.transparencyPassType=c.TransparencyPassType.NONE;this.writeDepth=this.hasSlicePlane=this.occluder=!1;this.space=b.LineMarkerSpace.Screen;this.hasCap=this.hideOnShortSegments=!1;this.anchor=b.LineMarkerAnchor.Center;this.cullAboveGround=this.multipassEnabled=
this.hasOccludees=this.vvOpacity=this.vvColor=this.vvSize=this.hasTip=!1}get draped(){return this.space===b.LineMarkerSpace.Draped}}a.__decorate([e.parameter({count:d.ShaderOutput.COUNT})],h.prototype,"output",void 0);a.__decorate([e.parameter({count:c.TransparencyPassType.COUNT})],h.prototype,"transparencyPassType",void 0);a.__decorate([e.parameter()],h.prototype,"occluder",void 0);a.__decorate([e.parameter()],h.prototype,"hasSlicePlane",void 0);a.__decorate([e.parameter()],h.prototype,"writeDepth",
void 0);a.__decorate([e.parameter({count:b.LineMarkerSpace.COUNT})],h.prototype,"space",void 0);a.__decorate([e.parameter()],h.prototype,"hideOnShortSegments",void 0);a.__decorate([e.parameter()],h.prototype,"hasCap",void 0);a.__decorate([e.parameter({count:b.LineMarkerAnchor.COUNT})],h.prototype,"anchor",void 0);a.__decorate([e.parameter()],h.prototype,"hasTip",void 0);a.__decorate([e.parameter()],h.prototype,"vvSize",void 0);a.__decorate([e.parameter()],h.prototype,"vvColor",void 0);a.__decorate([e.parameter()],
h.prototype,"vvOpacity",void 0);a.__decorate([e.parameter()],h.prototype,"hasOccludees",void 0);a.__decorate([e.parameter()],h.prototype,"multipassEnabled",void 0);a.__decorate([e.parameter()],h.prototype,"cullAboveGround",void 0);a.__decorate([e.parameter({constValue:!1})],h.prototype,"occlusionPass",void 0);a.__decorate([e.parameter({constValue:!0})],h.prototype,"hasVvInstancing",void 0);a.__decorate([e.parameter({constValue:!0})],h.prototype,"hasSliceTranslatedView",void 0);b.LineMarkerTechniqueConfiguration=
h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration":function(){define(["exports","../shaderModules/interfaces"],function(b,a){class d extends a.NoParameters{constructor(){super();this._key="";this._keyDirty=!1;this._parameterBits=this._parameterBits?this._parameterBits.map(()=>0):[];this._parameterNames||(this._parameterNames=[])}get key(){this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,
this._parameterBits));return this._key}snapshot(){const e=this._parameterNames,c={key:this.key};for(const f of e)c[f]=this[f];return c}}b.ShaderTechniqueConfiguration=d;b.parameter=function(e={}){return(c,f)=>{c._parameterNames=c._parameterNames??[];c._parameterNames.push(f);if(null!=e.constValue)Object.defineProperty(c,f,{get(){return e.constValue}});else{const h=c._parameterNames.length-1,v=Math.ceil(Math.log2(e.count||2)),G=c._parameterBits??[0];let k=0;for(;16<G[k]+v;)k++,k>=G.length&&G.push(0);
c._parameterBits=G;const y=G[k],t=(1<<v)-1<<y;G[k]+=v;Object.defineProperty(c,f,{get(){return this[h]},set(F){if(this[h]!==F&&(this[h]=F,this._keyDirty=!0,this._parameterBits[k]=this._parameterBits[k]&~t|+F<<y&t,"number"!==typeof F&&"boolean"!==typeof F))throw Error("Configuration value for "+f+" must be boolean or number, got "+typeof F);}})}}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/TransparencyPassType":function(){define(["exports"],function(b){b.TransparencyPassType=
void 0;var a=b.TransparencyPassType||(b.TransparencyPassType={});a[a.Color=0]="Color";a[a.Alpha=1]="Alpha";a[a.FrontFace=2]="FrontFace";a[a.NONE=3]="NONE";a[a.COUNT=4]="COUNT";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/DefaultTechniqueConfiguration":function(){define(["exports","../../../../chunks/tslib.es6","../core/shaderLibrary/attributes/InstancedDoublePrecision.glsl","../core/shaderTechnique/BindType","../core/shaderTechnique/ShaderTechniqueConfiguration"],
function(b,a,d,e,c){class f extends d.InstancedDoubleConfiguration{}a.__decorate([c.parameter({constValue:!0})],f.prototype,"hasSliceHighlight",void 0);a.__decorate([c.parameter({constValue:!1})],f.prototype,"hasSliceInVertexProgram",void 0);a.__decorate([c.parameter({constValue:e.BindType.Pass})],f.prototype,"pbrTextureBindType",void 0);b.DefaultTechniqueConfiguration=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl":function(){define("exports ../../../../../../chunks/tslib.es6 ../../../../../../chunks/mat3 ../../../../../../chunks/mat3f64 ../../../../../../chunks/mat4f64 ../../../../../../chunks/vec3 ../../../../../../chunks/vec3f64 ../ShaderOutput ../util/DoublePrecision.glsl ../util/View.glsl ../../shaderModules/Float3DrawUniform ../../shaderModules/interfaces ../../shaderModules/Matrix3PassUniform ../../shaderModules/Matrix4PassUniform ../../shaderTechnique/ShaderTechniqueConfiguration ../../../lib/VertexAttribute ../../../../../webgl/doublePrecisionUtils".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K,q,n){class A extends K.ShaderTechniqueConfiguration{constructor(){super(...arguments);this.hasModelTransformation=this.instancedDoublePrecision=!1}}a.__decorate([K.parameter()],A.prototype,"instancedDoublePrecision",void 0);a.__decorate([K.parameter()],A.prototype,"hasModelTransformation",void 0);class z extends t.NoParameters{constructor(){super(...arguments);this.modelTransformation=null}}const J=e.create(),r=h.create();b.InstancedDoubleConfiguration=A;b.InstancedDoublePassParameters=
z;b.InstancedDoublePrecision=function(g,p){const x=p.hasModelTransformation,m=p.instancedDoublePrecision;x&&(g.vertex.uniforms.add(new H.Matrix4PassUniform("model",w=>w.modelTransformation??c.IDENTITY)),g.vertex.uniforms.add(new F.Matrix3PassUniform("normalLocalOriginFromModel",w=>{d.normalFromMat4(J,w.modelTransformation??c.IDENTITY);return J})));p.instanced&&m&&(g.attributes.add(q.VertexAttribute.INSTANCEMODELORIGINHI,"vec3"),g.attributes.add(q.VertexAttribute.INSTANCEMODELORIGINLO,"vec3"),g.attributes.add(q.VertexAttribute.INSTANCEMODEL,
"mat3"),g.attributes.add(q.VertexAttribute.INSTANCEMODELNORMAL,"mat3"));g=g.vertex;m&&(g.include(G.DoublePrecision,p),g.uniforms.add(new y.Float3DrawUniform("viewOriginHi",(w,D)=>n.encodeDoubleHi(f.set(r,D.camera.viewInverseTransposeMatrix[3],D.camera.viewInverseTransposeMatrix[7],D.camera.viewInverseTransposeMatrix[11]),r)),new y.Float3DrawUniform("viewOriginLo",(w,D)=>n.encodeDoubleLo(f.set(r,D.camera.viewInverseTransposeMatrix[3],D.camera.viewInverseTransposeMatrix[7],D.camera.viewInverseTransposeMatrix[11]),
r))));g.code.add(t.glsl`
    vec3 getVertexInLocalOriginSpace() {
      return ${x?m?"(model * vec4(instanceModel * localPosition().xyz, 1.0)).xyz":"(model * localPosition()).xyz":m?"instanceModel * localPosition().xyz":"localPosition().xyz"};
    }

    vec3 subtractOrigin(vec3 _pos) {
      ${m?t.glsl`
          // Negated inputs are intentionally the first two arguments. The other way around the obfuscation in dpAdd() stopped
          // working for macOS 14+ and iOS 17+.
          // Issue: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/56280
          vec3 originDelta = dpAdd(-instanceModelOriginHi, -instanceModelOriginLo, viewOriginHi, viewOriginLo);
          return _pos - originDelta;`:"return vpos;"}
    }
    `);g.code.add(t.glsl`
    vec3 dpNormal(vec4 _normal) {
      return normalize(${x?m?"normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz)":"normalLocalOriginFromModel * _normal.xyz":m?"instanceModelNormal * _normal.xyz":"_normal.xyz"});
    }
    `);p.output===v.ShaderOutput.Normal&&(k.addViewNormal(g),g.code.add(t.glsl`
    vec3 dpNormalView(vec4 _normal) {
      return normalize((viewNormal * ${x?m?"vec4(normalLocalOriginFromModel * (instanceModelNormal * _normal.xyz), 1.0)":"vec4(normalLocalOriginFromModel * _normal.xyz, 1.0)":m?"vec4(instanceModelNormal * _normal.xyz, 1.0)":"_normal"}).xyz);
    }
    `));p.hasVertexTangents&&g.code.add(t.glsl`
    vec4 dpTransformVertexTangent(vec4 _tangent) {
      ${x?m?"return vec4(normalLocalOriginFromModel * (instanceModelNormal * _tangent.xyz), _tangent.w);":"return vec4(normalLocalOriginFromModel * _tangent.xyz, _tangent.w);":m?"return vec4(instanceModelNormal * _tangent.xyz, _tangent.w);":"return _tangent;"}
    }`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.DoublePrecision=function({code:d},e){e.doublePrecisionRequiresObfuscation?d.add(a.glsl`vec3 dpPlusFrc(vec3 a, vec3 b) {
return mix(a, a + b, vec3(notEqual(b, vec3(0))));
}
vec3 dpMinusFrc(vec3 a, vec3 b) {
return mix(vec3(0), a - b, vec3(notEqual(a, b)));
}
vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = dpPlusFrc(hiA, hiB);
vec3 e = dpMinusFrc(t1, hiA);
vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;
return t1 + t2;
}`):d.add(a.glsl`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {
vec3 t1 = hiA + hiB;
vec3 e = t1 - hiA;
vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;
return t1 + t2;
}`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl":function(){define("exports ../../../../../../chunks/mat4 ../../../../../../chunks/mat4f64 ../../../../../../chunks/vec3 ../../../../../../chunks/vec3f64 ../../shaderModules/Float3DrawUniform ../../shaderModules/Float3PassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/Matrix4DrawUniform ../../shaderModules/Matrix4PassUniform".split(" "),function(b,a,
d,e,c,f,h,v,G,k){const y=d.create(),t=c.create();b.addCameraPosition=function(F,H){H.instancedDoublePrecision?F.constants.add("cameraPosition","vec3",c.ZEROS):F.uniforms.add(new f.Float3DrawUniform("cameraPosition",(K,q)=>e.set(t,q.camera.viewInverseTransposeMatrix[3]-K.origin[0],q.camera.viewInverseTransposeMatrix[7]-K.origin[1],q.camera.viewInverseTransposeMatrix[11]-K.origin[2])))};b.addPixelRatio=function(F){F.uniforms.add(new v.FloatPassUniform("pixelRatio",(H,K)=>K.camera.pixelRatio/K.overlayStretch))};
b.addProjViewLocalOrigin=function(F,H){H.instancedDoublePrecision?F.uniforms.add(new k.Matrix4PassUniform("proj",(K,q)=>q.camera.projectionMatrix),new k.Matrix4PassUniform("view",(K,q)=>a.translate(y,q.camera.viewMatrix,e.set(t,q.camera.viewInverseTransposeMatrix[3],q.camera.viewInverseTransposeMatrix[7],q.camera.viewInverseTransposeMatrix[11]))),new h.Float3PassUniform("localOrigin",(K,q)=>e.set(t,q.camera.viewInverseTransposeMatrix[3],q.camera.viewInverseTransposeMatrix[7],q.camera.viewInverseTransposeMatrix[11]))):
F.uniforms.add(new k.Matrix4PassUniform("proj",(K,q)=>q.camera.projectionMatrix),new G.Matrix4DrawUniform("view",(K,q)=>a.translate(y,q.camera.viewMatrix,K.origin)),new f.Float3DrawUniform("localOrigin",K=>K.origin))};b.addViewNormal=function(F){F.uniforms.add(new k.Matrix4PassUniform("viewNormal",(H,K)=>K.camera.viewInverseTransposeMatrix))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3DrawUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"vec3",d.BindType.Draw,(h,v,G,k)=>h.setUniform3fv(c,f(v,G,k)))}}b.Float3DrawUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Uniform":function(){define(["exports","../shaderTechnique/BindType"],function(b,a){class d{constructor(e,c,f,h,v=null){this.name=e;this.type=c;this.arraySize=v;this.bind={[a.BindType.Pass]:null,
[a.BindType.Draw]:null};if(h)switch(f){case a.BindType.Pass:this.bind[a.BindType.Pass]=h;break;case a.BindType.Draw:this.bind[a.BindType.Draw]=h}}equals(e){return this.type===e.type&&this.name===e.name&&this.arraySize===e.arraySize}}b.Uniform=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/BindType":function(){define(["exports"],function(b){b.BindType=void 0;var a=b.BindType||(b.BindType={});a[a.Pass=0]="Pass";a[a.Draw=1]="Draw";Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float3PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"vec3",d.BindType.Pass,(h,v,G)=>h.setUniform3fv(c,f(v,G)))}}b.Float3PassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatPassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],
function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"float",d.BindType.Pass,(h,v,G)=>h.setUniform1f(c,f(v,G)))}}b.FloatPassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"mat4",d.BindType.Draw,(h,v,G)=>h.setUniformMatrix4fv(c,f(v,G)))}}b.Matrix4DrawUniform=
e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"mat4",d.BindType.Pass,(h,v,G)=>h.setUniformMatrix4fv(c,f(v,G)))}}b.Matrix4PassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix3PassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"mat3",d.BindType.Pass,(h,v,G)=>h.setUniformMatrix3fv(c,f(v,G)))}}b.Matrix3PassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/chunks/RibbonLine.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl ../views/3d/webgl-engine/core/shaderModules/Float2PassUniform ../views/3d/webgl-engine/core/shaderModules/Float4PassUniform ../views/3d/webgl-engine/core/shaderModules/FloatPassUniform ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/lib/TransparencyPassType ../views/3d/webgl-engine/lib/VertexAttribute ../views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration ../views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K,q,n,A,z,J,r,g,p,x){function m(D){const M=new J.ShaderBuilder,{vertex:S,fragment:V}=M,B=D.multipassEnabled&&(D.output===d.ShaderOutput.Color||D.output===d.ShaderOutput.Alpha);M.include(y.PiUtils);M.include(f.RibbonVertexPosition,D);M.include(v.LineStipple,D);const P=D.applyMarkerOffset&&!D.draped;P&&(S.uniforms.add(new n.FloatPassUniform("markerScale",R=>R.markerScale)),M.include(G.MarkerSizing,{space:p.LineMarkerSpace.World,draped:!1}));D.output===d.ShaderOutput.Depth&&
M.include(h.OutputDepth,D);M.include(c.ObjectAndLayerIdColor,D);H.addProjViewLocalOrigin(S,D);S.uniforms.add(new z.Matrix4PassUniform("inverseProjectionMatrix",(R,U)=>U.camera.inverseProjectionMatrix),new K.Float2PassUniform("nearFar",(R,U)=>U.camera.nearFar),new n.FloatPassUniform("miterLimit",R=>"miter"!==R.join?0:R.miterLimit),new q.Float4PassUniform("viewport",(R,U)=>U.camera.fullViewport));S.constants.add("LARGE_HALF_FLOAT","float",65500);M.attributes.add(g.VertexAttribute.POSITION,"vec3");M.attributes.add(g.VertexAttribute.SUBDIVISIONFACTOR,
"float");M.attributes.add(g.VertexAttribute.UV0,"vec2");M.attributes.add(g.VertexAttribute.AUXPOS1,"vec3");M.attributes.add(g.VertexAttribute.AUXPOS2,"vec3");M.varyings.add("vColor","vec4");M.varyings.add("vpos","vec3");a.addLinearDepth(M);B&&M.varyings.add("depth","float");const E=D.stippleEnabled;E&&M.varyings.add("vLineSizeInv","float");const l=D.capType===x.CapType.ROUND,C=E||l;C&&M.varyings.add("vLineWidth","float");const Q=D.innerColorEnabled||l;Q&&M.varyings.add("vLineDistance","float");const I=
D.stippleEnabled&&l,N=D.falloffEnabled||I;N&&M.varyings.add("vLineDistanceNorm","float");l&&(M.varyings.add("vSegmentSDF","float"),M.varyings.add("vReverseSegmentSDF","float"));S.code.add(A.glsl`#define PERPENDICULAR(v) vec2(v.y, -v.x);
float interp(float ncp, vec4 a, vec4 b) {
return (-ncp - a.z) / (b.z - a.z);
}
vec2 rotate(vec2 v, float a) {
float s = sin(a);
float c = cos(a);
mat2 m = mat2(c, -s, s, c);
return m * v;
}`);S.code.add(A.glsl`vec4 projectAndScale(vec4 pos) {
vec4 posNdc = proj * pos;
posNdc.xy *= viewport.zw / posNdc.w;
return posNdc;
}`);a.addCalculateLinearDepth(M);S.code.add(A.glsl`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = nearFar[0] * 0.99;

      if(pos.z > -nearFar[0]) {
        //current pos behind ncp --> we need to clip
        if (!isStartVertex) {
          if(prev.z < -nearFar[0]) {
            //previous in front of ncp
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        } else {
          if(next.z < -nearFar[0]) {
            //next in front of ncp
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        if (prev.z > -nearFar[0]) {
          //previous behind ncp
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        if (next.z > -nearFar[0]) {
          //next behind ncp
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${B?"depth \x3d pos.z;":""}
      linearDepth = calculateLinearDepth(nearFar,pos.z);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
  `);H.addPixelRatio(S);S.code.add(A.glsl`
  void main(void) {
    // unpack values from uv0.y
    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;

    float coverage = 1.0;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isJoin = abs(uv0.y) < 3.0;

      float lineSize = getSize();
      float lineWidth = lineSize * pixelRatio;

      ${C?A.glsl`vLineWidth = lineWidth;`:""}
      ${E?A.glsl`vLineSizeInv = 1.0 / lineSize;`:""}

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);
  `);P&&S.code.add(A.glsl`vec4 other = isStartVertex ? next : prev;
bool markersHidden = areWorldMarkersHidden(pos, other);
if(!isJoin && !markersHidden) {
pos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;
}`);S.code.add(A.glsl`clipAndTransform(pos, prev, next, isStartVertex);
vec2 left = (pos.xy - prev.xy);
vec2 right = (next.xy - pos.xy);
float leftLen = length(left);
float rightLen = length(right);`);(D.stippleEnabled||l)&&S.code.add(A.glsl`
      float isEndVertex = float(!isStartVertex);
      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);
      vec2 segment = mix(right, left, isEndVertex);
      ${l?A.glsl`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:""}
    `);S.code.add(A.glsl`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);
vec2 capDisplacementDir = vec2(0, 0);
vec2 joinDisplacementDir = vec2(0, 0);
float displacementLen = lineWidth;
if (isJoin) {
bool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;
joinDisplacementDir = normalize(left + right);
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
if (leftLen > 0.001 && rightLen > 0.001) {
float nDotSeg = dot(joinDisplacementDir, left);
displacementLen /= length(nDotSeg * left - joinDisplacementDir);
if (!isOutside) {
displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
}
}
if (isOutside && (displacementLen > miterLimit * lineWidth)) {`);D.roundJoins?S.code.add(A.glsl`
        vec2 startDir = leftLen < 0.001 ? right : left;
        startDir = PERPENDICULAR(startDir);

        vec2 endDir = rightLen < 0.001 ? left : right;
        endDir = PERPENDICULAR(endDir);

        float factor = ${D.stippleEnabled?A.glsl`min(1.0, subdivisionFactor * ${A.glsl.float(1.5)})`:A.glsl`subdivisionFactor`};

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);
      `):S.code.add(A.glsl`if (leftLen < 0.001) {
joinDisplacementDir = right;
}
else if (rightLen < 0.001) {
joinDisplacementDir = left;
}
else {
joinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;
}
joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);S.code.add(A.glsl`
        displacementLen = lineWidth;
      }
    } else {
      // CAP handling ---------------------------------------------------
      joinDisplacementDir = isStartVertex ? right : left;
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      ${D.capType!==x.CapType.BUTT?A.glsl`capDisplacementDir = isStartVertex ? -right : left;`:""}
    }
  `);S.code.add(A.glsl`
    // Displacement (in pixels) caused by join/or cap
    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

    ${N||Q?A.glsl`float lineDistNorm = sign(uv0.y) * pos.w;`:""}

    ${Q?A.glsl`vLineDistance = lineWidth * lineDistNorm;`:""}
    ${N?A.glsl`vLineDistanceNorm = lineDistNorm;`:""}

    pos.xy += dpos;
  `);l&&S.code.add(A.glsl`vec2 segmentDir = normalize(segment);
vSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;
vReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`);D.stippleEnabled&&(D.draped?S.uniforms.add(new n.FloatPassUniform("worldToScreenRatio",(R,U)=>1/U.screenToPCSRatio)):S.code.add(A.glsl`vec3 segmentCenter = mix((auxpos2 + position) * 0.5, (position + auxpos1) * 0.5, isEndVertex);
float worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),S.code.add(A.glsl`float segmentLengthScreenDouble = length(segment);
float segmentLengthScreen = segmentLengthScreenDouble * 0.5;
float discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);
float segmentLengthRender = length(mix(auxpos2 - position, position - auxpos1, isEndVertex));
vStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),D.draped?S.code.add(A.glsl`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;
float startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):S.code.add(A.glsl`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;
float segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),S.uniforms.add(new n.FloatPassUniform("stipplePatternPixelSize",R=>v.computePixelSize(R))),S.code.add(A.glsl`float patternLength = lineSize * stipplePatternPixelSize;
vStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);
vStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);
if (segmentLengthScreenDouble >= 0.001) {
vec2 stippleDisplacement = pos.xy - segmentOrigin;
float stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);
vStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);
}
vStippleDistanceLimits *= pos.w;
vStippleDistance *= pos.w;
vStippleDistanceLimits = isJoin ?
vStippleDistanceLimits :
isStartVertex ?
vec2(-1e34, vStippleDistanceLimits.y) :
vec2(vStippleDistanceLimits.x, 1e34);`));S.code.add(A.glsl`
      // Convert back into NDC
      pos.xy = (pos.xy / viewport.zw) * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      ${D.wireframe&&!D.draped?"pos.z -\x3d 0.001 * pos.w;":""}

      // transform final position to camera space for slicing
      vpos = (inverseProjectionMatrix * pos).xyz;
      gl_Position = pos;
      forwardObjectAndLayerIdColor();
    }
  }
  `);B&&M.include(k.multipassTerrainTest,D);M.include(e.SliceDraw,D);V.include(F.ColorConversion);V.code.add(A.glsl`
  void main() {
    discardBySlice(vpos);
    ${B?"terrainDepthTest(depth);":""}
  `);D.wireframe?V.code.add(A.glsl`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(l&&V.code.add(A.glsl`
      float sdf = min(vSegmentSDF, vReverseSegmentSDF);
      vec2 fragmentPosition = vec2(
        min(sdf, 0.0),
        vLineDistance
      ) * gl_FragCoord.w;

      float fragmentRadius = length(fragmentPosition);
      float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);

      if (capCoverage < ${A.glsl.float(t.symbolAlphaCutoff)}) {
        discard;
      }
    `),I?V.code.add(A.glsl`
      vec2 stipplePosition = vec2(
        min(getStippleSDF() * 2.0 - 1.0, 0.0),
        vLineDistanceNorm * gl_FragCoord.w
      );
      float stippleRadius = length(stipplePosition * vLineWidth);
      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale
      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);
      float stippleAlpha = step(${A.glsl.float(t.symbolAlphaCutoff)}, stippleCoverage);
      `):V.code.add(A.glsl`float stippleAlpha = getStippleAlpha();`),D.output!==d.ShaderOutput.ObjectAndLayerIdColor&&V.code.add(A.glsl`discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);`),V.uniforms.add(new q.Float4PassUniform("intrinsicColor",R=>R.color)),V.code.add(A.glsl`vec4 color = intrinsicColor * vColor;`),D.innerColorEnabled&&(V.uniforms.add(new q.Float4PassUniform("innerColor",R=>R.innerColor??R.color),new n.FloatPassUniform("innerWidth",(R,U)=>R.innerWidth*U.camera.pixelRatio)),
V.code.add(A.glsl`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),V.code.add(A.glsl`vec4 finalColor = blendStipple(color, stippleAlpha);`),D.falloffEnabled&&(V.uniforms.add(new n.FloatPassUniform("falloff",R=>R.falloff)),V.code.add(A.glsl`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`)));V.code.add(A.glsl`
    ${D.output===d.ShaderOutput.ObjectAndLayerIdColor?A.glsl`finalColor.a = 1.0;`:""}

    if (finalColor.a < ${A.glsl.float(t.symbolAlphaCutoff)}) {
      discard;
    }

    ${D.output===d.ShaderOutput.Alpha?A.glsl`fragColor = vec4(finalColor.a);`:""}
    ${D.output===d.ShaderOutput.Color?A.glsl`fragColor = highlightSlice(finalColor, vpos);`:""}
    ${D.output===d.ShaderOutput.Color&&D.transparencyPassType===r.TransparencyPassType.Color?"fragColor \x3d premultiplyAlpha(fragColor);":""}
    ${D.output===d.ShaderOutput.Highlight?A.glsl`fragColor = vec4(1.0);`:""}
    ${D.output===d.ShaderOutput.Depth?A.glsl`outputDepth(linearDepth);`:""}
    ${D.output===d.ShaderOutput.ObjectAndLayerIdColor?A.glsl`outputObjectAndLayerIdColor();`:""}
  }
  `);return M}const w=Object.freeze(Object.defineProperty({__proto__:null,build:m,ribbonlineNumRoundJoinSubdivisions:1},Symbol.toStringTag,{value:"Module"}));b.RibbonLine=w;b.build=m;b.ribbonlineNumRoundJoinSubdivisions=1})},"esri/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl":function(){define(["exports","./ShaderOutput","./attributes/VertexPosition.glsl","../shaderModules/Float2PassUniform","../shaderModules/interfaces"],function(b,a,d,e,c){function f(G){G.varyings.add("linearDepth",
"float")}function h(G){G.vertex.uniforms.add(new e.Float2PassUniform("nearFar",(k,y)=>y.camera.nearFar))}function v(G){G.vertex.code.add(c.glsl`float calculateLinearDepth(vec2 nearFar,float z) {
return (-z - nearFar[0]) / (nearFar[1] - nearFar[0]);
}`)}b.ForwardLinearDepth=function(G,k){const {vertex:y}=G;switch(k.output){case a.ShaderOutput.Color:if(k.receiveShadows){f(G);y.code.add(c.glsl`void forwardLinearDepth() { linearDepth = gl_Position.w; }`);return}break;case a.ShaderOutput.Depth:case a.ShaderOutput.Shadow:case a.ShaderOutput.ShadowHighlight:case a.ShaderOutput.ShadowExcludeHighlight:G.include(d.VertexPosition,k);f(G);h(G);v(G);y.code.add(c.glsl`void forwardLinearDepth() {
linearDepth = calculateLinearDepth(nearFar, vPosition_view.z);
}`);return}y.code.add(c.glsl`void forwardLinearDepth() {}`)};b.addCalculateLinearDepth=v;b.addLinearDepth=f;b.addNearFar=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl":function(){define("exports ../../../../../../chunks/mat3f64 ../../../../../../chunks/mat4f64 ../../../../../../chunks/vec3f64 ./PositionAttribute.glsl ../util/DoublePrecision.glsl ../../shaderModules/Float3DrawUniform ../../shaderModules/Float3PassUniform ../../shaderModules/interfaces ../../shaderModules/Matrix3DrawUniform ../../shaderModules/Matrix3PassUniform ../../shaderModules/Matrix4PassUniform".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t){class F extends G.NoParameters{constructor(){super(...arguments);this.transformWorldFromViewTH=e.create();this.transformWorldFromViewTL=e.create();this.transformViewFromCameraRelativeRS=a.create();this.transformProjFromView=d.create()}}class H extends G.NoParameters{constructor(){super(...arguments);this.transformWorldFromModelRS=a.create();this.transformWorldFromModelTH=e.create();this.transformWorldFromModelTL=e.create()}}b.VertexPosition=function(K,q){K.include(c.PositionAttribute);
const n=K.vertex;n.include(f.DoublePrecision,q);K.varyings.add("vPositionWorldCameraRelative","vec3");K.varyings.add("vPosition_view","vec3");n.uniforms.add(new v.Float3PassUniform("transformWorldFromViewTH",A=>A.transformWorldFromViewTH),new v.Float3PassUniform("transformWorldFromViewTL",A=>A.transformWorldFromViewTL),new y.Matrix3PassUniform("transformViewFromCameraRelativeRS",A=>A.transformViewFromCameraRelativeRS),new t.Matrix4PassUniform("transformProjFromView",A=>A.transformProjFromView),new k.Matrix3DrawUniform("transformWorldFromModelRS",
A=>A.transformWorldFromModelRS),new h.Float3DrawUniform("transformWorldFromModelTH",A=>A.transformWorldFromModelTH),new h.Float3DrawUniform("transformWorldFromModelTL",A=>A.transformWorldFromModelTL));n.code.add(G.glsl`vec3 positionWorldCameraRelative() {
vec3 rotatedModelPosition = transformWorldFromModelRS * positionModel();
vec3 transform_CameraRelativeFromModel = dpAdd(
transformWorldFromModelTL,
transformWorldFromModelTH,
-transformWorldFromViewTL,
-transformWorldFromViewTH
);
return transform_CameraRelativeFromModel + rotatedModelPosition;
}`);n.code.add(G.glsl`
    void forwardPosition(float fOffset) {
      vPositionWorldCameraRelative = positionWorldCameraRelative();
      if (fOffset != 0.0) {
        vPositionWorldCameraRelative += fOffset * ${q.spherical?G.glsl`normalize(transformWorldFromViewTL + vPositionWorldCameraRelative)`:G.glsl`vec3(0.0, 0.0, 1.0)`};
      }

      vPosition_view = transformViewFromCameraRelativeRS * vPositionWorldCameraRelative;
      gl_Position = transformProjFromView * vec4(vPosition_view, 1.0);
    }
  `);K.fragment.uniforms.add(new v.Float3PassUniform("transformWorldFromViewTL",A=>A.transformWorldFromViewTL));n.code.add(G.glsl`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`);K.fragment.code.add(G.glsl`vec3 positionWorld() {
return transformWorldFromViewTL + vPositionWorldCameraRelative;
}`)};b.VertexPositionDrawParameters=H;b.VertexPositionPassParameters=F;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(b,a,d){b.PositionAttribute=function(e){e.attributes.add(d.VertexAttribute.POSITION,"vec3");e.vertex.code.add(a.glsl`vec3 positionModel() { return position; }`)};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Matrix3DrawUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"mat3",d.BindType.Draw,(h,v,G)=>h.setUniformMatrix3fv(c,f(v,G)))}}b.Matrix3DrawUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float2PassUniform":function(){define(["exports","./Uniform",
"../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"vec2",d.BindType.Pass,(h,v,G)=>h.setUniform2fv(c,f(v,G)))}}b.Float2PassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl":function(){define("exports ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../../../../chunks/vec3 ../../../../../chunks/vec3f64 ../shaderModules/Float3DrawUniform ../shaderModules/Float3PassUniform ../shaderModules/interfaces".split(" "),
function(b,a,d,e,c,f,h,v){function G(J,r,...g){if(r.hasSlicePlane){r.hasSliceInVertexProgram&&J.vertex.uniforms.add(...g);J.fragment.uniforms.add(...g);g=v.glsl`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`;var p=v.glsl`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`;p=r.hasSliceHighlight?v.glsl`
        ${p}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `:v.glsl`#define highlightSlice(_color_, _pos_) (_color_)`;r.hasSliceInVertexProgram&&J.vertex.code.add(g);J.fragment.code.add(g);J.fragment.code.add(p)}else g=v.glsl`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`,r.hasSliceInVertexProgram&&J.vertex.code.add(g),J.fragment.code.add(g)}function k(J,r,g){return J.instancedDoublePrecision?e.set(q,g.camera.viewInverseTransposeMatrix[3],g.camera.viewInverseTransposeMatrix[7],g.camera.viewInverseTransposeMatrix[11]):r.slicePlaneLocalOrigin}function y(J,r){return null!=J?e.subtract(n,r.origin,J):r.origin}function t(J,r,g){return J.hasSliceTranslatedView?null!=r?a.translate(z,g.camera.viewMatrix,r):g.camera.viewMatrix:
null}function F(J,r,g){if(null==g.slicePlane)return c.ZEROS;const p=k(J,r,g);r=y(p,g.slicePlane);J=t(J,p,g);return null!=J?e.transformMat4(n,r,J):r}function H(J,r,g,p){if(null==p||null==g.slicePlane)return c.ZEROS;const x=k(J,r,g);r=y(x,g.slicePlane);J=t(J,x,g);return null!=J?(e.add(A,p,r),e.transformMat4(n,r,J),e.transformMat4(A,A,J),e.subtract(A,A,n)):p}class K extends v.NoParameters{constructor(J){super();this.slicePlaneLocalOrigin=J}}const q=c.create(),n=c.create(),A=c.create(),z=d.create();b.SliceDraw=
function(J,r){G(J,r,new f.Float3DrawUniform("slicePlaneOrigin",(g,p)=>F(r,g,p)),new f.Float3DrawUniform("slicePlaneBasis1",(g,p)=>H(r,g,p,p.slicePlane?.basis1)),new f.Float3DrawUniform("slicePlaneBasis2",(g,p)=>H(r,g,p,p.slicePlane?.basis2)))};b.SlicePass=function(J,r){G(J,r,new h.Float3PassUniform("slicePlaneOrigin",(g,p)=>F(r,g,p)),new h.Float3PassUniform("slicePlaneBasis1",(g,p)=>H(r,g,p,p.slicePlane?.basis1)),new h.Float3PassUniform("slicePlaneBasis2",(g,p)=>H(r,g,p,p.slicePlane?.basis2)))};b.SlicePlaneParameters=
K;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl":function(){define(["exports","../ShaderOutput","../../shaderModules/interfaces","../../../lib/VertexAttribute"],function(b,a,d,e){b.ObjectAndLayerIdColor=function(c,f){const h=f.output===a.ShaderOutput.ObjectAndLayerIdColor;f=f.objectAndLayerIdColorInstanced;h&&(c.varyings.add("objectAndLayerIdColorVarying","vec4"),f?c.attributes.add(e.VertexAttribute.INSTANCEOBJECTANDLAYERIDCOLOR,
"vec4"):c.attributes.add(e.VertexAttribute.OBJECTANDLAYERIDCOLOR,"vec4"));c.vertex.code.add(d.glsl`
     void forwardObjectAndLayerIdColor() {
      ${h?f?d.glsl`objectAndLayerIdColorVarying = instanceObjectAndLayerIdColor * 0.003921568627451;`:d.glsl`objectAndLayerIdColorVarying = objectAndLayerIdColor * 0.003921568627451;`:d.glsl``} }`);c.fragment.code.add(d.glsl`
      void outputObjectAndLayerIdColor() {
        ${h?d.glsl`fragColor = objectAndLayerIdColorVarying;`:d.glsl``} }`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl":function(){define("exports ../shading/VisualVariables.glsl ../../shaderModules/Float3PassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/FloatsPassUniform ../../shaderModules/interfaces ../../../lib/VertexAttribute".split(" "),function(b,a,d,e,c,f,h){b.RibbonVertexPosition=
function(v,G){const k=v.vertex;k.uniforms.add(new e.FloatPassUniform("intrinsicWidth",y=>y.width));G.vvSize?(v.attributes.add(h.VertexAttribute.SIZEFEATUREATTRIBUTE,"float"),k.uniforms.add(new d.Float3PassUniform("vvSizeMinSize",y=>y.vvSize.minSize),new d.Float3PassUniform("vvSizeMaxSize",y=>y.vvSize.maxSize),new d.Float3PassUniform("vvSizeOffset",y=>y.vvSize.offset),new d.Float3PassUniform("vvSizeFactor",y=>y.vvSize.factor)),k.code.add(f.glsl`float getSize() {
return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
}`)):(v.attributes.add(h.VertexAttribute.SIZE,"float"),k.code.add(f.glsl`float getSize(){
return intrinsicWidth * size;
}`));G.vvOpacity?(v.attributes.add(h.VertexAttribute.OPACITYFEATUREATTRIBUTE,"float"),k.constants.add("vvOpacityNumber","int",8),k.uniforms.add(new c.FloatsPassUniform("vvOpacityValues",y=>y.vvOpacity.values,8),new c.FloatsPassUniform("vvOpacityOpacities",y=>y.vvOpacity.opacityValues,8)),k.code.add(f.glsl`float interpolateOpacity( float value ){
if (value <= vvOpacityValues[0]) {
return vvOpacityOpacities[0];
}
for (int i = 1; i < vvOpacityNumber; ++i) {
if (vvOpacityValues[i] >= value) {
float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
}
}
return vvOpacityOpacities[vvOpacityNumber - 1];
}
vec4 applyOpacity( vec4 color ){
return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
}`)):k.code.add(f.glsl`vec4 applyOpacity( vec4 color ){
return color;
}`);G.vvColor?(v.include(a.VisualVariables,G),v.attributes.add(h.VertexAttribute.COLORFEATUREATTRIBUTE,"float"),k.code.add(f.glsl`vec4 getColor(){
return applyOpacity(interpolateVVColor(colorFeatureAttribute));
}`)):(v.attributes.add(h.VertexAttribute.COLOR,"vec4"),k.code.add(f.glsl`vec4 getColor(){
return applyOpacity(color);
}`))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl":function(){define("exports ../../shaderModules/Float3PassUniform ../../shaderModules/Float4sPassUniform ../../shaderModules/FloatsPassUniform ../../shaderModules/interfaces ../../shaderModules/Matrix3PassUniform ../../../lib/VertexAttribute ../../../materials/VisualVariablePassParameters".split(" "),function(b,a,d,e,c,f,h,v){b.VisualVariables=function(G,
k){const {vertex:y,attributes:t}=G;k.hasVvInstancing&&(k.vvSize||k.vvColor)&&t.add(h.VertexAttribute.INSTANCEFEATUREATTRIBUTE,"vec4");k.vvSize?(y.uniforms.add(new a.Float3PassUniform("vvSizeMinSize",F=>F.vvSize.minSize)),y.uniforms.add(new a.Float3PassUniform("vvSizeMaxSize",F=>F.vvSize.maxSize)),y.uniforms.add(new a.Float3PassUniform("vvSizeOffset",F=>F.vvSize.offset)),y.uniforms.add(new a.Float3PassUniform("vvSizeFactor",F=>F.vvSize.factor)),y.uniforms.add(new f.Matrix3PassUniform("vvSymbolRotationMatrix",
F=>F.vvSymbolRotationMatrix)),y.uniforms.add(new a.Float3PassUniform("vvSymbolAnchor",F=>F.vvSymbolAnchor)),y.code.add(c.glsl`vec3 vvScale(vec4 _featureAttribute) {
return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
}
vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
}`),y.code.add(c.glsl`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${k.hasVvInstancing?c.glsl`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):y.code.add(c.glsl`vec4 localPosition() { return vec4(position, 1.0); }
vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`);k.vvColor?(y.constants.add("vvColorNumber","int",v.vvColorNumber),y.uniforms.add(new e.FloatsPassUniform("vvColorValues",F=>F.vvColor.values,v.vvColorNumber),new d.Float4sPassUniform("vvColorColors",F=>F.vvColor.colors,v.vvColorNumber)),y.code.add(c.glsl`
      vec4 interpolateVVColor(float value) {
        if (value <= vvColorValues[0]) {
          return vvColorColors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (vvColorValues[i] >= value) {
            float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
            return mix(vvColorColors[i-1], vvColorColors[i], f);
          }
        }
        return vvColorColors[vvColorNumber - 1];
      }

      vec4 vvGetColor(vec4 featureAttribute) {
        return interpolateVVColor(featureAttribute.y);
      }

      ${k.hasVvInstancing?c.glsl`
            vec4 vvColor() {
              return vvGetColor(instanceFeatureAttribute);
            }`:"vec4 vvColor() { return vec4(1.0); }"}
    `)):y.code.add(c.glsl`vec4 vvColor() { return vec4(1.0); }`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4sPassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f,h){super(c,"vec4",d.BindType.Pass,(v,G,k)=>v.setUniform4fv(c,f(G,k)),h)}}b.Float4sPassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/FloatsPassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f,h){super(c,"float",d.BindType.Pass,(v,G,k)=>v.setUniform1fv(c,f(G,k)),h)}}b.FloatsPassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl":function(){define(["exports","../ShaderOutput","../util/RgbaFloat16Encoding.glsl","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(b,a,d,e,c){b.OutputDepth=
function(f,h){switch(h.output){case a.ShaderOutput.Shadow:case a.ShaderOutput.ShadowHighlight:case a.ShaderOutput.ShadowExcludeHighlight:f.fragment.include(d.Rgba4FloatEncoding);f.fragment.code.add(c.glsl`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 20.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
return depth + SLOPE_SCALE * m + BIAS;
}
void outputDepth(float _linearDepth) {
fragColor = floatToRgba4(_calculateFragDepth(_linearDepth));
}`);break;case a.ShaderOutput.Depth:f.fragment.include(e.RgbaFloatEncoding),f.fragment.code.add(c.glsl`void outputDepth(float _linearDepth) {
fragColor = float2rgba(_linearDepth);
}`)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloat16Encoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.Rgba4FloatEncoding=function(d){d.code.add(a.glsl`const float MAX_RGBA4_FLOAT =
15.0 / 16.0 +
15.0 / 16.0 / 16.0 +
15.0 / 16.0 / 16.0 / 16.0 +
15.0 / 16.0 / 16.0 / 16.0 / 16.0;
const vec4 FIXED_POINT_FACTORS_RGBA4 = vec4(1.0, 16.0, 16.0 * 16.0, 16.0 * 16.0 * 16.0);
vec4 floatToRgba4(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA4_FLOAT);
vec4 fixedPointU4 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS_RGBA4) * 16.0);
const float toU4AsFloat = 1.0 / 15.0;
return fixedPointU4 * toU4AsFloat;
}
const vec4 RGBA4_2_FLOAT_FACTORS = vec4(
15.0 / (16.0),
15.0 / (16.0 * 16.0),
15.0 / (16.0 * 16.0 * 16.0),
15.0 / (16.0 * 16.0 * 16.0 * 16.0)
);
float rgba4ToFloat(vec4 rgba) {
return dot(rgba, RGBA4_2_FLOAT_FACTORS);
}`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.RgbaFloatEncoding=function(d){d.code.add(a.glsl`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl":function(){define("exports ../util/RgbaFloatEncoding.glsl ../util/View.glsl ../../shaderModules/Float4PassUniform ../../shaderModules/FloatPassUniform ../../shaderModules/interfaces ../../shaderModules/Texture2DPassUniform ../../../materials/stippleTextureRepository ../../../shaders/ensureColor4".split(" "),function(b,a,d,e,c,f,h,v,G){function k(F,H){const K=
!(H.draped&&H.stipplePreferContinuous),{vertex:q,fragment:n}=F;n.include(a.RgbaFloatEncoding);H.draped||(d.addCameraPosition(q,H),q.uniforms.add(new c.FloatPassUniform("worldToScreenPerDistanceRatio",(A,z)=>1/z.camera.perScreenPixelRatio)),q.code.add(f.glsl`float computeWorldToScreenRatio(vec3 segmentCenter) {
float segmentDistanceToCamera = length(segmentCenter - cameraPosition);
return worldToScreenPerDistanceRatio / segmentDistanceToCamera;
}`));F.varyings.add("vStippleDistance","float");F.varyings.add("vStippleDistanceLimits","vec2");F.varyings.add("vStipplePatternStretch","float");q.code.add(f.glsl`
    float discretizeWorldToScreenRatio(float worldToScreenRatio) {
      float step = ${t};

      float discreteWorldToScreenRatio = log(worldToScreenRatio);
      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;
      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);
      return discreteWorldToScreenRatio;
    }
  `);q.code.add(f.glsl`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`);q.code.add(f.glsl`
    if (segmentLengthPseudoScreen >= ${K?"patternLength":"1e4"}) {
  `);d.addPixelRatio(q);q.code.add(f.glsl`float repetitions = segmentLengthScreen / (patternLength * pixelRatio);
float flooredRepetitions = max(1.0, floor(repetitions + 0.5));
float segmentLengthScreenRounded = flooredRepetitions * patternLength;
float stretch = repetitions / flooredRepetitions;
vStipplePatternStretch = max(0.75, stretch);
return vec2(0.0, segmentLengthScreenRounded);
}
return vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);
}`);n.uniforms.add(new h.Texture2DPassUniform("stipplePatternTexture",A=>A.stippleTexture),new c.FloatPassUniform("stipplePatternSDFNormalizer",A=>(A=A.stipplePattern)?(Math.floor(.5*(v.computeLongestPattern(A)-1))+.5)/A.pixelRatio:1),new c.FloatPassUniform("stipplePatternPixelSizeInv",A=>1/y(A)));n.code.add(f.glsl`float getStippleSDF(out bool isClamped) {
float stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);
vec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;
isClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;
float u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv * vLineSizeInv;
u = fract(u);
float encodedSDF = rgba2float(texture(stipplePatternTexture, vec2(u, 0.5)));
float sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;
return (sdf - 0.5) * vStipplePatternStretch + 0.5;
}
float getStippleSDF() {
bool ignored;
return getStippleSDF(ignored);
}
float getStippleAlpha() {
bool isClamped;
float stippleSDF = getStippleSDF(isClamped);
float antiAliasedResult = clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);
return isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;
}`);H.stippleOffColorEnabled?(n.uniforms.add(new e.Float4PassUniform("stippleOffColor",A=>G.ensureColor4(A.stippleOffColor))),n.code.add(f.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) {}
#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`)):n.code.add(f.glsl`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}function y(F){const H=F.stipplePattern;return H?v.computeTextureSize(F.stipplePattern)/H.pixelRatio:1}const t=f.glsl.float(.4);b.LineStipple=function(F,H){F.constants.add("stippleAlphaColorDiscard","float",.001);F.constants.add("stippleAlphaHighlightDiscard","float",.5);H.stippleEnabled?k(F,H):F.fragment.code.add(f.glsl`float getStippleAlpha() { return 1.0; }
#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
#define blendStipple(color, _stippleAlpha_) color`)};b.computePixelSize=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Float4PassUniform":function(){define(["exports","./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"vec4",d.BindType.Pass,(h,v,G)=>h.setUniform4fv(c,f(v,G)))}}b.Float4PassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform":function(){define(["exports",
"./Uniform","../shaderTechnique/BindType"],function(b,a,d){class e extends a.Uniform{constructor(c,f){super(c,"sampler2D",d.BindType.Pass,(h,v,G)=>h.bindTexture(c,f(v,G)))}}b.Texture2DPassUniform=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/stippleTextureRepository":function(){define("exports ../../../../core/floatRGBA ./ProceduralTextureRepository ../../../webgl/enums ../../../webgl/Texture ../../../webgl/TextureDescriptor".split(" "),function(b,
a,d,e,c,f){function h(k){return k.pattern.map(y=>Math.round(y*k.pixelRatio))}function v(k){if(null==k)return 1;k=h(k);return Math.floor(k.reduce((y,t)=>y+t))}function G(k){return h(k).reduce((y,t)=>Math.max(y,t))}b.computeLongestPattern=G;b.computeTextureSize=v;b.createStippleTextureRepository=function(k,y){return new d.ProceduralTextureRepository(t=>{var F=h(t),H=1/t.pixelRatio,K=v(t);t=G(t);const q=(Math.floor(.5*(t-1))+.5)*H;t=[];let n=1;for(var A of F){for(let r=0;r<A;r++)t.push(n*(Math.min(r,
A-1-r)+.5)*H/q*.5+.5);n=-n}F=Math.round(F[0]/2);F=[...t.slice(F),...t.slice(0,F)];H=new Uint8Array(4*K);A=0;for(const r of F)a.packFloatRGBA(r,H,A),A+=4;const {encodedData:z,textureSize:J}={encodedData:H,textureSize:K};K=new f.TextureDescriptor;K.internalFormat=e.PixelFormat.RGBA;K.width=J;K.height=1;K.wrapMode=e.TextureWrapMode.REPEAT;return new c.Texture(k,K,z)},t=>`${t.pattern.join(",")}-r${t.pixelRatio}`,y)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/floatRGBA":function(){define(["exports",
"./mathUtils"],function(b,a){function d(h,v=0){let G=0;for(let k=0;4>k;k++)G+=h[v+k]*c[k];return G}const e=[1,256,65536,16777216],c=[1/256,1/65536,1/16777216,1/4294967296],f=d(new Uint8ClampedArray([255,255,255,255]));b.packFloatRGBA=function(h,v,G=0){h=a.clamp(h,0,f);for(let t=0;4>t;t++){var k=Math,y=h*e[t];v[G+t]=k.floor.call(k,256*(y-Math.floor(y)))}};b.unpackFloatRGBA=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/materials/ProceduralTextureRepository":function(){define(["exports",
"../../../../core/uid"],function(b,a){class d{constructor(c,f,h){this._createTexture=c;this._parametersKey=f;this._repository=new Map;this._orphanCache=h.newCache(`procedural-texture-repository:${a.generateUID()}`,v=>v.dispose())}destroy(){for(const [,{texture:c}]of this._repository)c.dispose();this._repository.clear();this._orphanCache.destroy()}swap(c,f=null){c=this._acquire(c);this.release(f);return c}release(c){if(null!=c){c=this._parametersKey(c);var f=this._repository.get(c);f&&(f.refCount--,
0===f.refCount&&(this._repository.delete(c),{texture:f}=f,this._orphanCache.put(c,f,f.gpuMemoryUsage)))}}_acquire(c){if(null==c)return null;const f=this._parametersKey(c);var h=this._repository.get(f);if(h)return h.refCount++,h.texture;c=this._orphanCache.pop(f)??this._createTexture(c);h=new e(c);this._repository.set(f,h);return c}}class e{constructor(c){this.texture=c;this.refCount=1}}b.ProceduralTextureRepository=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],
function(b){b.ClearBufferBit=void 0;(function(a){a[a.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT";a[a.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT";a[a.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"})(b.ClearBufferBit||(b.ClearBufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType=
{}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=
32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]="MIN";a[a.MAX=32776]="MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]=
"ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"})(b.BufferType||(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||
(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=
519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";
a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=
34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]=
"TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.ALPHA=6406]="ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";
a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";
a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";
a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||(b.SizedPixelFormat={}));b.PixelType=
void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=
33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";
a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=
35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget={}));b.ResourceType=void 0;(function(a){a[a.Texture=
0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";a[a.Sync=7]="Sync";a[a.UNCOUNTED=8]="UNCOUNTED";a[a.LinesOfCode=8]="LinesOfCode";a[a.Uniform=9]="Uniform";a[a.COUNT=10]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]=
"COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";
a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]="NONE";a[a.BACK=1029]="BACK"})(b.SpecialDrawBuffers||(b.SpecialDrawBuffers={}));b.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=
33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=
37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=
35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";
a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";
a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=
36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus=
{}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||
(b.SyncFlag={}));b.DepthStencilAttachment=33306;b.baseTextureUnit=33984;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Texture":function(){define("exports ../../core/Error ../../core/has ../../core/mathUtils ./checkWebGLError ./contextUtils ./enums ./GLObjectType ./TextureDescriptor ./ValidatedTextureDescriptor".split(" "),function(b,a,d,e,c,f,h,v,G,k){function y(r,g){(null!=g.width&&0>g.width||null!=g.height&&0>g.height||null!=g.depth&&0>g.depth)&&console.error("Negative dimension parameters are not allowed!");
(r=r.type===f.ContextType.WEBGL2)||!g.isImmutable&&!n(g.target)||console.error("Immutable and 3D-like textures are not supported in WebGL1!");r||null!=g.width&&e.isPowerOfTwo(g.width)&&null!=g.height&&e.isPowerOfTwo(g.height)||("number"===typeof g.wrapMode?g.wrapMode!==h.TextureWrapMode.CLAMP_TO_EDGE&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(g.wrapMode.s!==h.TextureWrapMode.CLAMP_TO_EDGE||g.wrapMode.t!==h.TextureWrapMode.CLAMP_TO_EDGE)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),
g.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))}function t(r,g){let p=g.samplingMode,x=g.samplingMode;if(p===h.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||p===h.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)p=h.TextureSamplingMode.LINEAR,g.hasMipmap||(x=h.TextureSamplingMode.LINEAR);else if(p===h.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||p===h.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)p=h.TextureSamplingMode.NEAREST,g.hasMipmap||(x=h.TextureSamplingMode.NEAREST);r.texParameteri(g.target,
r.TEXTURE_MAG_FILTER,p);r.texParameteri(g.target,r.TEXTURE_MIN_FILTER,x)}function F(r,g){"number"===typeof g.wrapMode?(r.texParameteri(g.target,r.TEXTURE_WRAP_S,g.wrapMode),r.texParameteri(g.target,r.TEXTURE_WRAP_T,g.wrapMode)):(r.texParameteri(g.target,r.TEXTURE_WRAP_S,g.wrapMode.s),r.texParameteri(g.target,r.TEXTURE_WRAP_T,g.wrapMode.t))}function H(r,g){const p=r.capabilities.textureFilterAnisotropic;p&&r.gl.texParameterf(g.target,p.TEXTURE_MAX_ANISOTROPY,g.maxAnisotropy??1)}function K(r){return null!=
r&&"type"in r&&"compressed"===r.type}function q(r){return null!=r&&!K(r)&&!(null!=r&&"byteLength"in r)}function n(r){return r===h.TextureType.TEXTURE_3D||r===h.TextureType.TEXTURE_2D_ARRAY}function A(r,g,p,x=1){g=Math.max(g,p);r===h.TextureType.TEXTURE_3D&&(g=Math.max(g,x));return Math.round(Math.log(g)/Math.LN2)+1}let z=class{constructor(r,g=null,p=null){this.type=v.GLObjectType.Texture;this._glName=null;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=!1;if("context"in r)this._descriptor=
r,p=g;else{r=k.ValidatedTextureDescriptor.validate(r,g);if(!r)throw new a("Texture descriptor invalid");this._descriptor=r}if(this._descriptor.context.type!==f.ContextType.WEBGL2&&(this._descriptor.isImmutable&&(this._descriptor.isImmutable=!1),n(this._descriptor.target)))throw new a("3D and array textures are not supported in WebGL1");this._descriptor.target===h.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(p):this.setData(p)}get glName(){return this._glName}get descriptor(){return this._descriptor}get gpuMemoryUsage(){J.delete(this);
return G.estimateMemory(this._descriptor)}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}dispose(){this._glName&&this._descriptor.context.instanceCounter.decrement(h.ResourceType.Texture,this);this._descriptor.context.gl&&this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(r,g){const p=this._descriptor;if(p.width!==r||p.height!==g){if(this._wasImmutablyAllocated)throw new a("Immutable textures can't be resized!");
p.width=r;p.height=g;this._descriptor.target===h.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}_setDataCubeMap(r=null){for(let g=h.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;g<=h.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;g++)this._setData(r,g)}setData(r){this._setData(r)}_setData(r,g){if(this._descriptor.context?.gl){var p=this._descriptor.context.gl;c.checkWebGLError(p);this._glName||(this._glName=p.createTexture())&&this._descriptor.context.instanceCounter.increment(h.ResourceType.Texture,
this);void 0===r&&(r=null);var x=this._descriptor,m=g??x.target,w=n(m);null===r&&(x.width=x.width||4,x.height=x.height||4,w&&(x.depth=x.depth??1));g=this._descriptor.context.bindTexture(this,z.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(z.TEXTURE_UNIT_FOR_UPDATES);y(this._descriptor.context,x);this._configurePixelStorage();c.checkWebGLError(p);var D=this._deriveInternalFormat();if(q(r)){let M="width"in r?r.width:r.codedWidth,S="height"in r?r.height:r.codedHeight;r instanceof
HTMLVideoElement&&(M=r.videoWidth,S=r.videoHeight);x.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(m,D,x.hasMipmap,M,S,1);this._texImage(m,0,D,M,S,1,r);c.checkWebGLError(p);x.hasMipmap&&this.generateMipmap();x.width||(x.width=M);x.height||(x.height=S);w&&!x.depth&&(x.depth=1)}else{const {width:M,height:S,depth:V}=x;if(null==M||null==S)throw new a("Width and height must be specified!");if(w&&null==V)throw new a("Depth must be specified!");x.isImmutable&&!this._wasImmutablyAllocated&&
this._texStorage(m,D,x.hasMipmap,M,S,V);if(K(r)){const B=r.levels;r=A(m,M,S,V);w=Math.min(r-1,B.length-1);null!=this._descriptor.context.gl2?p.texParameteri(x.target,this._descriptor.context.gl2.TEXTURE_MAX_LEVEL,w):x.hasMipmap=x.hasMipmap&&r===B.length;if(!(D in h.CompressedTextureFormat))throw new a("Attempting to use compressed data with an uncompressed format!");this._forEachMipmapLevel((P,E,l,C)=>{this._compressedTexImage(m,P,D,E,l,C,B[Math.min(P,B.length-1)])},w)}else this._texImage(m,0,D,M,
S,V,r),c.checkWebGLError(p),x.hasMipmap&&this.generateMipmap()}t(p,this._descriptor);F(p,this._descriptor);H(this._descriptor.context,this._descriptor);c.checkWebGLError(p);this._descriptor.context.bindTexture(g,z.TEXTURE_UNIT_FOR_UPDATES)}}updateData(r,g,p,x,m,w,D=0){w||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const M=this._descriptor.context.gl,S=this._descriptor.context.gl2,V=this._descriptor,B=this._deriveInternalFormat(),
{pixelFormat:P,dataType:E,target:l,isImmutable:C}=V;if(C&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");const Q=this._descriptor.context.bindTexture(this,z.TEXTURE_UNIT_FOR_UPDATES,!0);(0>g||0>p||x>V.width||m>V.height||g+x>V.width||p+m>V.height)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();if(D){if(!S){console.error("Webgl2 must be enabled to use dataRowOffset!");return}M.pixelStorei(S.UNPACK_SKIP_ROWS,
D)}q(w)?S?S.texSubImage2D(l,r,g,p,x,m,P,E,w):M.texSubImage2D(l,r,g,p,P,E,w):K(w)?M.compressedTexSubImage2D(l,r,g,p,x,m,B,w.levels[r]):M.texSubImage2D(l,r,g,p,x,m,P,E,w);if(D){if(!S){console.error("Webgl2 must be enabled to use dataRowOffset!");return}M.pixelStorei(S.UNPACK_SKIP_ROWS,0)}this._descriptor.context.bindTexture(Q,z.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(r,g,p,x,m,w,D,M){M||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");
const S=this._descriptor.context.gl2;if(null==S)throw new a("3D textures are not supported in WebGL1");const V=this._descriptor,B=this._deriveInternalFormat(),{pixelFormat:P,dataType:E,isImmutable:l,target:C}=V;if(l&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");n(C)||console.warn("Attempting to set 3D texture data on a non-3D texture");const Q=this._descriptor.context.bindTexture(this,z.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(z.TEXTURE_UNIT_FOR_UPDATES);
(0>g||0>p||0>x||m>V.width||w>V.height||D>V.depth||g+m>V.width||p+w>V.height||x+D>V.depth)&&console.error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();K(M)?(M=M.levels[r],S.compressedTexSubImage3D(C,r,g,p,x,m,w,D,B,M)):S.texSubImage3D(C,r,g,p,x,m,w,D,P,E,M);this._descriptor.context.bindTexture(Q,z.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const r=this._descriptor;if(!r.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot add mipmaps to immutable texture after allocation");
this._samplingModeDirty=r.hasMipmap=!0;y(this._descriptor.context,r)}r.samplingMode===h.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,r.samplingMode=h.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):r.samplingMode===h.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,r.samplingMode=h.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);const g=this._descriptor.context.bindTexture(this,z.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(z.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(r.target);
this._descriptor.context.bindTexture(g,z.TEXTURE_UNIT_FOR_UPDATES)}setSamplingMode(r){r!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=r,this._samplingModeDirty=!0)}setWrapMode(r){r!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=r,y(this._descriptor.context,this._descriptor),this._wrapModeDirty=!0)}applyChanges(){const r=this._descriptor.context.gl,g=this._descriptor;this._samplingModeDirty&&(t(r,g),this._samplingModeDirty=!1);this._wrapModeDirty&&(F(r,g),this._wrapModeDirty=
!1)}_deriveInternalFormat(){if(this._descriptor.context.type===f.ContextType.WEBGL1)return this._descriptor.internalFormat=this._descriptor.pixelFormat;if(null!=this._descriptor.internalFormat)return this._descriptor.internalFormat===h.PixelFormat.DEPTH_STENCIL&&(this._descriptor.internalFormat=h.PixelFormat.DEPTH24_STENCIL8),this._descriptor.internalFormat;switch(this._descriptor.dataType){case h.PixelType.FLOAT:switch(this._descriptor.pixelFormat){case h.PixelFormat.RGBA:return this._descriptor.internalFormat=
h.SizedPixelFormat.RGBA32F;case h.PixelFormat.RGB:return this._descriptor.internalFormat=h.SizedPixelFormat.RGB32F;default:throw new a("Unable to derive format");}case h.PixelType.UNSIGNED_BYTE:switch(this._descriptor.pixelFormat){case h.PixelFormat.RGBA:return this._descriptor.internalFormat=h.SizedPixelFormat.RGBA8;case h.PixelFormat.RGB:return this._descriptor.internalFormat=h.SizedPixelFormat.RGB8}}return this._descriptor.internalFormat=this._descriptor.pixelFormat===h.PixelFormat.DEPTH_STENCIL?
h.PixelFormat.DEPTH24_STENCIL8:this._descriptor.pixelFormat}_configurePixelStorage(){const r=this._descriptor.context.gl,{unpackAlignment:g,flipped:p,preMultiplyAlpha:x}=this._descriptor;r.pixelStorei(r.UNPACK_ALIGNMENT,g);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,p?1:0);r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,x?1:0)}_texStorage(r,g,p,x,m,w){const D=this._descriptor.context.gl2;if(null==D)throw new a("Immutable textures are not supported in WebGL1");if(!(g in h.SizedPixelFormat))throw new a("Immutable textures must have a sized internal format");
if(this._descriptor.isImmutable){p=p?A(r,x,m,w):1;if(n(r)){if(null==w)throw new a("Missing depth dimension for 3D texture upload");D.texStorage3D(r,p,g,x,m,w)}else D.texStorage2D(r,p,g,x,m);this._wasImmutablyAllocated=!0}}_texImage(r,g,p,x,m,w,D){const M=this._descriptor.context.gl,S=n(r),{isImmutable:V,pixelFormat:B,dataType:P}=this._descriptor,E=this._descriptor.context.type===f.ContextType.WEBGL2,l=E?M:null;if(!E&&q(D))M.texImage2D(r,0,p,B,P,D);else if(V){if(null!=D)if(S){if(null==w)throw new a("Missing depth dimension for 3D texture upload");
l.texSubImage3D(r,g,0,0,0,x,m,w,B,P,D)}else M.texSubImage2D(r,g,0,0,x,m,B,P,D)}else if(S){if(null==w)throw new a("Missing depth dimension for 3D texture upload");l.texImage3D(r,g,p,x,m,w,0,B,P,D)}else M.texImage2D(r,g,p,x,m,0,B,P,D)}_compressedTexImage(r,g,p,x,m,w,D){const M=this._descriptor.context.gl;let S=null;const V=n(r),B=this._descriptor.isImmutable;if(V){if(this._descriptor.context.type!==f.ContextType.WEBGL2)throw new a("3D textures are not supported in WebGL1");S=M}if(B){if(null!=D)if(V){if(null==
w)throw new a("Missing depth dimension for 3D texture upload");S.compressedTexSubImage3D(r,g,0,0,0,x,m,w,p,D)}else M.compressedTexSubImage2D(r,g,0,0,x,m,p,D)}else if(V){if(null==w)throw new a("Missing depth dimension for 3D texture upload");S.compressedTexImage3D(r,g,p,x,m,w,0,D)}else M.compressedTexImage2D(r,g,p,x,m,0,D)}_forEachMipmapLevel(r,g=Infinity){let {width:p,height:x,depth:m,hasMipmap:w,target:D}=this._descriptor;const M=D===h.TextureType.TEXTURE_3D;if(null==p||null==x||M&&null==m)throw new a("Missing texture dimensions for mipmap calculation");
for(let S=0;;++S){r(S,p,x,m);if(!w||1===p&&1===x&&(!M||1===m)||S>=g)break;p=Math.max(1,p>>1);x=Math.max(1,x>>1);M&&(m=Math.max(1,m>>1))}}};z.TEXTURE_UNIT_FOR_UPDATES=0;const J=new Map;b.Texture=z;b.clearUnestimatedTextures=function(){if(0!==J.size){var r=[];J.forEach((g,p)=>r.push([p.gpuMemoryUsage,g]));J.clear();r.sort((g,p)=>p[0]-g[0]);return r.reduce((g,p)=>`${g}\n\n${Math.round(p[0]/1024)}KB: ${p[1]}`,`Total unestimated texture memory: ${Math.round(r.reduce((g,p)=>g+p[0],0)/1024)}KB`)}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(b,a,d,e){function c(v,G){switch(G){case v.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case v.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case v.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";
case v.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case v.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case v.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const f=e.getLogger("esri.views.webgl.checkWebGLError"),h=!!d("enable-feature:webgl-debug");b.checkWebGLError=function(v){if(h){const G=
v.getError();G&&(v=c(v,G),f.error(new a("webgl-error","WebGL error occurred",{message:v,stack:Error().stack})))}};b.hasFeatureFlagWebGLDebug=h;b.webglDebugEnabled=function(){return h};b.webglValidateShadersEnabled=function(){return h};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/contextUtils":function(){define(["exports","../../core/has"],function(b,a){function d(c,f,h={}){return(c=c.getContext(f===b.ContextType.WEBGL1?"webgl":"webgl2",h))?c:null}function e(c){if("3d"===
c)return[b.ContextType.WEBGL2];c=a("esri-force-webgl");return c===b.ContextType.WEBGL1||c===b.ContextType.WEBGL2?[c]:a("mac")&&a("chrome")?[b.ContextType.WEBGL1,b.ContextType.WEBGL2]:[b.ContextType.WEBGL2,b.ContextType.WEBGL1]}b.ContextType=void 0;(function(c){c[c.WEBGL1=1]="WEBGL1";c[c.WEBGL2=2]="WEBGL2"})(b.ContextType||(b.ContextType={}));b.createContext=d;b.createContextForView=function(c,f,h={}){c=e(c);for(const v of c)if(c=d(f,v,h))return c;return null};b.getContextTypes=e;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/GLObjectType":function(){define(["exports"],function(b){b.GLObjectType=void 0;var a=b.GLObjectType||(b.GLObjectType={});a[a.Texture=0]="Texture";a[a.RenderBuffer=1]="RenderBuffer";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/TextureDescriptor":function(){define(["exports","./enums","./Util"],function(b,a,d){class e{constructor(c=0,f=c){this.width=c;this.height=f;this.target=a.TextureType.TEXTURE_2D;this.pixelFormat=
a.PixelFormat.RGBA;this.dataType=a.PixelType.UNSIGNED_BYTE;this.samplingMode=a.TextureSamplingMode.LINEAR;this.wrapMode=a.TextureWrapMode.REPEAT;this.maxAnisotropy=1;this.isOpaque=this.hasMipmap=this.flipped=!1;this.unpackAlignment=4;this.preMultiplyAlpha=!1;this.depth=1;this.isImmutable=!1}}b.TextureDescriptor=e;b.estimateMemory=function(c){return 0>=c.width||0>=c.height?0:c.width*c.height*(c.hasMipmap?4/3:1)*(null==c.internalFormat?4:d.getBytesPerElementFormat(c.internalFormat))};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","./enums"],function(b,a,d){function e(c){return c[0].stride}b.bindVertexBufferLayout=function(c,f,h,v,G=0){const k=c.gl;c.bindBuffer(h);for(const t of v)if(h=f.get(t.name),void 0===h&&console.error(`There is no location for vertex attribute '${t.name}' defined.`),v=G*t.stride,4>=t.count)k.vertexAttribPointer(h,t.count,t.type,t.normalized,t.stride,t.offset+v),k.enableVertexAttribArray(h),0<
t.divisor&&c.gl2?.vertexAttribDivisor(h,t.divisor);else if(9===t.count)for(var y=0;3>y;y++)k.vertexAttribPointer(h+y,3,t.type,t.normalized,t.stride,t.offset+12*y+v),k.enableVertexAttribArray(h+y),0<t.divisor&&c.gl2?.vertexAttribDivisor(h+y,t.divisor);else if(16===t.count)for(y=0;4>y;y++)k.vertexAttribPointer(h+y,4,t.type,t.normalized,t.stride,t.offset+16*y+v),k.enableVertexAttribArray(h+y),0<t.divisor&&c.gl2?.vertexAttribDivisor(h+y,t.divisor);else console.error("Unsupported vertex attribute element count: "+
t.count)};b.getBytesPerElementFormat=function(c){switch(c){case d.PixelFormat.ALPHA:case d.PixelFormat.LUMINANCE:case d.PixelFormat.RED:case d.PixelFormat.RED_INTEGER:case d.SizedPixelFormat.R8:case d.SizedPixelFormat.R8I:case d.SizedPixelFormat.R8UI:case d.SizedPixelFormat.R8_SNORM:case d.RenderbufferFormat.STENCIL_INDEX8:return 1;case d.PixelFormat.LUMINANCE_ALPHA:case d.PixelFormat.RG:case d.PixelFormat.RG_INTEGER:case d.SizedPixelFormat.RGBA4:case d.SizedPixelFormat.R16F:case d.SizedPixelFormat.R16I:case d.SizedPixelFormat.R16UI:case d.SizedPixelFormat.RG8:case d.SizedPixelFormat.RG8I:case d.SizedPixelFormat.RG8UI:case d.SizedPixelFormat.RG8_SNORM:case d.SizedPixelFormat.RGB565:case d.SizedPixelFormat.RGB5_A1:case d.RenderbufferFormat.DEPTH_COMPONENT16:return 2;
case d.PixelFormat.DEPTH_COMPONENT:case d.PixelFormat.RGB:case d.PixelFormat.RGB_INTEGER:case d.SizedPixelFormat.RGB8:case d.SizedPixelFormat.RGB8I:case d.SizedPixelFormat.RGB8UI:case d.SizedPixelFormat.RGB8_SNORM:case d.SizedPixelFormat.SRGB8:case d.RenderbufferFormat.DEPTH_COMPONENT24:return 3;case d.PixelFormat.DEPTH_STENCIL:case d.PixelFormat.DEPTH24_STENCIL8:case d.PixelFormat.RGBA:case d.PixelFormat.RGBA_INTEGER:case d.SizedPixelFormat.RGBA8:case d.SizedPixelFormat.R32F:case d.SizedPixelFormat.R11F_G11F_B10F:case d.SizedPixelFormat.RG16F:case d.SizedPixelFormat.R32I:case d.SizedPixelFormat.R32UI:case d.SizedPixelFormat.RG16I:case d.SizedPixelFormat.RG16UI:case d.SizedPixelFormat.RGBA8I:case d.SizedPixelFormat.RGBA8UI:case d.SizedPixelFormat.RGBA8_SNORM:case d.SizedPixelFormat.SRGB8_ALPHA8:case d.SizedPixelFormat.RGB9_E5:case d.SizedPixelFormat.RGB10_A2UI:case d.SizedPixelFormat.RGB10_A2:case d.RenderbufferFormat.DEPTH_STENCIL:case d.RenderbufferFormat.DEPTH_COMPONENT32F:case d.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case d.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case d.SizedPixelFormat.RGB16F:case d.SizedPixelFormat.RGB16I:case d.SizedPixelFormat.RGB16UI:return 6;case d.SizedPixelFormat.RG32F:case d.SizedPixelFormat.RG32I:case d.SizedPixelFormat.RG32UI:case d.SizedPixelFormat.RGBA16F:case d.SizedPixelFormat.RGBA16I:case d.SizedPixelFormat.RGBA16UI:return 8;case d.SizedPixelFormat.RGB32F:case d.SizedPixelFormat.RGB32I:case d.SizedPixelFormat.RGB32UI:return 12;case d.SizedPixelFormat.RGBA32F:case d.SizedPixelFormat.RGBA32I:case d.SizedPixelFormat.RGBA32UI:return 16;
case d.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case d.CompressedTextureFormat.COMPRESSED_R11_EAC:case d.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case d.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case d.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case d.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case d.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case d.CompressedTextureFormat.COMPRESSED_RG11_EAC:case d.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case d.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case d.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0};b.getErrorString=function(c){c=c.gl;switch(c.getError()){case c.NO_ERROR:return null;case c.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case c.INVALID_VALUE:return"An unacceptable value has been specified for an argument";
case c.INVALID_OPERATION:return"The specified command is not allowed for the current state";case c.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case c.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case c.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"};b.getStride=e;b.unbindVertexBufferLayout=function(c,f,h,v){const G=c.gl;c.bindBuffer(h);for(const k of v)if(h=f.get(k.name),4>=k.count)G.disableVertexAttribArray(h),
k.divisor&&0<k.divisor&&c.gl2?.vertexAttribDivisor(h,0);else if(9===k.count)for(v=0;3>v;v++)G.disableVertexAttribArray(h+v),k.divisor&&0<k.divisor&&c.gl2?.vertexAttribDivisor(h+v,0);else if(16===k.count)for(v=0;4>v;v++)G.disableVertexAttribArray(h+v),k.divisor&&0<k.divisor&&c.gl2?.vertexAttribDivisor(h+v,0);else console.error("Unsupported vertex attribute element count: "+k.count);c.unbindBuffer(d.BufferType.ARRAY_BUFFER)};b.vertexCount=function(c,f){return c.vertexBuffers[f].byteLength/e(c.layout[f])};
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ValidatedTextureDescriptor":function(){define(["exports","./enums","./TextureDescriptor"],function(b,a,d){class e extends d.TextureDescriptor{constructor(c,f){super();this.context=c;Object.assign(this,f);switch(this.internalFormat){case a.SizedPixelFormat.R16F:case a.SizedPixelFormat.R16I:case a.SizedPixelFormat.R16UI:case a.SizedPixelFormat.R32F:case a.SizedPixelFormat.R32I:case a.SizedPixelFormat.R32UI:case a.SizedPixelFormat.R8_SNORM:case a.SizedPixelFormat.R8:case a.SizedPixelFormat.R8I:case a.SizedPixelFormat.R8UI:this.pixelFormat=
a.PixelFormat.RED}}static validate(c,f){return new e(c,f)}}b.ValidatedTextureDescriptor=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/ensureColor4":function(){define(["exports","../../../../chunks/vec4","../../../../chunks/vec4f64"],function(b,a,d){const e=d.create();b.ensureColor4=function(c){return null==c?d.ZEROS:4===c.length?c:a.set(e,c[0],c[1],c[2],1)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl":function(){define("exports ../../../../support/engineContent/marker ../util/View.glsl ../../shaderModules/FloatPassUniform ../../shaderModules/interfaces ../../../shaders/LineMarkerTechniqueConfiguration".split(" "),
function(b,a,d,e,c,f){b.MarkerSizing=function(h,v){const {vertex:G,constants:k}=h;k.add("markerSizePerLineWidth","float",a.markerSizePerLineWidth);d.addPixelRatio(G);null==G.uniforms.get("markerScale")&&G.constants.add("markerScale","float",1);G.code.add(c.glsl`float getLineWidth() {
return max(getSize(), 1.0) * pixelRatio;
}
float getScreenMarkerSize() {
return markerSizePerLineWidth * markerScale * getLineWidth();
}`);v.space===f.LineMarkerSpace.World&&(G.constants.add("maxSegmentLengthFraction","float",.45),G.uniforms.add(new e.FloatPassUniform("perRenderPixelRatio",(y,t)=>t.camera.perRenderPixelRatio)),G.code.add(c.glsl`bool areWorldMarkersHidden(vec4 pos, vec4 other) {
vec3 midPoint = mix(pos.xyz, other.xyz, 0.5);
float distanceToCamera = length(midPoint);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
float worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;
float segmentLen = length(pos.xyz - other.xyz);
return worldMarkerSize > maxSegmentLengthFraction * segmentLen;
}
float getWorldMarkerSize(vec4 pos) {
float distanceToCamera = length(pos.xyz);
float screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;
return getScreenMarkerSize() * screenToWorldRatio;
}`))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/engineContent/marker":function(){define(["exports","./sdfPrimitives","../../../webgl/enums","../../../webgl/Texture","../../../webgl/TextureDescriptor"],function(b,a,d,e,c){b.createMarkerTexture=function(f,h){f=a.createPrimitive(f,64,32,6.4);const v=new c.TextureDescriptor;v.internalFormat=d.PixelFormat.RGBA;v.width=64;v.height=64;v.wrapMode=d.TextureWrapMode.CLAMP_TO_EDGE;return new e.Texture(h,v,f)};b.markerSizePerLineWidth=
10;b.markerSymbolSize=32;b.markerTextureSize=64;b.markerThickness=6.4;b.markerTipThicknessFactor=.25;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/support/engineContent/sdfPrimitives":function(){define(["exports","../../../../core/has","../../../../core/floatRGBA","../../webgl-engine/lib/Texture","../../../webgl/enums"],function(b,a,d,e,c){function f(z,J=128,r=.5*J,g=0){switch(z){case "circle":return h(J,r);case "square":return v(J,r);case "cross":return k(J,r,g);
case "x":return y(J,r,g);case "kite":return G(J,r);case "triangle":return t(J,r);case "arrow":return F(J,r);default:return h(J,r)}}function h(z,J){const r=z/2-.5;return A(z,q(r,r,J/2))}function v(z,J){return H(z,J,!1)}function G(z,J){return H(z,J,!0)}function k(z,J,r=0){return K(z,J,!1,r)}function y(z,J,r=0){return K(z,J,!0,r)}function t(z,J){return A(z,n(z/2,J,J/2))}function F(z,J){const r=J/2,g=z/2,p=.8*J,x=q(g,(z-J)/2-p,Math.sqrt(p*p+r*r)),m=n(g,J,r);return A(z,(w,D)=>Math.max(m(w,D),-x(w,D)))}
function H(z,J,r){r&&(J/=Math.SQRT2);return A(z,(g,p)=>{g=g-.5*z+.25;p=-p+.5*z-.75;if(r){const x=(g+p)/Math.SQRT2;p=(p-g)/Math.SQRT2;g=x}return Math.max(Math.abs(g),Math.abs(p))-.5*J})}function K(z,J,r,g=0){J-=g;r&&(J*=Math.SQRT2);const p=.5*J;return A(z,(x,m)=>{x-=.5*z;m=-m+.5*z-1;if(r){const w=(x+m)/Math.SQRT2;m=(m-x)/Math.SQRT2;x=w}x=Math.abs(x);m=Math.abs(m);x=x>m?x>p?Math.sqrt((x-p)*(x-p)+m*m):m:m>p?Math.sqrt(x*x+(m-p)*(m-p)):x;return x-=g/2})}function q(z,J,r){return(g,p)=>{g-=z;p-=J;return Math.sqrt(g*
g+p*p)-r}}function n(z,J,r){const g=Math.sqrt(J*J+r*r);return(p,x)=>{x=x-z+J/2+.75;return Math.max((J*(Math.abs(p-z)-r)+r*x)/g,-x)}}function A(z,J){const r=new Uint8Array(4*z*z);for(let g=0;g<z;g++)for(let p=0;p<z;p++){const x=p+z*g;let m=J(p,g);m=m/z+.5;d.packFloatRGBA(m,r,4*x)}return r}b.createArrow=F;b.createCircle=h;b.createCross=k;b.createKite=G;b.createPrimitive=f;b.createSquare=v;b.createTexture=function(z,J=128,r=.5*J,g=0){z=f(z,J,r,g);return new e.Texture(z,{mipmap:!1,wrap:{s:c.TextureWrapMode.CLAMP_TO_EDGE,
t:c.TextureWrapMode.CLAMP_TO_EDGE},width:J,height:J,components:4,noUnpackFlip:!0,reloadable:!0})};b.createTriangle=t;b.createX=y;b.defaultSymbolSizeRatio=.5;b.defaultTexSize=128;b.requiresHalfTexelOffset=function(z){return"cross"===z||"x"===z};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("exports ../../../../core/has ../../../../core/Error ../../../../core/Evented ../../../../core/maybe ../../../../core/promiseUtils ../../../../core/typedArrayUtil ../../../../core/urlUtils ../../../../support/requestImageUtils ../../../../support/requestUtils ./basicInterfaces ./BasisUtil ./ContentObject ./ContentObjectType ./DDSUtil ./textureUtils ./Util ../../../webgl/enums ../../../webgl/Texture ../../../webgl/TextureDescriptor".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F,H,K,q,n,A,z,J){function r(m){return m instanceof HTMLVideoElement?{width:m.videoWidth,height:m.videoHeight}:m}class g extends F.ContentObject{get parameters(){return this._parameters}constructor(m,w){super();this._data=m;this.type=H.ContentObjectType.Texture;this._loadingController=this._loadingPromise=this._glTexture=null;this.events=new e;this._parameters={...x,...w};this._startPreload(m)}dispose(){this.unload();this._data=this.frameUpdate=void 0}_startPreload(m){null!=
m&&(m instanceof HTMLVideoElement?(this.frameUpdate=w=>this._frameUpdate(m,w),this._startPreloadVideoElement(m)):m instanceof HTMLImageElement&&this._startPreloadImageElement(m))}_startPreloadVideoElement(m){if(!(v.isBlobProtocol(m.src)||"auto"===m.preload&&m.crossOrigin)){m.preload="auto";m.crossOrigin="anonymous";const w=!m.paused;m.src=m.src;if(w&&m.autoplay){const D=()=>{m.removeEventListener("canplay",D);m.play()};m.addEventListener("canplay",D)}}}_startPreloadImageElement(m){v.isDataProtocol(m.src)||
v.isBlobProtocol(m.src)||m.crossOrigin||(m.crossOrigin="anonymous",m.src=m.src)}_createDescriptor(m){const w=new J.TextureDescriptor;w.wrapMode=this._parameters.wrap??A.TextureWrapMode.REPEAT;w.flipped=!this._parameters.noUnpackFlip;w.samplingMode=this._parameters.mipmap?A.TextureSamplingMode.LINEAR_MIPMAP_LINEAR:A.TextureSamplingMode.LINEAR;w.hasMipmap=!!this._parameters.mipmap;w.preMultiplyAlpha=!!this._parameters.preMultiplyAlpha;w.maxAnisotropy=this._parameters.maxAnisotropy??(this._parameters.mipmap?
m.parameters.maxMaxAnisotropy:1);return w}get glTexture(){return this._glTexture}get memoryEstimate(){var m;if(!(m=this._glTexture?.gpuMemoryUsage)){m=this._data;var w=this._parameters;if(null==m)m=0;else if(h.isArrayBuffer(m)||h.isUint8Array(m))m=w.encoding===y.TextureEncodingMimeType.KTX2_ENCODING?t.estimateMemoryKTX2(m,!!w.mipmap):w.encoding===y.TextureEncodingMimeType.BASIS_ENCODING?t.estimateMemoryBasis(m,!!w.mipmap):m.byteLength;else{var {width:D,height:M}=m instanceof Image||m instanceof ImageData||
m instanceof HTMLCanvasElement||m instanceof HTMLVideoElement?r(m):w;m=(w.mipmap?4/3:1)*D*M*(w.components||4)||0}}return m}load(m){if(this._glTexture)return this._glTexture;if(this._loadingPromise)return this._loadingPromise;const w=this._data;if(null==w)return this._glTexture=new z.Texture(m,this._createDescriptor(m),null);this._parameters.reloadable||(this._data=void 0);return"string"===typeof w?this._loadFromURL(m,w):w instanceof Image?this._loadFromImageElement(m,w):w instanceof HTMLVideoElement?
this._loadFromVideoElement(m,w):w instanceof ImageData||w instanceof HTMLCanvasElement?this._loadFromImage(m,w):(h.isArrayBuffer(w)||h.isUint8Array(w))&&this._parameters.encoding===y.TextureEncodingMimeType.DDS_ENCODING?this._loadFromDDSData(m,w):(h.isArrayBuffer(w)||h.isUint8Array(w))&&this._parameters.encoding===y.TextureEncodingMimeType.KTX2_ENCODING?this._loadFromKTX2(m,w):(h.isArrayBuffer(w)||h.isUint8Array(w))&&this._parameters.encoding===y.TextureEncodingMimeType.BASIS_ENCODING?this._loadFromBasis(m,
w):h.isUint8Array(w)?this._loadFromPixelData(m,w):h.isArrayBuffer(w)?this._loadFromPixelData(m,new Uint8Array(w)):null}_frameUpdate(m,w){if(null==this._glTexture||m.readyState<p.HAVE_CURRENT_DATA||w===m.currentTime)return w;this._glTexture.setData(m);this._glTexture.descriptor.hasMipmap&&this._glTexture.generateMipmap();this._parameters.updateCallback&&this._parameters.updateCallback();return m.currentTime}_loadFromDDSData(m,w){return this._glTexture=K.createDDSTexture(m,this._createDescriptor(m),
w)}_loadFromKTX2(m,w){return this._loadAsync(()=>t.createTextureKTX2(m,this._createDescriptor(m),w).then(D=>this._glTexture=D))}_loadFromBasis(m,w){return this._loadAsync(()=>t.createTextureBasis(m,this._createDescriptor(m),w).then(D=>this._glTexture=D))}_loadFromPixelData(m,w){n.assert(0<this._parameters.width&&0<this._parameters.height);const D=this._createDescriptor(m);D.pixelFormat=1===this._parameters.components?A.PixelFormat.LUMINANCE:3===this._parameters.components?A.PixelFormat.RGB:A.PixelFormat.RGBA;
D.width=this._parameters.width??0;D.height=this._parameters.height??0;return this._glTexture=new z.Texture(m,D,w)}_loadFromURL(m,w){return this._loadAsync(async D=>{const M=await G.requestImage(w,{signal:D});f.throwIfAborted(D);return this._loadFromImage(m,M)})}_loadFromImageElement(m,w){return w.complete?this._loadFromImage(m,w):this._loadAsync(async D=>{const M=await k.loadImageAsync(w,w.src,!1,D);f.throwIfAborted(D);return this._loadFromImage(m,M)})}_loadFromVideoElement(m,w){return w.readyState>=
p.HAVE_CURRENT_DATA?this._loadFromImage(m,w):this._loadFromVideoElementAsync(m,w)}_loadFromVideoElementAsync(m,w){return this._loadAsync(D=>new Promise((M,S)=>{const V=()=>{w.removeEventListener("loadeddata",B);w.removeEventListener("error",P);c.removeMaybe(E)},B=()=>{w.readyState>=p.HAVE_CURRENT_DATA&&(V(),M(this._loadFromImage(m,w)))},P=l=>{V();S(l||new d("Failed to load video"))};w.addEventListener("loadeddata",B);w.addEventListener("error",P);const E=f.onAbort(D,()=>P(f.createAbortError()))}))}_loadFromImage(m,
w){if(!(w instanceof HTMLVideoElement)){var {maxTextureSize:D}=m.parameters;w=this._parameters.downsampleUncompressed?q.downsampleImage(w,D):q.ensureImageMaxSize(w,D)}D=r(w);this._parameters.width=D.width;this._parameters.height=D.height;const M=this._createDescriptor(m);M.pixelFormat=3===this._parameters.components?A.PixelFormat.RGB:A.PixelFormat.RGBA;M.width=D.width;M.height=D.height;return this._glTexture=new z.Texture(m,M,w)}_loadAsync(m){const w=new AbortController;this._loadingController=w;
const D=m(w.signal);this._loadingPromise=D;m=()=>{this._loadingController===w&&(this._loadingController=null);this._loadingPromise===D&&(this._loadingPromise=null)};D.then(m,m);return D}unload(){this._glTexture=c.disposeMaybe(this._glTexture);if(null!=this._loadingController){const m=this._loadingController;this._loadingPromise=this._loadingController=null;m.abort()}this.events.emit("unloaded")}}var p;(function(m){m[m.HAVE_NOTHING=0]="HAVE_NOTHING";m[m.HAVE_METADATA=1]="HAVE_METADATA";m[m.HAVE_CURRENT_DATA=
2]="HAVE_CURRENT_DATA";m[m.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA";m[m.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"})(p||(p={}));const x={wrap:{s:A.TextureWrapMode.REPEAT,t:A.TextureWrapMode.REPEAT},mipmap:!0,noUnpackFlip:!1,preMultiplyAlpha:!1,downsampleUncompressed:!1};b.Texture=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/support/requestImageUtils":function(){define(["exports","../request"],function(b,a){b.requestImage=async function(d,e){({data:d}=await a(d,{responseType:"image",
...e}));return d};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/BasisUtil":function(){define("exports ../../../../libs/basisu/BasisU ../../../../libs/basisu/TextureFormat ../../../webgl/enums ../../../webgl/Texture ../../../webgl/Util".split(" "),function(b,a,d,e,c,f){async function h(){null==F&&(F=a.getBasisTranscoder(),t=await F);return F}function v(H,K,q,n,A){K=f.getBytesPerElementFormat(K?e.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:e.CompressedTextureFormat.COMPRESSED_RGB8_ETC2);
return Math.ceil(q*n*K*(A&&1<H?(4**H-1)/(3*4**(H-1)):1))}function G(H){return 1<=H.getNumImages()&&!H.isUASTC()}function k(H){return 1<=H.getFaces()&&H.isETC1S()}function y(H,K,q,n,A,z,J,r){const {compressedTextureETC:g,compressedTextureS3TC:p}=H.capabilities,[x,m]=g?n?[d.TextureFormat.ETC2_RGBA,e.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC]:[d.TextureFormat.ETC1_RGB,e.CompressedTextureFormat.COMPRESSED_RGB8_ETC2]:p?n?[d.TextureFormat.BC3_RGBA,e.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT]:
[d.TextureFormat.BC1_RGB,e.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT]:[d.TextureFormat.RGBA32,e.PixelFormat.RGBA];q=K.hasMipmap?q:Math.min(1,q);n=[];for(let w=0;w<q;w++)n.push(new Uint8Array(J(w,x))),r(w,x,n[w]);K.internalFormat=m;K.hasMipmap=1<n.length;K.samplingMode=K.hasMipmap?e.TextureSamplingMode.LINEAR_MIPMAP_LINEAR:e.TextureSamplingMode.LINEAR;K.width=A;K.height=z;return new c.Texture(H,K,{type:"compressed",levels:n})}let t=null,F=null;b.createTextureBasis=async function(H,K,q){null==
t&&(t=await h());const n=new t.BasisFile(new Uint8Array(q));if(!G(n))return null;n.startTranscoding();H=y(H,K,n.getNumLevels(0),n.getHasAlpha(),n.getImageWidth(0,0),n.getImageHeight(0,0),(A,z)=>n.getImageTranscodedSizeInBytes(0,A,z),(A,z,J)=>n.transcodeImage(J,0,A,z,0,0));n.close();n.delete();return H};b.createTextureKTX2=async function(H,K,q){null==t&&(t=await h());const n=new t.KTX2File(new Uint8Array(q));if(!k(n))return null;n.startTranscoding();H=y(H,K,n.getLevels(),n.getHasAlpha(),n.getWidth(),
n.getHeight(),(A,z)=>n.getImageTranscodedSizeInBytes(A,0,0,z),(A,z,J)=>n.transcodeImage(J,A,0,0,z,0,-1,-1));n.close();n.delete();return H};b.estimateMemoryBasis=function(H,K){if(null==t)return H.byteLength;H=new t.BasisFile(new Uint8Array(H));K=G(H)?v(H.getNumLevels(0),H.getHasAlpha(),H.getImageWidth(0,0),H.getImageHeight(0,0),K):0;H.close();H.delete();return K};b.estimateMemoryKTX2=function(H,K){if(null==t)return H.byteLength;H=new t.KTX2File(new Uint8Array(H));K=k(H)?v(H.getLevels(),H.getHasAlpha(),
H.getWidth(),H.getHeight(),K):0;H.close();H.delete();return K};b.loadBasis=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/libs/basisu/BasisU":function(){define(["require","exports","../../assets"],function(b,a,d){let e;a.getBasisTranscoder=function(){if(null==e){const c=f=>d.getAssetUrl(`esri/libs/basisu/${f}`);e=(new Promise((f,h)=>b(["../../chunks/basis_transcoder"],f,h))).then(f=>f.basis_transcoder).then(({default:f})=>f({locateFile:c}).then(h=>{h.initializeBasis();delete h.then;
return h}))}return e};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/libs/basisu/TextureFormat":function(){define(["exports"],function(b){b.TextureFormat=void 0;var a=b.TextureFormat||(b.TextureFormat={});a[a.ETC1_RGB=0]="ETC1_RGB";a[a.ETC2_RGBA=1]="ETC2_RGBA";a[a.BC1_RGB=2]="BC1_RGB";a[a.BC3_RGBA=3]="BC3_RGBA";a[a.BC4_R=4]="BC4_R";a[a.BC5_RG=5]="BC5_RG";a[a.BC7_M6_RGB=6]="BC7_M6_RGB";a[a.BC7_M5_RGBA=7]="BC7_M5_RGBA";a[a.PVRTC1_4_RGB=8]="PVRTC1_4_RGB";a[a.PVRTC1_4_RGBA=9]="PVRTC1_4_RGBA";
a[a.ASTC_4x4_RGBA=10]="ASTC_4x4_RGBA";a[a.ATC_RGB=11]="ATC_RGB";a[a.ATC_RGBA=12]="ATC_RGBA";a[a.FXT1_RGB=17]="FXT1_RGB";a[a.PVRTC2_4_RGB=18]="PVRTC2_4_RGB";a[a.PVRTC2_4_RGBA=19]="PVRTC2_4_RGBA";a[a.ETC2_EAC_R11=20]="ETC2_EAC_R11";a[a.ETC2_EAC_RG11=21]="ETC2_EAC_RG11";a[a.RGBA32=13]="RGBA32";a[a.RGB565=14]="RGB565";a[a.BGR565=15]="BGR565";a[a.RGBA4444=16]="RGBA4444";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["exports",
"../../../../core/Logger","../../../webgl/enums","../../../webgl/Texture"],function(b,a,d,e){function c(y){return y.charCodeAt(0)+(y.charCodeAt(1)<<8)+(y.charCodeAt(2)<<16)+(y.charCodeAt(3)<<24)}function f(y,t){var F=new Int32Array(y,0,31);if(542327876!==F[0])return h.error("Invalid magic number in DDS header"),null;if(!(F[20]&4))return h.error("Unsupported format, must contain a FourCC code"),null;var H=F[21];let K;switch(H){case v:H=8;K=d.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT;break;
case G:H=16;K=d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case k:H=16;K=d.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return h.error("Unsupported FourCC code:",String.fromCharCode(H&255,H>>8&255,H>>16&255,H>>24&255)),null}let q=1,n=F[4],A=F[3];if(0!==(n&3)||0!==(A&3))h.warn("Rounding up compressed texture size to nearest multiple of 4."),n=n+3&-4,A=A+3&-4;const z=n,J=A;F[2]&131072&&!1!==t&&(q=Math.max(1,F[7]));let r=F[1]+4;const g=[];for(let p=0;p<q;++p)F=
(n+3>>2)*(A+3>>2)*H,t=new Uint8Array(y,r,F),g.push(t),r+=F,n=Math.max(1,n>>1),A=Math.max(1,A>>1);return{textureData:{type:"compressed",levels:g},internalFormat:K,width:z,height:J}}const h=a.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),v=c("DXT1"),G=c("DXT3"),k=c("DXT5");b.createDDSTexture=function(y,t,F){F=f(F,t.hasMipmap??!1);if(null==F)throw Error("DDS texture data is null");const {textureData:H,internalFormat:K,width:q,height:n}=F;t.samplingMode=1<H.levels.length?d.TextureSamplingMode.LINEAR_MIPMAP_LINEAR:
d.TextureSamplingMode.LINEAR;t.hasMipmap=1<H.levels.length;t.internalFormat=K;t.width=q;t.height=n;return new e.Texture(y,t,H)};b.createDDSTextureData=f;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/textureUtils":function(){define(["exports","../../../../core/Error"],function(b,a){function d(c,f,h){if(c instanceof ImageData)return d(e(c),f,h);const v=document.createElement("canvas");v.width=f;v.height=h;v.getContext("2d").drawImage(c,0,0,v.width,v.height);
return v}function e(c){const f=document.createElement("canvas");f.width=c.width;f.height=c.height;const h=f.getContext("2d");if(null==h)throw new a("Failed to create 2d context from HTMLCanvasElement");h.putImageData(c,0,0);return f}b.applyTextureResizeModulo=function(c){return 16*Math.ceil(c/16)};b.downsampleImage=function(c,f){let h=c.width*c.height;if(4096>h)return c instanceof ImageData?e(c):c;let v=c.width,G=c.height;do v=Math.ceil(v/2),G=Math.ceil(G/2),h=v*G;while(1048576<h||null!=f&&(v>f||
G>f));return d(c,v,G)};b.ensureImageMaxSize=function(c,f){const h=Math.max(c.width,c.height);if(h<=f)return c;f/=h;return d(c,Math.round(c.width*f),Math.round(c.height*f))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl":function(){define(["exports","../output/ReadLinearDepth.glsl","../../shaderModules/Float2PassUniform","../../shaderModules/interfaces","../../shaderModules/Texture2DPassUniform"],function(b,
a,d,e,c){class f{constructor(){this.cullAboveGround=!1}}b.MultipassTerrainUniforms=f;b.multipassTerrainTest=function(h,v){if(v.multipassEnabled){h.fragment.include(a.ReadLinearDepth);h.fragment.uniforms.add(new c.Texture2DPassUniform("terrainDepthTexture",(k,y)=>y.multipassTerrain.linearDepth?.colorTexture));h.fragment.uniforms.add(new d.Float2PassUniform("nearFar",(k,y)=>y.camera.nearFar));var G=v.occlusionPass;h.fragment.code.add(e.glsl`
   ${G?"bool":"void"} terrainDepthTest(float fragmentDepth) {
      vec4 data = texelFetch(terrainDepthTexture, ivec2(gl_FragCoord.xy), 0);
      float linearDepth = linearDepthFromRGBA(data, nearFar);
      ${G?e.glsl`return fragmentDepth < linearDepth && data != vec4(0.0, 0.0, 0.0, 1.0);`:e.glsl`
          if(fragmentDepth ${v.cullAboveGround?"\x3e":"\x3c\x3d"} linearDepth){
            discard;
          }`}
    }`)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl":function(){define(["exports","../util/RgbaFloatEncoding.glsl","../../shaderModules/interfaces"],function(b,a,d){b.ReadLinearDepth=function(e){e.include(a.RgbaFloatEncoding);e.code.add(d.glsl`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromRGBA(vec4 depth, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(depth), nearFar);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
ivec2 iuv = ivec2(uv * vec2(textureSize(depthTex, 0)));
return linearDepthFromRGBA(texelFetch(depthTex, iuv, 0), nearFar);
}`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.PiUtils=function(d){d.vertex.code.add(a.glsl`const float PI = 3.141592653589793;`);d.fragment.code.add(a.glsl`const float PI = 3.141592653589793;
const float LIGHT_NORMALIZATION = 1.0 / PI;
const float INV_PI = 0.3183098861837907;
const float HALF_PI = 1.570796326794897;`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff":function(){define(["exports"],function(b){b.defaultMaskAlphaCutoff=.1;b.symbolAlphaCutoff=.001;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(b,a){b.ColorConversion=
function(d){d.code.add(a.glsl`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderModules/ShaderBuilder":function(){define(["exports","../../../../../core/Error","../../../../../core/Logger","../shaderTechnique/BindType","../../lib/Util"],function(b,a,d,e,c){const f=d.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class h{constructor(){this._includedModules=new Map}include(n,A){if(this._includedModules.has(n)){const z=this._includedModules.get(n);
if(z!==A){f.error("Trying to include shader module multiple times with different sets of options.");A=new Set;for(const J of Object.keys(z))z[J]!==n[J]&&A.add(J);for(const J of Object.keys(n))z[J]!==n[J]&&A.add(J);A.forEach(J=>console.error(`  ${J}: current ${z[J]} new ${n[J]}`))}}else this._includedModules.set(n,A),n(this.builder,A)}}class v extends h{constructor(){super(...arguments);this.vertex=new y;this.fragment=new y;this.attributes=new t;this.varyings=new F;this.extensions=new H;this.constants=
new q;this.outputs=new K}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(n){const A=this.extensions.generateSource(n),z=this.attributes.generateSource(n),J=this.varyings.generateSource(n);var r="vertex"===n?this.vertex:this.fragment;const g=r.uniforms.generateSource(),p=r.code.generateSource(),x="vertex"===n?"precision highp float;\nprecision highp sampler2D;":"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif";
r=this.constants.generateSource().concat(r.constants.generateSource());n=this.outputs.generateSource(n);return`#version 300 es\n${A.join("\n")}\n\n${x}\n\n${r.join("\n")}\n\n${g.join("\n")}\n\n${z.join("\n")}\n\n${J.join("\n")}\n\n${n.join("\n")}\n\n${p.join("\n")}`}generateBindPass(n){const A=new Map;this.vertex.uniforms.entries.forEach(r=>{const g=r.bind[e.BindType.Pass];g&&A.set(r.name,g)});this.fragment.uniforms.entries.forEach(r=>{const g=r.bind[e.BindType.Pass];g&&A.set(r.name,g)});const z=
Array.from(A.values()),J=z.length;return(r,g)=>{for(let p=0;p<J;++p)z[p](n,r,g)}}generateBindDraw(n){const A=new Map;this.vertex.uniforms.entries.forEach(r=>{const g=r.bind[e.BindType.Draw];g&&A.set(r.name,g)});this.fragment.uniforms.entries.forEach(r=>{const g=r.bind[e.BindType.Draw];g&&A.set(r.name,g)});const z=Array.from(A.values()),J=z.length;return(r,g,p)=>{for(let x=0;x<J;++x)z[x](n,r,g,p)}}}class G{constructor(){this._entries=new Map}add(...n){for(const A of n)this._add(A)}get(n){return this._entries.get(n)}_add(n){if(null==
n)f.error(`Trying to add null Uniform from ${Error().stack}.`);else{if(this._entries.has(n.name)&&!this._entries.get(n.name).equals(n))throw new a(`Duplicate uniform name ${n.name} for different uniform type`);this._entries.set(n.name,n)}}generateSource(){return Array.from(this._entries.values()).map(n=>null!=n.arraySize?`uniform ${n.type} ${n.name}[${n.arraySize}];`:`uniform ${n.type} ${n.name};`)}get entries(){return Array.from(this._entries.values())}}class k{constructor(){this._entries=[]}add(n){this._entries.push(n)}generateSource(){return this._entries}}
class y extends h{constructor(){super(...arguments);this.uniforms=new G;this.code=new k;this.constants=new q}get builder(){return this}}class t{constructor(){this._entries=[]}add(n,A){this._entries.push([n,A])}generateSource(n){return"fragment"===n?[]:this._entries.map(A=>`in ${A[1]} ${A[0]};`)}}class F{constructor(){this._entries=new Map}add(n,A){this._entries.has(n)&&c.assert(this._entries.get(n)===A);this._entries.set(n,A)}generateSource(n){const A=[];this._entries.forEach((z,J)=>A.push("vertex"===
n?`out ${z} ${J};`:`in ${z} ${J};`));return A}}class H{constructor(){this._entries=new Set}add(n){this._entries.add(n)}generateSource(n){const A="vertex"===n?H.ALLOWLIST_VERTEX:H.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(z=>A.includes(z)).map(z=>`#extension ${z} : enable`)}}H.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"];H.ALLOWLIST_VERTEX=[];class K{constructor(){this._entries=new Map}add(n,A,z=0){const J=this._entries.get(z);J?c.assert(J.name===
n&&J.type===A,`Fragment shader output location ${z} occupied`):this._entries.set(z,{name:n,type:A})}generateSource(n){if("vertex"===n)return[];0===this._entries.size&&this._entries.set(0,{name:K.DEFAULT_NAME,type:K.DEFAULT_TYPE});const A=[];this._entries.forEach((z,J)=>A.push(`layout(location = ${J}) out ${z.type} ${z.name};`));return A}}K.DEFAULT_TYPE="vec4";K.DEFAULT_NAME="fragColor";class q{constructor(){this._entries=new Set}add(n,A,z){let J="ERROR_CONSTRUCTOR_STRING";switch(A){case "float":J=
q._numberToFloatStr(z);break;case "int":J=q._numberToIntStr(z);break;case "bool":J=z.toString();break;case "vec2":J=`vec2(${q._numberToFloatStr(z[0])},                            ${q._numberToFloatStr(z[1])})`;break;case "vec3":J=`vec3(${q._numberToFloatStr(z[0])},                            ${q._numberToFloatStr(z[1])},                            ${q._numberToFloatStr(z[2])})`;break;case "vec4":J=`vec4(${q._numberToFloatStr(z[0])},                            ${q._numberToFloatStr(z[1])},                            ${q._numberToFloatStr(z[2])},                            ${q._numberToFloatStr(z[3])})`;
break;case "ivec2":J=`ivec2(${q._numberToIntStr(z[0])},                             ${q._numberToIntStr(z[1])})`;break;case "ivec3":J=`ivec3(${q._numberToIntStr(z[0])},                             ${q._numberToIntStr(z[1])},                             ${q._numberToIntStr(z[2])})`;break;case "ivec4":J=`ivec4(${q._numberToIntStr(z[0])},                             ${q._numberToIntStr(z[1])},                             ${q._numberToIntStr(z[2])},                             ${q._numberToIntStr(z[3])})`;
break;case "mat2":case "mat3":case "mat4":J=`${A}(${Array.prototype.map.call(z,r=>q._numberToFloatStr(r)).join(", ")})`}this._entries.add(`const ${A} ${n} = ${J};`);return this}static _numberToIntStr(n){return n.toFixed(0)}static _numberToFloatStr(n){return Number.isInteger(n)?n.toFixed(1):n.toString()}generateSource(){return Array.from(this._entries)}}b.Code=k;b.Includes=h;b.ShaderBuilder=v;b.Stage=y;b.Uniforms=G;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration":function(){define("exports ../../../../chunks/tslib.es6 ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/TransparencyPassType ../materials/DefaultTechniqueConfiguration".split(" "),
function(b,a,d,e,c,f){b.CapType=void 0;(function(v){v[v.BUTT=0]="BUTT";v[v.SQUARE=1]="SQUARE";v[v.ROUND=2]="ROUND";v[v.COUNT=3]="COUNT"})(b.CapType||(b.CapType={}));class h extends f.DefaultTechniqueConfiguration{constructor(){super(...arguments);this.output=d.ShaderOutput.Color;this.capType=b.CapType.BUTT;this.transparencyPassType=c.TransparencyPassType.NONE;this.stippleOffColorEnabled=this.stippleEnabled=this.draped=this.writeDepth=this.hasPolygonOffset=this.hasSlicePlane=this.occluder=!1;this.stipplePreferContinuous=
!0;this.objectAndLayerIdColorInstanced=this.wireframe=this.cullAboveGround=this.multipassEnabled=this.hasOccludees=this.innerColorEnabled=this.falloffEnabled=this.vvOpacity=this.vvColor=this.vvSize=this.applyMarkerOffset=this.roundJoins=!1}}a.__decorate([e.parameter({count:d.ShaderOutput.COUNT})],h.prototype,"output",void 0);a.__decorate([e.parameter({count:b.CapType.COUNT})],h.prototype,"capType",void 0);a.__decorate([e.parameter({count:c.TransparencyPassType.COUNT})],h.prototype,"transparencyPassType",
void 0);a.__decorate([e.parameter()],h.prototype,"occluder",void 0);a.__decorate([e.parameter()],h.prototype,"hasSlicePlane",void 0);a.__decorate([e.parameter()],h.prototype,"hasPolygonOffset",void 0);a.__decorate([e.parameter()],h.prototype,"writeDepth",void 0);a.__decorate([e.parameter()],h.prototype,"draped",void 0);a.__decorate([e.parameter()],h.prototype,"stippleEnabled",void 0);a.__decorate([e.parameter()],h.prototype,"stippleOffColorEnabled",void 0);a.__decorate([e.parameter()],h.prototype,
"stipplePreferContinuous",void 0);a.__decorate([e.parameter()],h.prototype,"roundJoins",void 0);a.__decorate([e.parameter()],h.prototype,"applyMarkerOffset",void 0);a.__decorate([e.parameter()],h.prototype,"vvSize",void 0);a.__decorate([e.parameter()],h.prototype,"vvColor",void 0);a.__decorate([e.parameter()],h.prototype,"vvOpacity",void 0);a.__decorate([e.parameter()],h.prototype,"falloffEnabled",void 0);a.__decorate([e.parameter()],h.prototype,"innerColorEnabled",void 0);a.__decorate([e.parameter()],
h.prototype,"hasOccludees",void 0);a.__decorate([e.parameter()],h.prototype,"multipassEnabled",void 0);a.__decorate([e.parameter()],h.prototype,"cullAboveGround",void 0);a.__decorate([e.parameter()],h.prototype,"wireframe",void 0);a.__decorate([e.parameter()],h.prototype,"objectAndLayerIdColorInstanced",void 0);a.__decorate([e.parameter({constValue:!1})],h.prototype,"occlusionPass",void 0);a.__decorate([e.parameter({constValue:!0})],h.prototype,"hasVvInstancing",void 0);a.__decorate([e.parameter({constValue:!0})],
h.prototype,"hasSliceTranslatedView",void 0);b.RibbonLineTechniqueConfiguration=h;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/shaders/RibbonLineTechnique":function(){define("require exports ../core/shaderLibrary/ShaderOutput ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../lib/OrderIndependentTransparency ../lib/Program ../lib/StencilUtils ../lib/TransparencyPassType ../lib/VertexAttribute ../../../../chunks/RibbonLine.glsl ../../../webgl/enums ../../../webgl/renderState".split(" "),
function(b,a,d,e,c,f,h,v,G,k,y,t,F){const H=new Map([[k.VertexAttribute.POSITION,0],[k.VertexAttribute.SUBDIVISIONFACTOR,1],[k.VertexAttribute.UV0,2],[k.VertexAttribute.AUXPOS1,3],[k.VertexAttribute.AUXPOS2,4],[k.VertexAttribute.COLOR,5],[k.VertexAttribute.COLORFEATUREATTRIBUTE,5],[k.VertexAttribute.SIZE,6],[k.VertexAttribute.SIZEFEATUREATTRIBUTE,6],[k.VertexAttribute.OPACITYFEATUREATTRIBUTE,7],[k.VertexAttribute.OBJECTANDLAYERIDCOLOR,8]]);class K extends c.ShaderTechnique{initializeProgram(n){return new h.Program(n.rctx,
K.shader.get().build(this.configuration),H)}_makePipelineState(n,A){const z=this.configuration,J=n===G.TransparencyPassType.NONE,r=n===G.TransparencyPassType.FrontFace;return F.makePipelineState({blending:z.output===d.ShaderOutput.Color||z.output===d.ShaderOutput.Alpha?J?f.blendingDefault:f.oitBlending(n):null,depthTest:{func:f.oitDepthTest(n)},depthWrite:J?z.writeDepth?F.defaultDepthWriteParams:null:f.oitDepthWrite(n),colorWrite:F.defaultColorWriteParams,stencilWrite:z.hasOccludees?v.stencilWriteMaskOn:
null,stencilTest:z.hasOccludees?A?v.stencilToolMaskBaseParams:v.stencilBaseAllZerosParams:null,polygonOffset:J||r?z.hasPolygonOffset?q:null:f.OITPolygonOffset})}initializePipeline(){var n=this.configuration;n.occluder&&(n=n.hasPolygonOffset?q:null,this._occluderPipelineTransparent=F.makePipelineState({blending:f.blendingDefault,polygonOffset:n,depthTest:v.depthCompareAlways,depthWrite:null,colorWrite:F.defaultColorWriteParams,stencilWrite:null,stencilTest:v.stencilToolTransparentOccluderParams}),
this._occluderPipelineOpaque=F.makePipelineState({blending:f.blendingDefault,polygonOffset:n,depthTest:v.depthCompareAlways,depthWrite:null,colorWrite:F.defaultColorWriteParams,stencilWrite:v.stencilWriteMaskOff,stencilTest:v.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=F.makePipelineState({blending:null,polygonOffset:n,depthTest:v.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:v.stencilWriteMaskOn,stencilTest:v.stencilToolMaskBaseParams}));this._occludeePipelineState=
this._makePipelineState(this.configuration.transparencyPassType,!0);return this._makePipelineState(this.configuration.transparencyPassType,!1)}get primitiveType(){return this.configuration.wireframe?t.PrimitiveType.LINES:t.PrimitiveType.TRIANGLE_STRIP}getPipeline(n,A,z){return n?this._occludeePipelineState:this.configuration.occluder?z?this._occluderPipelineTransparent:A?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:super.getPipeline()}}K.shader=new e.ReloadableShaderModule(y.RibbonLine,
()=>new Promise((n,A)=>b(["./RibbonLine.glsl"],n,A)));const q={factor:0,units:-4};a.RibbonLineTechnique=K;a.vertexAttributeLocations=H;Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule":function(){define(["exports"],function(b){class a{constructor(d,e){this._module=d;this._loadModule=e}get(){return this._module}async reload(){return this._module=await this._loadModule()}}b.ReloadableShaderModule=a;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique":function(){define(["exports","../../../../../core/maybe","../../../../webgl/enums"],function(b,a,d){class e{constructor(c,f,h){this.release=h;this.initializeConfiguration(c,f);this._configuration=f.snapshot();this._program=this.initializeProgram(c);this._pipeline=this.initializePipeline(c.rctx.capabilities)}destroy(){this._program=a.disposeMaybe(this._program);this._pipeline=this._configuration=
null}reload(c){a.disposeMaybe(this._program);this._program=this.initializeProgram(c);this._pipeline=this.initializePipeline(c.rctx.capabilities)}get program(){return this._program}get compiled(){return this.program.compiled}get key(){return this._configuration.key}get configuration(){return this._configuration}ensureAttributeLocations(c){this.program.assertCompatibleVertexAttributeLocations(c)}get primitiveType(){return d.PrimitiveType.TRIANGLES}getPipeline(c,f,h){return this._pipeline}initializeConfiguration(c,
f){}}b.ShaderTechnique=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","./TransparencyPassType","../../../webgl/enums","../../../webgl/renderState"],function(b,a,d,e){const c=e.separateBlendingParams(d.BlendFactor.SRC_ALPHA,d.BlendFactor.ONE,d.BlendFactor.ONE_MINUS_SRC_ALPHA,d.BlendFactor.ONE_MINUS_SRC_ALPHA),f=e.simpleBlendingParams(d.BlendFactor.ONE,d.BlendFactor.ONE),h=e.simpleBlendingParams(d.BlendFactor.ZERO,
d.BlendFactor.ONE_MINUS_SRC_ALPHA),v={factor:-1,units:-2};b.OITPolygonOffset=v;b.OITPolygonOffsetLimit=5E5;b.blendingAlpha=h;b.blendingColor=f;b.blendingDefault=c;b.getOITPolygonOffset=function(G){return G?v:null};b.oitBlending=function(G){return G===a.TransparencyPassType.FrontFace?null:G===a.TransparencyPassType.Alpha?h:f};b.oitDepthTest=function(G,k=d.CompareFunction.LESS){return G===a.TransparencyPassType.NONE||G===a.TransparencyPassType.FrontFace?k:d.CompareFunction.LEQUAL};b.oitDepthWrite=function(G){return G===
a.TransparencyPassType.FrontFace?e.defaultDepthWriteParams:null};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/renderState":function(){define(["exports","../3d/webgl-engine/lib/basicInterfaces","./enums"],function(b,a,d){function e(I){return w.intern(I)}function c(I){return D.intern(I)}function f(I){return M.intern(I)}function h(I){return S.intern(I)}function v(I){return V.intern(I)}function G(I){return B.intern(I)}function k(I){return P.intern(I)}function y(I){return E.intern(I)}
function t(I){return l.intern(I)}function F(I){return"["+I.join(",")+"]"}function H(I){return I?F([I.srcRgb,I.srcAlpha,I.dstRgb,I.dstAlpha,I.opRgb,I.opAlpha,I.color.r,I.color.g,I.color.b,I.color.a]):null}function K(I){return I?F([I.face,I.mode]):null}function q(I){return I?F([I.factor,I.units]):null}function n(I){return I?F([I.func]):null}function A(I){return I?F([I.function.func,I.function.ref,I.function.mask,I.operation.fail,I.operation.zFail,I.operation.zPass]):null}function z(I){return I?F([I.zNear,
I.zFar]):null}function J(I){return I?F([I.r,I.g,I.b,I.a]):null}function r(I){return I?F([I.mask]):null}function g(I){return I?F(I.buffers):null}const p={face:d.Face.BACK,mode:d.CullMode.CCW},x={face:d.Face.FRONT,mode:d.CullMode.CCW};class m{constructor(I,N){this._makeKey=I;this._makeRef=N;this._interns=new Map}intern(I){if(!I)return null;const N=this._makeKey(I),R=this._interns;R.has(N)||R.set(N,this._makeRef(I));return R.get(N)??null}}const w=new m(H,I=>({__tag:"Blending",...I})),D=new m(K,I=>({__tag:"Culling",
...I})),M=new m(q,I=>({__tag:"PolygonOffset",...I})),S=new m(n,I=>({__tag:"DepthTest",...I})),V=new m(A,I=>({__tag:"StencilTest",...I})),B=new m(z,I=>({__tag:"DepthWrite",...I})),P=new m(J,I=>({__tag:"ColorWrite",...I})),E=new m(r,I=>({__tag:"StencilWrite",...I})),l=new m(g,I=>({__tag:"DrawBuffers",...I})),C=new m(function(I){return I?F([H(I.blending),K(I.culling),q(I.polygonOffset),n(I.depthTest),A(I.stencilTest),z(I.depthWrite),J(I.colorWrite),r(I.stencilWrite),g(I.drawBuffers)]):null},I=>({blending:e(I.blending),
culling:c(I.culling),polygonOffset:f(I.polygonOffset),depthTest:h(I.depthTest),stencilTest:v(I.stencilTest),depthWrite:G(I.depthWrite),colorWrite:k(I.colorWrite),stencilWrite:y(I.stencilWrite),drawBuffers:t(I.drawBuffers)}));class Q{constructor(I){this._drawBuffersInvalid=this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=
I}setPipeline(I){if(this._pipelineInvalid||I!==this._pipeline)this._setBlending(I.blending),this._setCulling(I.culling),this._setPolygonOffset(I.polygonOffset),this._setDepthTest(I.depthTest),this._setStencilTest(I.stencilTest),this._setDepthWrite(I.depthWrite),this._setColorWrite(I.colorWrite),this._setStencilWrite(I.stencilWrite),this._setDrawBuffers(I.drawBuffers),this._pipeline=I;this._pipelineInvalid=!1}invalidateBlending(){this._pipelineInvalid=this._blendingInvalid=!0}invalidateCulling(){this._pipelineInvalid=
this._cullingInvalid=!0}invalidatePolygonOffset(){this._pipelineInvalid=this._polygonOffsetInvalid=!0}invalidateDepthTest(){this._pipelineInvalid=this._depthTestInvalid=!0}invalidateStencilTest(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDepthWrite(){this._pipelineInvalid=this._depthWriteInvalid=!0}invalidateColorWrite(){this._pipelineInvalid=this._colorWriteInvalid=!0}invalidateStencilWrite(){this._pipelineInvalid=this._stencilTestInvalid=!0}invalidateDrawBuffers(){this._pipelineInvalid=
this._drawBuffersInvalid=!0}_setBlending(I){this._blending=this._setSubState(I,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1}_setCulling(I){this._culling=this._setSubState(I,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1}_setPolygonOffset(I){this._polygonOffset=this._setSubState(I,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1}_setDepthTest(I){this._depthTest=
this._setSubState(I,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1}_setStencilTest(I){this._stencilTest=this._setSubState(I,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1}_setDepthWrite(I){this._depthWrite=this._setSubState(I,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1}_setColorWrite(I){this._colorWrite=this._setSubState(I,this._colorWrite,
this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1}_setStencilWrite(I){this._stencilWrite=this._setSubState(I,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1}_setDrawBuffers(I){this._drawBuffers=this._setSubState(I,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers);this._drawBuffersInvalid=!1}_setSubState(I,N,R,U){if(R||I!==N)U(I),this._pipelineInvalid=!0;return I}}b.StateTracker=
Q;b.backFaceCullingParams=p;b.cullingParams=I=>I===a.CullFaceOptions.Back?p:I===a.CullFaceOptions.Front?x:null;b.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};b.defaultDepthWriteParams={zNear:0,zFar:1};b.frontFaceCullingParams=x;b.makeBlending=e;b.makeColorWrite=k;b.makeCulling=c;b.makeDepthTest=h;b.makeDepthWrite=G;b.makeDrawBuffers=t;b.makePipelineState=function(I){return C.intern(I)};b.makePolygonOffset=f;b.makeStencilTest=v;b.makeStencilWrite=y;b.separateBlendingParams=function(I,N,R,U,Z=d.BlendOperation.ADD,
O=d.BlendOperation.ADD,T=[0,0,0,0]){return{srcRgb:I,srcAlpha:N,dstRgb:R,dstAlpha:U,opRgb:Z,opAlpha:O,color:{r:T[0],g:T[1],b:T[2],a:T[3]}}};b.simpleBlendingParams=function(I,N,R=d.BlendOperation.ADD,U=[0,0,0,0]){return{srcRgb:I,srcAlpha:I,dstRgb:N,dstAlpha:N,opRgb:R,opAlpha:R,color:{r:U[0],g:U[1],b:U[2],a:U[3]}}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/Program":function(){define(["exports","../../../../core/PooledArray","../../../webgl/checkWebGLError"],
function(b,a,d){class e{constructor(c,f,h){this._context=c;this._locations=h;this._textures=new Map;this._freeTextureUnits=new a({deallocator:null});this._glProgram=c.programCache.acquire(f.generate("vertex"),f.generate("fragment"),h);this._glProgram.stop=()=>{throw Error("Wrapped _glProgram used directly");};this.bindPass=f.generateBindPass(this);this.bindDraw=f.generateBindDraw(this);this._fragmentUniforms=d.webglDebugEnabled()?f.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get compiled(){return this._glProgram.compiled}setUniform1b(c,
f){this._glProgram.setUniform1i(c,f?1:0)}setUniform1i(c,f){this._glProgram.setUniform1i(c,f)}setUniform1f(c,f){this._glProgram.setUniform1f(c,f)}setUniform2fv(c,f){this._glProgram.setUniform2fv(c,f)}setUniform3fv(c,f){this._glProgram.setUniform3fv(c,f)}setUniform4fv(c,f){this._glProgram.setUniform4fv(c,f)}setUniformMatrix3fv(c,f){this._glProgram.setUniformMatrix3fv(c,f)}setUniformMatrix4fv(c,f){this._glProgram.setUniformMatrix4fv(c,f)}setUniform1fv(c,f){this._glProgram.setUniform1fv(c,f)}setUniform1iv(c,
f){this._glProgram.setUniform1iv(c,f)}setUniform2iv(c,f){this._glProgram.setUniform3iv(c,f)}setUniform3iv(c,f){this._glProgram.setUniform3iv(c,f)}setUniform4iv(c,f){this._glProgram.setUniform4iv(c,f)}assertCompatibleVertexAttributeLocations(c){c.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear();this._freeTextureUnits.clear()}bindTexture(c,f){if(null==f?.glName){if(f=this._textures.get(c))this._context.bindTexture(null,f.unit),this._freeTextureUnit(f),
this._textures.delete(c);return null}let h=this._textures.get(c);null==h?(h=this._allocTextureUnit(f),this._textures.set(c,h)):h.texture=f;this._context.useProgram(this);this.setUniform1i(c,h.unit);this._context.bindTexture(f,h.unit);return h.unit}rebindTextures(){this._context.useProgram(this);this._textures.forEach((c,f)=>{this._context.bindTexture(c.texture,c.unit);this.setUniform1i(f,c.unit)});null!=this._fragmentUniforms&&this._fragmentUniforms.forEach(c=>{"sampler2D"!==c.type&&"samplerCube"!==
c.type||this._textures.has(c.name)||console.error(`Texture sampler ${c.name} has no bound texture`)})}_allocTextureUnit(c){return{texture:c,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(c){this._freeTextureUnits.push(c.unit)}}b.Program=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/3d/webgl-engine/lib/StencilUtils":function(){define(["exports","./basicInterfaces","../../../webgl/enums"],function(b,a,d){const e=
{func:d.CompareFunction.LESS},c={function:{func:d.CompareFunction.ALWAYS,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:d.StencilOperation.KEEP,zFail:d.StencilOperation.KEEP,zPass:d.StencilOperation.ZERO}},f={function:{func:d.CompareFunction.ALWAYS,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:d.StencilOperation.KEEP,zFail:d.StencilOperation.KEEP,zPass:d.StencilOperation.REPLACE}},h=
{function:{func:d.CompareFunction.EQUAL,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:d.StencilOperation.KEEP,zFail:d.StencilOperation.KEEP,zPass:d.StencilOperation.KEEP}};a={function:{func:d.CompareFunction.NOTEQUAL,ref:a.StencilBits.OutlineVisualElementMask,mask:a.StencilBits.OutlineVisualElementMask},operation:{fail:d.StencilOperation.KEEP,zFail:d.StencilOperation.KEEP,zPass:d.StencilOperation.KEEP}};b.depthCompareAlways={func:d.CompareFunction.ALWAYS};
b.depthCompareLess=e;b.renderWhenBitIsNotSet=v=>({function:{func:d.CompareFunction.NOTEQUAL,ref:v,mask:v},operation:{fail:d.StencilOperation.KEEP,zFail:d.StencilOperation.KEEP,zPass:d.StencilOperation.KEEP}});b.replaceBitWhenDepthTestPasses=v=>({function:{func:d.CompareFunction.ALWAYS,ref:v,mask:v},operation:{fail:d.StencilOperation.KEEP,zFail:d.StencilOperation.KEEP,zPass:d.StencilOperation.REPLACE}});b.stencilBaseAllZerosParams=c;b.stencilToolMaskBaseParams=f;b.stencilToolMaskOccluderParams=h;b.stencilToolTransparentOccluderParams=
a;b.stencilWriteMaskOff={mask:0};b.stencilWriteMaskOn={mask:255};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"fx3d/views/3d/webgl-engine-extensions/GLVerTexture":function(){define(["dojo/_base/declare","../support/fx3dUtils"],function(b,a){var d=0;return b(null,{declaredClass:"esri.views.3d.webgl-engine-extensions.GLVerTexture",constructor:function(e){this.id=d++;this._gl=e;this._ready=!1;this._textureHandle=this._pixelDataType=this._pixelData=null;this._gl&&(this._textureHandle=
this._gl.createTexture())},_setTexParams:function(){this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST);this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST)},_reset:function(e,c){this._width=
e;this._height=c;this._pixelSize=window.parseInt(this._width*this._height*4);(this._isPowerOfTwo=a.isPowerOfTwo(e)&&a.isPowerOfTwo(c))||(console.warn("Width and height are not power of 2, and the rendering may be incorrect."),console.error("GLVerTexture ERROR 222"))},initTexture:function(e,c,f){if(f instanceof Uint8Array)this._pixelDataType=5121;else{if(!(f instanceof Float32Array))return;this._pixelDataType=5126}return this._reset(e,c),isNaN(this._pixelSize)||this._pixelSize!==f.length?(console.warn("The pixel size is invalid."),
void console.error("GLVerTexture ERROR 333")):(this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle),this._setTexParams(),void this._texImage2D())},setData:function(e,c,f){if(f instanceof Uint8Array)this._pixelDataType=5121;else{if(!(f instanceof Float32Array))return;this._pixelDataType=5126}return this._reset(e,c),isNaN(this._pixelSize)||this._pixelSize!==f.length?(console.warn("The pixel size is invalid."),void console.error("GLVerTexture ERROR 333")):(this._pixelData=f,this._gl.bindTexture(this._gl.TEXTURE_2D,
this._textureHandle),this._setTexParams(),void this._texImage2D())},updateTexture:function(e){this._pixelData=e;this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle);this._setTexParams();this._texImage2D();this._showError()},syncData:function(e){this._gl.bindTexture(this._gl.TEXTURE_2D,this._textureHandle);this._setTexParams();this._texImage2D();this._showError()},_showError:function(){var e=this._gl.getError();0!==e&&console.error("TEX Error \x3d\x3d\x3e "+e)},bind:function(e){return this._textureHandle?
("number"==typeof e&&this._gl.activeTexture(33984+e),this._gl.bindTexture(3553,this._textureHandle),void this.syncData()):void console.error("GLVerTexture ERROR 444")},unbind:function(){this._gl.bindTexture(3553,null)},release:function(){this._gl.bindTexture(3553,null)},getTextureHandle:function(){return this._textureHandle},dispose:function(){this._textureHandle.__deleted__=!0;this._gl.deleteTexture(this._textureHandle)},_texImage2D:function(){var e=this._gl.RGBA;this._gl instanceof WebGLRenderingContext||
this._gl instanceof WebGL2RenderingContext&&(e=this._gl.RGBA32F);this._gl.texImage2D(this._gl.TEXTURE_2D,0,e,this._width,this._height,0,this._gl.RGBA,this._pixelDataType,this._pixelData)}})})},"fx3d/views/3d/effects/FxEffectFactory":function(){define(["dojo/Deferred","../support/fx3dUtils"],function(b,a){return{make:function(d){var e=new b;if(d instanceof Object&&d.layer&&d.view&&d.layerView){var c=d.layer.vizType;if("string"!=typeof c)e.reject("No viz type specified.");else{var f=c+"Effect";c=d._test&&
a.enableAddTesting?"fx3d/views/3d/effects/_test/"+f:"fx3d/views/3d/effects/"+c+"/"+f;try{require([c],function(h){h=new h(d);e.resolve(h)})}catch(h){e.reject(h)}}}else e.reject("No FxLayer object found.");return e}}})},"url:fx3d/views/3d/effects/config.json":'{"point":[{"name":"Bounce","icon":"Bounce.png","requireTimeInfo": true,"status": null,"renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 1000,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 1,"scope":[1, 5],"unit":"esriSecond"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 30,"scope":[10, 50],"unit":"esriPixels"},{"name":"dashHeight","displayName":"DashHeight","dataType":"Size","defaultValue": 80000,"scope":[100, 500000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"haloColors","displayName":"HaloColors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]},{"name":"PointExtrude","icon":"PointExtrude.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"shapeType","displayName":"Shape","dataType":"Shape","scope":["Cuboid","Cylinder","Hexahedron"],"defaultValue":"Cylinder"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 60000,"scope":[1, 120000],"unit":"esriMeters"},{"name":"height","displayName":"Height","dataType":"Size","defaultValue": 800000,"scope":[100, 2000000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"topColors","displayName":"TopColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]},{"name":"bottomColor","displayName":"BottomColor","dataType":"SingleRGBColor","defaultValue":[0, 255, 0]}]},{"name":"Pulse","icon":"Pulse.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"shapeType","displayName":"Shape","dataType":"Shape","scope":["Circle","Triangle","Square","Hexagon"],"defaultValue":"Circle"},{"name":"radius","displayName":"InnerRadius","dataType":"Size","defaultValue": 50000,"scope":[1, 120000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"solidColor","displayName":"SolidColor","dataType":"SingleRGBColor","defaultValue":[255, 255, 20]},{"name":"haloColors","displayName":"HaloColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]}],"polyline":[{"name":"Fireball","icon":"Fireball.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 10,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 40,"scope":[30, 120],"unit":"esriPixels"},{"name":"colors","displayName":"Colors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]},{"name":"JetTrail","icon":"JetTrail.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 1000,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"radius","displayName":"Radius","dataType":"Size","defaultValue": 20,"scope":[10, 50],"unit":"esriPixels"},{"name":"pulseRadius","displayName":"PulseRadius","dataType":"Size","defaultValue": 100000,"scope":[20000, 400000],"unit":"esriMeters"},{"name":"colors","displayName":"Colors","dataType":"MultiRGBColors","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]}]}],"polygon":[{"name":"AreaExtrude","icon":"AreaExtrude.png","renderingInfo":[{"name":"visible","displayName":"Visible","dataType":"Boolean","defaultValue": true},{"name":"repeat","displayName":"Repeat","dataType":"Integer","defaultValue": 5,"scope":[0, 10000000000]},{"name":"animationInterval","displayName":"Interval","dataType":"Speed","defaultValue": 5,"scope":[2, 20],"unit":"esriSecond"},{"name":"height","displayName":"Height","dataType":"Size","defaultValue": 10000,"scope":[1, 3000000],"unit":"esriMeters"},{"name":"transparency","displayName":"Transparency","dataType":"Transparency","defaultValue": 100,"scope":[0, 100],"unit":"esriPercentage"},{"name":"topColors","displayName":"TopColors","dataType":"MultiRGBColor","defaultValue":[[95, 158, 160],[154, 205, 50],[255, 182, 193],[255, 69, 0],[0, 128, 0],[205, 92, 92]]},{"name":"bottomColor","displayName":"BottomColor","dataType":"SingleRGBColor","defaultValue":[0, 255, 0]}]}]}',
"url:fx3d/views/3d/effects/CommonShaders.xml":'\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e\x3c!-- Copyright @ 2023 Esri. All rights reserved under the copyright laws of the United States and applicable international laws, treaties, and conventions. --\x3e\x3csnippets\x3e\x3csnippet name\x3d"backEaseIn"\x3e\x3c![CDATA[float getBackEaseInValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3d1.70158;float g\x3da/d;return e*(g*g)*((f+1.0)*g-f)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"bounceEaseOut"\x3e\x3c![CDATA[float getBounceEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3dd)\x3c(1.0/2.75)) return e*(7.5625*a*a)+b;else if(a\x3c(2.0/2.75)) return e*(7.5625*(a-\x3d(1.5/2.75))*a+0.75)+b;else if(a\x3c(2.5/2.75)) return e*(7.5625*(a-\x3d(2.25/2.75))*a+0.9375)+b;else return e*(7.5625*(a-\x3d(2.625/2.75))*a+0.984375)+b;}float getBounceEaseInValue(float a,float b,float c,float d){return c-getBounceEaseOutValue(d-a,0.0,c,d)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"circEaseOut"\x3e\x3c![CDATA[float getCircEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3da/d-1.0;return e*sqrt(1.0-f*f)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"convertHSLtoRGB"\x3e\x3c![CDATA[vec4 a(vec4 b){const float c\x3d1.0/3.0;const float d\x3d2.0/3.0;const float e\x3d6.0;float f\x3db.x;float g\x3db.y;float h\x3db.z;vec3 i\x3dvec3(e*(f-d),0.0,e*(1.0-f));if(f\x3cd){i.r\x3d0.0;i.g\x3de*(d-f);i.b\x3de*(f-c);}if(f\x3cc){i.r\x3de*(c-f);i.g\x3de*f;i.b\x3d0.0;}i\x3dmin(i,1.0);float j\x3d2.0*g;float k\x3d1.0-g;float l\x3d1.0-h;float m\x3d(2.0*h)-1.0;vec3 n\x3d(j*i)+k;vec3 o;if(h\x3e\x3d0.5) o\x3d(l*n)+m;else o\x3dh*n;return vec4(o,b.a);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"cubicEaseOut"\x3e\x3c![CDATA[float getCubicEaseInOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3dd/2.0)\x3c1.0) return e/2.0*pow(a,3.0)+b;return e/2.0*((a-\x3d2.0)*pow(a,2.0)+2.0)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"curveInter"\x3e\x3c![CDATA[float b3p0(float a,float b){float c\x3d1.0-a;return pow(c,3.0)*b;}float b3p1(float a,float b){float c\x3d1.0-a;return 3.0*pow(c,2.0)*a*b;}float b3p2(float a,float b){float c\x3d1.0-a;return 3.0*c*pow(a,2.0)*b;}float b3p3(float a,float b){return pow(a,3.0)*b;}float b3(float a,float d,float e,float f,float g){return b3p0(a,d)+b3p1(a,e)+b3p2(a,f)+b3p3(a,g);}vec3 getPoint(float a,vec3 h,vec3 i,vec3 j,vec3 k){float l,m,n;l\x3db3(a,h.x,i.x,j.x,k.x);m\x3db3(a,h.y,i.y,j.y,k.y);n\x3db3(a,h.z,i.z,j.z,k.z);return vec3(l,m,n);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"defines"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\n#define Epsilon \t\t1e-6\r\n#define PI \t\t\t\t\t3.14159265358979323846264338327950288\r\n#define EarthRadius 6378137.0\r\n#define DegPerRad \t57.295779513082320\r\n#define RadPerDeg \t0.017453292519943\r\n]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"defines2"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\n]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"elasticEaseIn"\x3e\x3c![CDATA[float getElasticEaseInValue(float a,float b,float c,float d){float e\x3dc-b;float f\x3dd*0.3;float g\x3de;float h\x3df/4.0;float i\x3da-1.0;return -(g*pow(2.0,10.0*i)*sin((i*d-h)*(2.0*PI)/f))+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"expoEaseOut"\x3e\x3c![CDATA[float getExpoEaseOutValue(float a,float b,float c,float d){float e\x3dc-b;return (abs(a-d)\x3cEpsilon)?c:(e*(-pow(2.0,-10.0*a/d)+1.0)+b);}float getExpoEaseInValue(float a,float b,float c,float d){float e\x3dc-b;return (abs(a)\x3cEpsilon)?b:(e*pow(2.0,10.0*(a/d-1.0))+b);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"float2rgba"\x3e\x3c![CDATA[vec4 a(float v){float b\x3dfloor(v*256.0)/255.0;float c\x3dfloor(fract(v*256.0)*256.0)/255.0;float d\x3dfloor(fract(v*65536.0)*256.0)/255.0;float e\x3d1.0;return vec4(b,c,d,e);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"getHSVColor"\x3e\x3c![CDATA[vec4 getHSVColor(float a,float b,float c){vec3 d\x3dvec3(1.0,1.0,0.0);float e\x3da/60.0;float f\x3dfloor(e);float g\x3de-f;float h\x3dc*(1.0-b);float i\x3dc*(1.0-b*g);float j\x3dc*(1.0-b*(1.0-g));if(f\x3c0.5) d\x3dvec3(c,j,h);else if(f\x3c1.5) d\x3dvec3(i,c,h);else if(f\x3c2.5) d\x3dvec3(h,c,j);else if(f\x3c3.5) d\x3dvec3(h,i,c);else if(f\x3c4.5) d\x3dvec3(j,h,c);else d\x3dvec3(c,h,i);return vec4(d,0.7);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"linearInterpolator"\x3e\x3c![CDATA[float getLinearValue(vec2 a,float b){if(a[1]\x3d\x3da[0]) return 0.0;else{return (b-a[0])/(a[1]-a[0]);}}float getScope(vec2 c,float d){return c[0]+(c[1]-c[0])*d;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"localTrans"\x3e\x3c![CDATA[vec3 wgs84ToWebMerc(vec3 a){float b\x3d0.4999999*PI;float c\x3da[1]*RadPerDeg;c\x3dclamp(c,-b,b);float d\x3dsin(c);float e\x3dRadPerDeg*a[0]*EarthRadius;float f\x3dEarthRadius*0.5*log((1.0+d)/(1.0-d));float g\x3da[2];return vec3(e,f,g);}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"lonlat2position"\x3e\x3c![CDATA[vec3 lonlat2position(vec3 a){float b\x3dRadPerDeg*(a.x);float c\x3dRadPerDeg*(a.y);float d\x3dcos(c);float e\x3dEarthRadius+a.z;float f\x3dcos(b)*d*e;float g\x3dsin(b)*d*e;float h\x3dsin(c)*e;return vec3(f,g,h);}vec3 position2lonlat(vec3 i){float j\x3dlength(i);float k\x3dasin(i.z/j);float d\x3dcos(k);float l\x3d-1.0;if(i.y\x3e0.0){l\x3d1.0;}float m\x3dl*acos(i.x/(d*j));float b\x3dDegPerRad*(m);float c\x3dDegPerRad*(k);return vec3(b,c,j-EarthRadius);}mat4 toRotationMat(mat4 n){mat4 o\x3dmat4(1.0);o[0]\x3dn[0];o[1]\x3dn[1];o[2]\x3dn[2];return o;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"lonlatDistance"\x3e\x3c![CDATA[float a(vec2 b,vec2 c){float d\x3dRadPerDeg*(b.y);float e\x3dRadPerDeg*(c.y);float f\x3dRadPerDeg*(c.y-b.y);float g\x3dRadPerDeg*(c.x-b.x);float h\x3dsin(f/2.0)*sin(f/2.0)+cos(d)*cos(e)*sin(g/2.0)*sin(g/2.0);float i\x3d2.0*atan2(sqrt(h),sqrt(1.0-h));return EarthRadius*i;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"packDepth"\x3e\x3c![CDATA[\r\n#ifdef GL_ES\r\nprecision mediump float;\r\n#endif\r\nvec4 packDepth(const in mediump float a){const mediump vec4 b\x3dvec4(256.0,256.0*256.0,256.0*256.0*256.0,256.0*256.0*256.0*256.0);vec4 c\x3da*b;c.x\x3dmin(c.x+1.0,255.0);c\x3dfract(floor(c)/256.0);return c;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"quintEaseOut"\x3e\x3c![CDATA[float getQuintEaseInOutValue(float a,float b,float c,float d){float e\x3dc-b;if((a/\x3d(d/2.0))\x3c1.0){return e/2.0*a*a*a*a*a+b;}return e/2.0*((a-\x3d2.0)*a*a*a*a+2.0)+b;}float getQuintEaseOut(float a,float b,float c,float d){float e\x3dc-b;return e*((a\x3da/d-1.0)*a*a*a*a+1.0)+b;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"rotateFromToMat"\x3e\x3c![CDATA[mat4 rotateFromTo(vec3 a,vec3 b){mat4 c\x3dmat4(1.0);vec3 d\x3dnormalize(a);vec3 e\x3dnormalize(b);float f\x3ddot(d,e);float g\x3dsqrt(1.0-f*f);float h\x3d1.0-f;vec3 i\x3dcross(d,e);i\x3dnormalize(i);float j\x3di.x,k\x3di.y,l\x3di.z;float m\x3dc[0].x,n\x3dc[0].y,o\x3dc[0].z,p\x3dc[0].w,q\x3dc[1].x,r\x3dc[1].y,s\x3dc[1].z,t\x3dc[1].w,u\x3dc[2].x,v\x3dc[2].y,w\x3dc[2].z,x\x3dc[2].w;float y\x3dj*j*h+f,z\x3dk*j*h+l*g,A\x3dl*j*h-k*g,B\x3dj*k*h-l*g,C\x3dk*k*h+f,D\x3dl*k*h+j*g,E\x3dj*l*h+k*g,F\x3dk*l*h-j*g,G\x3dl*l*h+f;c[0].x\x3dm*y+q*z+u*A;c[0].y\x3dn*y+r*z+v*A;c[0].z\x3do*y+s*z+w*A;c[0].w\x3dp*y+t*z+x*A;c[1].x\x3dm*B+q*C+u*D;c[1].y\x3dn*B+r*C+v*D;c[1].z\x3do*B+s*C+w*D;c[1].w\x3dp*B+t*C+x*D;c[2].x\x3dm*E+q*F+u*G;c[2].y\x3dn*E+r*F+v*G;c[2].z\x3do*E+s*F+w*G;c[2].w\x3dp*E+t*F+x*G;return c;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"translationMat"\x3e\x3c![CDATA[mat4 rotateX(mat4 a,float b){mat4 c\x3da;float d\x3dsin(b);float e\x3dcos(b);float f\x3da[1].x,g\x3da[1].y,h\x3da[1].z,i\x3da[1].w,j\x3da[2].x,k\x3da[2].y,l\x3da[2].z,m\x3da[2].w;c[1].x\x3df*e+j*d;c[1].y\x3dg*e+k*d;c[1].z\x3dh*e+l*d;c[1].w\x3di*e+m*d;c[2].x\x3df*(-d)+j*e;c[2].y\x3dg*(-d)+k*e;c[2].z\x3dh*(-d)+l*e;c[2].w\x3di*(-d)+m*e;return c;}mat4 rotateY(mat4 a,float b){mat4 c\x3da;float d\x3dsin(b);float e\x3dcos(b);float n\x3da[0].x,o\x3da[0].y,p\x3da[0].z,q\x3da[0].w,j\x3da[2].x,k\x3da[2].y,l\x3da[2].z,m\x3da[2].w;c[0].x\x3dn*e+j*(-d);c[0].y\x3do*e+k*(-d);c[0].z\x3dp*e+l*(-d);c[0].w\x3dq*e+m*(-d);c[2].x\x3dn*d+j*e;c[2].y\x3do*d+k*e;c[2].z\x3dp*d+l*e;c[2].w\x3dq*d+m*e;return c;}mat4 getTransMat(vec3 r){mat4 s\x3dmat4(1.0);float t\x3dRadPerDeg*(r.x);float u\x3dRadPerDeg*(r.y);float v\x3dsin(t),w\x3dcos(t),x\x3dsin(u),y\x3dcos(u);s[0].x\x3d-v;s[1].x\x3d-x*w;s[2].x\x3dy*w;s[0].y\x3dw;s[1].y\x3d-x*v;s[2].y\x3dy*v;s[0].z\x3d0.0;s[1].z\x3dy;s[2].z\x3dx;s[0].w\x3d0.0;s[1].w\x3d0.0;s[2].w\x3d0.0;s[3].xyz\x3dlonlat2position(r);s[3].w\x3d1.0;return s;}vec3 rotateOnAxis(vec3 z,float b,vec3 A){vec3 B;float C\x3db*0.5;float d\x3dsin(C);float D\x3dcos(C);float E\x3dd*z[0];float F\x3dd*z[1];float G\x3dd*z[2];float H\x3dA[0],I\x3dA[1],J\x3dA[2];float K\x3dD*H+F*J-G*I,L\x3dD*I+G*H-E*J,M\x3dD*J+E*I-F*H,N\x3d-E*H-F*I-G*J;B[0]\x3dK*D+N*-E+L*-G-M*-F;B[1]\x3dL*D+N*-F+M*-E-K*-G;B[2]\x3dM*D+N*-G+K*-F-L*-E;return B;}]]\x3e\x3c/snippet\x3e\x3csnippet name\x3d"transparentFunc"\x3e\x3c![CDATA[\r\n#extension GL_OES_standard_derivatives : enable\r\nfloat edgeFactor(float a,float b){vec3 b\x3dfwidth(a);vec3 c\x3dsmoothstep(vec3(0.0),b*1.5,a);return min(min(c.x,c.y),c.z);}]]\x3e\x3c/snippet\x3e\x3c/snippets\x3e'}});
define("dojo/_base/lang esri/core/has dojo/_base/array esri/request esri/PopupTemplate esri/core/lang esri/rest/support/Query esri/layers/FeatureLayer esri/layers/support/fieldUtils esri/renderers/support/styleUtils esri/layers/support/arcgisLayerUrl esri/geometry/SpatialReference ../views/3d/support/fx3dUtils ../views/3d/layers/FxLayerView3D".split(" "),function(b,a,d,e,c,f,h,v,G,k,y,t,F,H){function K(q){var n=[],A=[],z=["small-integer","integer","single","long","double"],J="lat latitude y ycenter latitude83 latdecdeg POINT-Y lon lng long longitude x xcenter longitude83 longdecdeg POINT-X alt altitude z POINT-Z zcenter altitude83 altdecdeg".split(" ");
return d.forEach(q,function(r){n.push(r.name);var g=r.name.toLowerCase();-1<z.indexOf(r.type)&&-1===J.indexOf(g)&&A.push(r.name)}),{displayFields:n,vizFields:A}}e=v.createSubclass({declaredClass:"esri.layers.FxLayer",viewModulePaths:{"3d":"fx3d/views/3d/layers/FxLayerView3D"},properties:{renderingInfo:{value:null,set:function(q){var n=this._get("renderingInfo");b.isObject(q)&&!F.isEqual(q,n)&&this._set("renderingInfo",q)}},vizType:{value:null,set:function(q){var n=this._get("vizType");b.isString(q)&&
!F.isEqual(q,n)&&this._set("vizType",q)}},displayField:{type:String,value:null,json:{ignore:!0},set:function(q){var n=this._get("displayField");b.isString(q)&&!F.isEqual(q,n)&&this._set("displayField",q)}},vizFields:{value:null,set:function(q){q=b.isString(q)?[q]:q;var n=this._get("vizFields");b.isArray(q)&&!F.isEqual(q,n)&&this._set("vizFields",q)}},spinTag:{value:!1,set:function(q){var n=this._get("spinTag");"boolean"==typeof q&&q!==n&&this._set("spinTag",q)}},pauseTag:{value:!1,set:function(q){var n=
this._get("pauseTag");"boolean"==typeof q&&q!==n&&this._set("pauseTag",q)}}},constructor:function(q,n){this.importLayerViewModule(n.view);this.url=q;Object.keys(n).forEach(function(A){this[A]=n[A]}.bind(this));this.outFields=["*"];this.listMode="hide"},normalizeCtorArgs:function(q,n){return b.isString(q)&&F.isUrl(q)?(q=y.parse(q),q&&null!=q.sublayer&&null==this.layerId&&(this.layerId=q.sublayer),b.mixin({},{url:q.url.path},n)):(console.warn("Data source must be a FeatureService url."),null)},remove:function(){this.pauseAnimation();
this.pauseSpinning();this.emit("destroy-fxlayer");this.fxLayerView&&!1===this.fxLayerView.destroyed&&(this.fxLayerView.destroy(),this.fxLayerView=null)},_initLayerProperties:function(q){this.source||(this.source=q);q.url&&(this.url=q.url);var n=this.source.relatedFeaturesInfo,A=f.mixin({},q.sourceJSON,n?{objectIdField:n.joinField}:{});if(n&&(this.source.relatedFeaturesInfo.outFields=this.outFields?this.outFields.splice(0):null),this.sourceJSON=q.sourceJSON,this.read(A,{origin:"service",url:this.parsedUrl}),
n&&n.outFields&&"*"!==n.outFields[0]&&(n.outFields=n.outFields.map(function(p){return p.toLowerCase()})),this._verifySource(),this._verifyFields(),this.useQueryTimestamp=a("ie")||a("safari"),this.listMode="hide",this.disablePopup=!0,this.visible=!0,!b.isArray(this.fields))return void console.warn("Fileds from source is invalid.");q=K(this.fields);var z=q.vizFields;q=q.displayFields;var J=null,r=null;if(b.isString(this.displayField)&&0!==this.displayField.length?(r=null,J=d.some(q,function(p){if(p.toLowerCase()===
this.displayField.toLowerCase())return r=p,!0}.bind(this)),J?this.set("displayField",r):this.set("displayField",q[0])):this.set("displayField",q[0]),b.isArray(this.vizFields)&&0!==this.vizFields.length){var g=[];d.forEach(z,function(p){g.push(p.toLowerCase())});J=[];d.forEach(this.vizFields,function(p){p=g.indexOf(p.toLowerCase());-1<p&&J.push(z[p])}.bind(this));0<J.length?this.set("vizFields",J):this.set("vizFields",z[0])}else this.set("vizFields",z[0]);return this.availableVizTypes=F.availableVizTypes(this.geometryType,
this.timeInfo),b.isString(this.vizType)&&0!==this.vizType.length?(r=null,J=d.some(this.availableVizTypes,function(p){if(p.name.toLowerCase()===this.vizType.toLowerCase())return r=p.name,!0}.bind(this)),J?this.vizType=r:this.vizType=this.availableVizTypes[0]?this.availableVizTypes[0].name:null):this.vizType=this.availableVizTypes[0]?this.availableVizTypes[0].name:null,this.popupTemplate||(this.popupTemplate=new c({title:this.name,fieldInfos:this.fields?d.map(this.fields,function(p){return{fieldName:p.name,
label:p.name,visible:!0}}):[],content:"{*}"})),this.vizType&&0!=this.vizType.length&&this.displayField&&0!=this.displayField.length&&b.isArray(this.vizFields)&&0!=this.vizFields.length?(this.set("visible",!0),k.loadStyleRenderer(this,{origin:"service"})):(this.set("visible",!1),this.set("loaded",!1),this.emit("fxlayer-error",{msg:"Properties of vizType, displayField, vizFields, renderingInfo, or popupTemplate is missing."}),void console.warn("Properties of vizType, displayField, vizFields, renderingInfo, or popupTemplate is missing."))},
createQuery:function(){var q=new h,n=this.capabilities?this.capabilities.data:void 0;return q.returnGeometry=!0,q.returnZ=n&&n.supportsZ&&this.returnZ||null,q.returnM=n&&n.supportsM&&this.returnM||null,q.outFields=this.outFields,q.where=this.definitionExpression||"1\x3d1",q.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,q.outFields=["*"],q},createQueryParameters:function(){var q=new h;return q.outSpatialReference=t.WGS84,Object.defineProperty(q,"outSpatialReference",{configurable:!0,
writable:!1}),q.returnGeometry=!0,q.returnZ=this.hasZ&&this.returnZ||null,q.returnM=this.hasM&&this.returnM||null,q.outFields=this.outFields,q.where=this.definitionExpression||"1\x3d1",q.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,queryParams.outFields=["*"],q},importLayerViewModule:function(q){"3d"===q.type&&(this.fxLayerView=new H({layer:this,view:q}))},showLabel:function(q){q&&this.emit("show-feature-label",{feature:q})},hideLabel:function(){this.emit("hide-feature-label")},
startAnimation:function(){return this.visible?void(this.pauseTag=!1):void console.warn("The FxLayer is invisible now.")},pauseAnimation:function(){this.pauseTag=!0},startSpinning:function(){return this.visible?void(this.spinTag=!0):void console.warn("The FxLayer is invisible now.")},pauseSpinning:function(){this.spinTag=!1},switchVizField:function(q,n){function A(r){-1<r&&r<z.vizFields.length?(z.emit("hide-feature-label"),z.emit("fx3d-active-viz-field",{currentVizPage:r,newRenderingInfo:n})):console.warn("invalid viz page in switchVizField(vizField).")}
if(!this.visible)return void console.warn("The FxLayer is invisible now.");var z=this;if(b.isString(q)){var J=[];d.forEach(this.vizFields,function(r){J.push(r.toLowerCase())});q=J.indexOf(q.toLowerCase());A(q)}else"number"==typeof q?A(q):console.warn("switchVizField(vizField) needs a integer id or string name as parameter.")}});return b.mixin(e,F.EffectType),e});