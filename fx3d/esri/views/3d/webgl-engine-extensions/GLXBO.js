//>>built
define(["./Number32ArrayList","esri/views/3d/webgl-engine/lib/Util"],function(f,g){var h=0,k=0,e=g.assert;return function(){function c(b,a,d,l){this.glName=b.createBuffer();this._gl=b;this.num=0;this.drawMode=l?35048:35044;this.dataBuffer=new f(a);this.isDirty=!1;this.bufferType=a?34962:34963;this.isVBO=a;this.vertexBufferLayout=d;this.id=a?h++:k++}return c.prototype.setData=function(b,a){e(b instanceof this.dataBuffer.getArrayType());this._gl.bindBuffer(this.bufferType,this.glName);this._gl.bufferData(this.bufferType,
b,this.drawMode);this._gl.bindBuffer(this.bufferType,null);this.isVBO&&this.vertexBufferLayout?this.num=a/this.vertexBufferLayout.getStride():this.num=a},c.prototype.addData=function(b,a){e(a instanceof this.dataBuffer.getArrayType());!0!==b?this.dataBuffer.whole(a):this.dataBuffer.append(a);this.isDirty=!0},c.prototype.updateSubData=function(b,a,d){this._gl.bindBuffer(this.bufferType,this.glName);this._gl.bufferSubData(this.bufferType,4*a,b.subarray(a,d));this._gl.bindBuffer(this.bufferType,null)},
c.prototype.updateData=function(b,a){this._gl.bindBuffer(this.bufferType,this.glName);this._gl.bufferSubData(this.bufferType,4*b,a);this._gl.bindBuffer(this.bufferType,null)},c.prototype.bind=function(b){this.isDirty&&(this.isDirty=!1,this.setData(this.dataBuffer.getArray(),this.dataBuffer.getSize()));this._gl.bindBuffer(this.bufferType,this.glName);this.isVBO&&this.vertexBufferLayout&&this.vertexBufferLayout.setVertexAttribPointers(this._gl,b)},c.prototype.unbind=function(){this._gl.bindBuffer(this.bufferType,
null)},c.prototype.getNum=function(){return this.num},c.prototype.getId=function(){return this.id},c.prototype.dispose=function(){this._gl.deleteBuffer(this.glName);this.dataBuffer.getArray()},c}()});